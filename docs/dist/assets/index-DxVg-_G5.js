var Eg=t=>{throw TypeError(t)};var Td=(t,e,n)=>e.has(t)||Eg("Cannot "+n);var k=(t,e,n)=>(Td(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?Eg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),j=(t,e,n,r)=>(Td(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),G=(t,e,n)=>(Td(t,e,"access private method"),n);var Fa=(t,e,n,r)=>({set _(i){j(t,e,i,n)},get _(){return k(t,e,r)}});function i1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var o1={exports:{}},Lc={},l1={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xa=Symbol.for("react.element"),$b=Symbol.for("react.portal"),zb=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),Bb=Symbol.for("react.profiler"),Ub=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),Hb=Symbol.for("react.forward_ref"),Wb=Symbol.for("react.suspense"),qb=Symbol.for("react.memo"),Kb=Symbol.for("react.lazy"),_g=Symbol.iterator;function Jb(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var a1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u1=Object.assign,c1={};function Uo(t,e,n){this.props=t,this.context=e,this.refs=c1,this.updater=n||a1}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d1(){}d1.prototype=Uo.prototype;function Op(t,e,n){this.props=t,this.context=e,this.refs=c1,this.updater=n||a1}var Mp=Op.prototype=new d1;Mp.constructor=Op;u1(Mp,Uo.prototype);Mp.isPureReactComponent=!0;var Tg=Array.isArray,f1=Object.prototype.hasOwnProperty,Np={current:null},h1={key:!0,ref:!0,__self:!0,__source:!0};function p1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)f1.call(e,r)&&!h1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:xa,type:t,key:s,ref:o,props:i,_owner:Np.current}}function Qb(t,e){return{$$typeof:xa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===xa}function Gb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Og=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gb(""+t.key):e.toString(36)}function wu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xa:case $b:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Od(o,0):r,Tg(i)?(n="",t!=null&&(n=t.replace(Og,"$&/")+"/"),wu(i,e,n,"",function(u){return u})):i!=null&&(Pp(i)&&(i=Qb(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Og,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Tg(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Od(s,l);o+=wu(s,e,n,a,i)}else if(a=Jb(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Od(s,l++),o+=wu(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ba(t,e,n){if(t==null)return t;var r=[],i=0;return wu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Yb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},xu={transition:null},Xb={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:xu,ReactCurrentOwner:Np};function m1(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Ba,forEach:function(t,e,n){Ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ba(t,function(){e++}),e},toArray:function(t){return Ba(t,function(e){return e})||[]},only:function(t){if(!Pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Uo;se.Fragment=zb;se.Profiler=Bb;se.PureComponent=Op;se.StrictMode=Fb;se.Suspense=Wb;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xb;se.act=m1;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=u1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Np.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)f1.call(e,a)&&!h1.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:xa,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Vb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ub,_context:t},t.Consumer=t};se.createElement=p1;se.createFactory=function(t){var e=p1.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Hb,render:t}};se.isValidElement=Pp;se.lazy=function(t){return{$$typeof:Kb,_payload:{_status:-1,_result:t},_init:Yb}};se.memo=function(t,e){return{$$typeof:qb,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=xu.transition;xu.transition={};try{t()}finally{xu.transition=e}};se.unstable_act=m1;se.useCallback=function(t,e){return Nt.current.useCallback(t,e)};se.useContext=function(t){return Nt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Nt.current.useEffect(t,e)};se.useId=function(){return Nt.current.useId()};se.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Nt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};se.useRef=function(t){return Nt.current.useRef(t)};se.useState=function(t){return Nt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Nt.current.useTransition()};se.version="18.3.1";l1.exports=se;var _=l1.exports;const Ce=s1(_),Zb=i1({__proto__:null,default:Ce},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC=_,tC=Symbol.for("react.element"),nC=Symbol.for("react.fragment"),rC=Object.prototype.hasOwnProperty,iC=eC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sC={key:!0,ref:!0,__self:!0,__source:!0};function g1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rC.call(e,r)&&!sC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tC,type:t,key:s,ref:o,props:i,_owner:iC.current}}Lc.Fragment=nC;Lc.jsx=g1;Lc.jsxs=g1;o1.exports=Lc;var w=o1.exports,y1={exports:{}},en={},v1={exports:{}},w1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Y=$.length;$.push(Q);e:for(;0<Y;){var fe=Y-1>>>1,ke=$[fe];if(0<i(ke,Q))$[fe]=Q,$[Y]=ke,Y=fe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Y=$.pop();if(Y!==Q){$[0]=Y;e:for(var fe=0,ke=$.length,In=ke>>>1;fe<In;){var rt=2*(fe+1)-1,vn=$[rt],wt=rt+1,Yn=$[wt];if(0>i(vn,Y))wt<ke&&0>i(Yn,vn)?($[fe]=Yn,$[wt]=Y,fe=wt):($[fe]=vn,$[rt]=Y,fe=rt);else if(wt<ke&&0>i(Yn,Y))$[fe]=Yn,$[wt]=Y,fe=wt;else break e}}return Q}function i($,Q){var Y=$.sortIndex-Q.sortIndex;return Y!==0?Y:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=$)r(u),Q.sortIndex=Q.expirationTime,e(a,Q);else break;Q=n(u)}}function C($){if(m=!1,x($),!p)if(n(a)!==null)p=!0,Sr(T);else{var Q=n(u);Q!==null&&je(C,Q.startTime-$)}}function T($,Q){p=!1,m&&(m=!1,g(O),O=-1),h=!0;var Y=f;try{for(x(Q),d=n(a);d!==null&&(!(d.expirationTime>Q)||$&&!ee());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,f=d.priorityLevel;var ke=fe(d.expirationTime<=Q);Q=t.unstable_now(),typeof ke=="function"?d.callback=ke:d===n(a)&&r(a),x(Q)}else r(a);d=n(a)}if(d!==null)var In=!0;else{var rt=n(u);rt!==null&&je(C,rt.startTime-Q),In=!1}return In}finally{d=null,f=Y,h=!1}}var S=!1,N=null,O=-1,P=5,I=-1;function ee(){return!(t.unstable_now()-I<P)}function pe(){if(N!==null){var $=t.unstable_now();I=$;var Q=!0;try{Q=N(!0,$)}finally{Q?$e():(S=!1,N=null)}}else S=!1}var $e;if(typeof y=="function")$e=function(){y(pe)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,xr=ze.port2;ze.port1.onmessage=pe,$e=function(){xr.postMessage(null)}}else $e=function(){v(pe,0)};function Sr($){N=$,S||(S=!0,$e())}function je($,Q){O=v(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Sr(T))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var Y=f;f=Q;try{return $()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=f;f=$;try{return Q()}finally{f=Y}},t.unstable_scheduleCallback=function($,Q,Y){var fe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?fe+Y:fe):Y=fe,$){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=Y+ke,$={id:c++,callback:Q,priorityLevel:$,startTime:Y,expirationTime:ke,sortIndex:-1},Y>fe?($.sortIndex=Y,e(u,$),n(a)===null&&$===n(u)&&(m?(g(O),O=-1):m=!0,je(C,Y-fe))):($.sortIndex=ke,e(a,$),p||h||(p=!0,Sr(T))),$},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function($){var Q=f;return function(){var Y=f;f=Q;try{return $.apply(this,arguments)}finally{f=Y}}}})(w1);v1.exports=w1;var oC=v1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC=_,Zt=oC;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x1=new Set,zl={};function vs(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(zl[t]=e,t=0;t<e.length;t++)x1.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,aC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},Ng={};function uC(t){return Df.call(Ng,t)?!0:Df.call(Mg,t)?!1:aC.test(t)?Ng[t]=!0:(Mg[t]=!0,!1)}function cC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dC(t,e,n,r){if(e===null||typeof e>"u"||cC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rp,Ap);ct[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rp,Ap);ct[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rp,Ap);ct[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dp(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dC(e,n,i,r)&&(n=null),r||i===null?uC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=lC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ua=Symbol.for("react.element"),Ls=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Ip=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),k1=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),jf=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),Lp=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),b1=Symbol.for("react.offscreen"),Pg=Symbol.iterator;function el(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Md;function pl(t){if(Md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Md=e&&e[1]||""}return`
`+Md+t}var Nd=!1;function Pd(t,e){if(!t||Nd)return"";Nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pl(t):""}function fC(t){switch(t.tag){case 5:return pl(t.type);case 16:return pl("Lazy");case 13:return pl("Suspense");case 19:return pl("SuspenseList");case 0:case 2:case 15:return t=Pd(t.type,!1),t;case 11:return t=Pd(t.type.render,!1),t;case 1:return t=Pd(t.type,!0),t;default:return""}}function $f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Ls:return"Portal";case If:return"Profiler";case Ip:return"StrictMode";case jf:return"Suspense";case Lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k1:return(t.displayName||"Context")+".Consumer";case S1:return(t._context.displayName||"Context")+".Provider";case jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lp:return e=t.displayName||null,e!==null?e:$f(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return $f(t(e))}catch{}}return null}function hC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $f(e);case 8:return e===Ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pC(t){var e=C1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Va(t){t._valueTracker||(t._valueTracker=pC(t))}function E1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zf(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _1(t,e){e=e.checked,e!=null&&Dp(t,"checked",e,!1)}function Ff(t,e){_1(t,e);var n=pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bf(t,e.type,pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ag(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bf(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ml=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(ml(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pi(n)}}function T1(t,e){var n=pi(e.value),r=pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function O1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?O1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ha,M1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mC=["Webkit","ms","Moz","O"];Object.keys(Cl).forEach(function(t){mC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cl[e]=Cl[t]})});function N1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Cl.hasOwnProperty(t)&&Cl[t]?(""+e).trim():e+"px"}function P1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=N1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var gC=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hf(t,e){if(e){if(gC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Wf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qf=null;function $p(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kf=null,Xs=null,Zs=null;function jg(t){if(t=ba(t)){if(typeof Kf!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Uc(e),Kf(t.stateNode,t.type,e))}}function R1(t){Xs?Zs?Zs.push(t):Zs=[t]:Xs=t}function A1(){if(Xs){var t=Xs,e=Zs;if(Zs=Xs=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function D1(t,e){return t(e)}function I1(){}var Rd=!1;function j1(t,e,n){if(Rd)return t(e,n);Rd=!0;try{return D1(t,e,n)}finally{Rd=!1,(Xs!==null||Zs!==null)&&(I1(),A1())}}function Bl(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Jf=!1;if(dr)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Jf=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Jf=!1}function yC(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var El=!1,Bu=null,Uu=!1,Qf=null,vC={onError:function(t){El=!0,Bu=t}};function wC(t,e,n,r,i,s,o,l,a){El=!1,Bu=null,yC.apply(vC,arguments)}function xC(t,e,n,r,i,s,o,l,a){if(wC.apply(this,arguments),El){if(El){var u=Bu;El=!1,Bu=null}else throw Error(D(198));Uu||(Uu=!0,Qf=u)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lg(t){if(ws(t)!==t)throw Error(D(188))}function SC(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lg(i),t;if(s===r)return Lg(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function $1(t){return t=SC(t),t!==null?z1(t):null}function z1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z1(t);if(e!==null)return e;t=t.sibling}return null}var F1=Zt.unstable_scheduleCallback,$g=Zt.unstable_cancelCallback,kC=Zt.unstable_shouldYield,bC=Zt.unstable_requestPaint,Le=Zt.unstable_now,CC=Zt.unstable_getCurrentPriorityLevel,zp=Zt.unstable_ImmediatePriority,B1=Zt.unstable_UserBlockingPriority,Vu=Zt.unstable_NormalPriority,EC=Zt.unstable_LowPriority,U1=Zt.unstable_IdlePriority,$c=null,qn=null;function _C(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot($c,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:MC,TC=Math.log,OC=Math.LN2;function MC(t){return t>>>=0,t===0?32:31-(TC(t)/OC|0)|0}var Wa=64,qa=4194304;function gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=gl(l):(s&=o,s!==0&&(r=gl(s)))}else o=n&~i,o!==0?r=gl(o):s!==0&&(r=gl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function NC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=NC(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Gf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V1(){var t=Wa;return Wa<<=1,!(Wa&4194240)&&(Wa=64),t}function Ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function RC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Fp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function H1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W1,Bp,q1,K1,J1,Yf=!1,Ka=[],ei=null,ti=null,ni=null,Ul=new Map,Vl=new Map,Ir=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zg(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function nl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ba(e),e!==null&&Bp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DC(t,e,n,r,i){switch(e){case"focusin":return ei=nl(ei,t,e,n,r,i),!0;case"dragenter":return ti=nl(ti,t,e,n,r,i),!0;case"mouseover":return ni=nl(ni,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ul.set(s,nl(Ul.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vl.set(s,nl(Vl.get(s)||null,t,e,n,r,i)),!0}return!1}function Q1(t){var e=zi(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=L1(n),e!==null){t.blockedOn=e,J1(t.priority,function(){q1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qf=r,n.target.dispatchEvent(r),qf=null}else return e=ba(n),e!==null&&Bp(e),t.blockedOn=n,!1;e.shift()}return!0}function Fg(t,e,n){Su(t)&&n.delete(e)}function IC(){Yf=!1,ei!==null&&Su(ei)&&(ei=null),ti!==null&&Su(ti)&&(ti=null),ni!==null&&Su(ni)&&(ni=null),Ul.forEach(Fg),Vl.forEach(Fg)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,IC)))}function Hl(t){function e(i){return rl(i,t)}if(0<Ka.length){rl(Ka[0],t);for(var n=1;n<Ka.length;n++){var r=Ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ei!==null&&rl(ei,t),ti!==null&&rl(ti,t),ni!==null&&rl(ni,t),Ul.forEach(e),Vl.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)Q1(n),n.blockedOn===null&&Ir.shift()}var eo=vr.ReactCurrentBatchConfig,Wu=!0;function jC(t,e,n,r){var i=ge,s=eo.transition;eo.transition=null;try{ge=1,Up(t,e,n,r)}finally{ge=i,eo.transition=s}}function LC(t,e,n,r){var i=ge,s=eo.transition;eo.transition=null;try{ge=4,Up(t,e,n,r)}finally{ge=i,eo.transition=s}}function Up(t,e,n,r){if(Wu){var i=Xf(t,e,n,r);if(i===null)Vd(t,e,r,qu,n),zg(t,r);else if(DC(i,t,e,n,r))r.stopPropagation();else if(zg(t,r),e&4&&-1<AC.indexOf(t)){for(;i!==null;){var s=ba(i);if(s!==null&&W1(s),s=Xf(t,e,n,r),s===null&&Vd(t,e,r,qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var qu=null;function Xf(t,e,n,r){if(qu=null,t=$p(r),t=zi(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qu=t,null}function G1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CC()){case zp:return 1;case B1:return 4;case Vu:case EC:return 16;case U1:return 536870912;default:return 16}default:return 16}}var Jr=null,Vp=null,ku=null;function Y1(){if(ku)return ku;var t,e=Vp,n=e.length,r,i="value"in Jr?Jr.value:Jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ku=i.slice(t,1<r?1-r:void 0)}function bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ja(){return!0}function Bg(){return!1}function tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ja:Bg,this.isPropagationStopped=Bg,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hp=tn(Vo),ka=Ne({},Vo,{view:0,detail:0}),$C=tn(ka),Dd,Id,il,zc=Ne({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Dd=t.screenX-il.screenX,Id=t.screenY-il.screenY):Id=Dd=0,il=t),Dd)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),Ug=tn(zc),zC=Ne({},zc,{dataTransfer:0}),FC=tn(zC),BC=Ne({},ka,{relatedTarget:0}),jd=tn(BC),UC=Ne({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),VC=tn(UC),HC=Ne({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WC=tn(HC),qC=Ne({},Vo,{data:0}),Vg=tn(qC),KC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QC[t])?!!e[t]:!1}function Wp(){return GC}var YC=Ne({},ka,{key:function(t){if(t.key){var e=KC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XC=tn(YC),ZC=Ne({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hg=tn(ZC),eE=Ne({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),tE=tn(eE),nE=Ne({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=tn(nE),iE=Ne({},zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sE=tn(iE),oE=[9,13,27,32],qp=dr&&"CompositionEvent"in window,_l=null;dr&&"documentMode"in document&&(_l=document.documentMode);var lE=dr&&"TextEvent"in window&&!_l,X1=dr&&(!qp||_l&&8<_l&&11>=_l),Wg=" ",qg=!1;function Z1(t,e){switch(t){case"keyup":return oE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zs=!1;function aE(t,e){switch(t){case"compositionend":return ew(e);case"keypress":return e.which!==32?null:(qg=!0,Wg);case"textInput":return t=e.data,t===Wg&&qg?null:t;default:return null}}function uE(t,e){if(zs)return t==="compositionend"||!qp&&Z1(t,e)?(t=Y1(),ku=Vp=Jr=null,zs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X1&&e.locale!=="ko"?null:e.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cE[t.type]:e==="textarea"}function tw(t,e,n,r){R1(r),e=Ku(e,"onChange"),0<e.length&&(n=new Hp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tl=null,Wl=null;function dE(t){fw(t,0)}function Fc(t){var e=Us(t);if(E1(e))return t}function fE(t,e){if(t==="change")return e}var nw=!1;if(dr){var Ld;if(dr){var $d="oninput"in document;if(!$d){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),$d=typeof Jg.oninput=="function"}Ld=$d}else Ld=!1;nw=Ld&&(!document.documentMode||9<document.documentMode)}function Qg(){Tl&&(Tl.detachEvent("onpropertychange",rw),Wl=Tl=null)}function rw(t){if(t.propertyName==="value"&&Fc(Wl)){var e=[];tw(e,Wl,t,$p(t)),j1(dE,e)}}function hE(t,e,n){t==="focusin"?(Qg(),Tl=e,Wl=n,Tl.attachEvent("onpropertychange",rw)):t==="focusout"&&Qg()}function pE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fc(Wl)}function mE(t,e){if(t==="click")return Fc(e)}function gE(t,e){if(t==="input"||t==="change")return Fc(e)}function yE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:yE;function ql(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Df.call(e,i)||!An(t[i],e[i]))return!1}return!0}function Gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,e){var n=Gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gg(n)}}function iw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sw(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vE(t){var e=sw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iw(n.ownerDocument.documentElement,n)){if(r!==null&&Kp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yg(n,s);var o=Yg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wE=dr&&"documentMode"in document&&11>=document.documentMode,Fs=null,Zf=null,Ol=null,eh=!1;function Xg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eh||Fs==null||Fs!==Fu(r)||(r=Fs,"selectionStart"in r&&Kp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ol&&ql(Ol,r)||(Ol=r,r=Ku(Zf,"onSelect"),0<r.length&&(e=new Hp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fs)))}function Qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},zd={},ow={};dr&&(ow=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Bc(t){if(zd[t])return zd[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ow)return zd[t]=e[n];return t}var lw=Bc("animationend"),aw=Bc("animationiteration"),uw=Bc("animationstart"),cw=Bc("transitionend"),dw=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){dw.set(t,e),vs(e,[t])}for(var Fd=0;Fd<Zg.length;Fd++){var Bd=Zg[Fd],xE=Bd.toLowerCase(),SE=Bd[0].toUpperCase()+Bd.slice(1);vi(xE,"on"+SE)}vi(lw,"onAnimationEnd");vi(aw,"onAnimationIteration");vi(uw,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(cw,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kE=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function ey(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xC(r,e,void 0,t),t.currentTarget=null}function fw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;ey(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;ey(i,l,u),s=a}}}if(Uu)throw t=Qf,Uu=!1,Qf=null,t}function be(t,e){var n=e[sh];n===void 0&&(n=e[sh]=new Set);var r=t+"__bubble";n.has(r)||(hw(e,t,2,!1),n.add(r))}function Ud(t,e,n){var r=0;e&&(r|=4),hw(n,t,r,e)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Kl(t){if(!t[Ga]){t[Ga]=!0,x1.forEach(function(n){n!=="selectionchange"&&(kE.has(n)||Ud(n,!1,t),Ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ga]||(e[Ga]=!0,Ud("selectionchange",!1,e))}}function hw(t,e,n,r){switch(G1(e)){case 1:var i=jC;break;case 4:i=LC;break;default:i=Up}n=i.bind(null,e,n,t),i=void 0,!Jf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=zi(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}j1(function(){var u=s,c=$p(n),d=[];e:{var f=dw.get(t);if(f!==void 0){var h=Hp,p=t;switch(t){case"keypress":if(bu(n)===0)break e;case"keydown":case"keyup":h=XC;break;case"focusin":p="focus",h=jd;break;case"focusout":p="blur",h=jd;break;case"beforeblur":case"afterblur":h=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=FC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=tE;break;case lw:case aw:case uw:h=VC;break;case cw:h=rE;break;case"scroll":h=$C;break;case"wheel":h=sE;break;case"copy":case"cut":case"paste":h=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Hg}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,x;y!==null;){x=y;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,g!==null&&(C=Bl(y,g),C!=null&&m.push(Jl(y,C,x)))),v)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==qf&&(p=n.relatedTarget||n.fromElement)&&(zi(p)||p[fr]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?zi(p):null,p!==null&&(v=ws(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=Ug,C="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=Hg,C="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?f:Us(h),x=p==null?f:Us(p),f=new m(C,y+"leave",h,n,c),f.target=v,f.relatedTarget=x,C=null,zi(c)===u&&(m=new m(g,y+"enter",p,n,c),m.target=x,m.relatedTarget=v,C=m),v=C,h&&p)t:{for(m=h,g=p,y=0,x=m;x;x=Os(x))y++;for(x=0,C=g;C;C=Os(C))x++;for(;0<y-x;)m=Os(m),y--;for(;0<x-y;)g=Os(g),x--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=Os(m),g=Os(g)}m=null}else m=null;h!==null&&ty(d,f,h,m,!1),p!==null&&v!==null&&ty(d,v,p,m,!0)}}e:{if(f=u?Us(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=fE;else if(Kg(f))if(nw)T=gE;else{T=pE;var S=hE}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=mE);if(T&&(T=T(t,u))){tw(d,T,n,c);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Bf(f,"number",f.value)}switch(S=u?Us(u):window,t){case"focusin":(Kg(S)||S.contentEditable==="true")&&(Fs=S,Zf=u,Ol=null);break;case"focusout":Ol=Zf=Fs=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,Xg(d,n,c);break;case"selectionchange":if(wE)break;case"keydown":case"keyup":Xg(d,n,c)}var N;if(qp)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else zs?Z1(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(X1&&n.locale!=="ko"&&(zs||O!=="onCompositionStart"?O==="onCompositionEnd"&&zs&&(N=Y1()):(Jr=c,Vp="value"in Jr?Jr.value:Jr.textContent,zs=!0)),S=Ku(u,O),0<S.length&&(O=new Vg(O,t,null,n,c),d.push({event:O,listeners:S}),N?O.data=N:(N=ew(n),N!==null&&(O.data=N)))),(N=lE?aE(t,n):uE(t,n))&&(u=Ku(u,"onBeforeInput"),0<u.length&&(c=new Vg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=N))}fw(d,e)})}function Jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bl(t,n),s!=null&&r.unshift(Jl(t,s,i)),s=Bl(t,e),s!=null&&r.push(Jl(t,s,i))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ty(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Bl(n,s),a!=null&&o.unshift(Jl(n,a,l))):i||(a=Bl(n,s),a!=null&&o.push(Jl(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bE=/\r\n?/g,CE=/\u0000|\uFFFD/g;function ny(t){return(typeof t=="string"?t:""+t).replace(bE,`
`).replace(CE,"")}function Ya(t,e,n){if(e=ny(e),ny(t)!==e&&n)throw Error(D(425))}function Ju(){}var th=null,nh=null;function rh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,EE=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,_E=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(t){return ry.resolve(null).then(t).catch(TE)}:ih;function TE(t){setTimeout(function(){throw t})}function Hd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hl(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ho,Ql="__reactProps$"+Ho,fr="__reactContainer$"+Ho,sh="__reactEvents$"+Ho,OE="__reactListeners$"+Ho,ME="__reactHandles$"+Ho;function zi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iy(t);t!==null;){if(n=t[Hn])return n;t=iy(t)}return e}t=n,n=t.parentNode}return null}function ba(t){return t=t[Hn]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Uc(t){return t[Ql]||null}var oh=[],Vs=-1;function wi(t){return{current:t}}function Ee(t){0>Vs||(t.current=oh[Vs],oh[Vs]=null,Vs--)}function Se(t,e){Vs++,oh[Vs]=t.current,t.current=e}var mi={},yt=wi(mi),$t=wi(!1),as=mi;function _o(t,e){var n=t.type.contextTypes;if(!n)return mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function Qu(){Ee($t),Ee(yt)}function sy(t,e,n){if(yt.current!==mi)throw Error(D(168));Se(yt,e),Se($t,n)}function pw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,hC(t)||"Unknown",i));return Ne({},n,r)}function Gu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,as=yt.current,Se(yt,t),Se($t,$t.current),!0}function oy(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=pw(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,Ee($t),Ee(yt),Se(yt,t)):Ee($t),Se($t,n)}var sr=null,Vc=!1,Wd=!1;function mw(t){sr===null?sr=[t]:sr.push(t)}function NE(t){Vc=!0,mw(t)}function xi(){if(!Wd&&sr!==null){Wd=!0;var t=0,e=ge;try{var n=sr;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,Vc=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),F1(zp,xi),i}finally{ge=e,Wd=!1}}return null}var Hs=[],Ws=0,Yu=null,Xu=0,an=[],un=0,us=null,or=1,lr="";function Pi(t,e){Hs[Ws++]=Xu,Hs[Ws++]=Yu,Yu=t,Xu=e}function gw(t,e,n){an[un++]=or,an[un++]=lr,an[un++]=us,us=t;var r=or;t=lr;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,or=1<<32-Nn(e)+i|n<<i|r,lr=s+t}else or=1<<s|n<<i|r,lr=t}function Jp(t){t.return!==null&&(Pi(t,1),gw(t,1,0))}function Qp(t){for(;t===Yu;)Yu=Hs[--Ws],Hs[Ws]=null,Xu=Hs[--Ws],Hs[Ws]=null;for(;t===us;)us=an[--un],an[un]=null,lr=an[--un],an[un]=null,or=an[--un],an[un]=null}var Xt=null,Qt=null,Te=!1,_n=null;function yw(t,e){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:or,overflow:lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Qt=null,!0):!1;default:return!1}}function lh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ah(t){if(Te){var e=Qt;if(e){var n=e;if(!ly(t,e)){if(lh(t))throw Error(D(418));e=ri(n.nextSibling);var r=Xt;e&&ly(t,e)?yw(r,n):(t.flags=t.flags&-4097|2,Te=!1,Xt=t)}}else{if(lh(t))throw Error(D(418));t.flags=t.flags&-4097|2,Te=!1,Xt=t}}}function ay(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Xa(t){if(t!==Xt)return!1;if(!Te)return ay(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rh(t.type,t.memoizedProps)),e&&(e=Qt)){if(lh(t))throw vw(),Error(D(418));for(;e;)yw(t,e),e=ri(e.nextSibling)}if(ay(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Xt?ri(t.stateNode.nextSibling):null;return!0}function vw(){for(var t=Qt;t;)t=ri(t.nextSibling)}function To(){Qt=Xt=null,Te=!1}function Gp(t){_n===null?_n=[t]:_n.push(t)}var PE=vr.ReactCurrentBatchConfig;function sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function ww(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=li(g,y),g.index=0,g.sibling=null,g}function s(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,x,C){return y===null||y.tag!==6?(y=Xd(x,g.mode,C),y.return=g,y):(y=i(y,x),y.return=g,y)}function a(g,y,x,C){var T=x.type;return T===$s?c(g,y,x.props.children,C,x.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Nr&&uy(T)===y.type)?(C=i(y,x.props),C.ref=sl(g,y,x),C.return=g,C):(C=Nu(x.type,x.key,x.props,null,g.mode,C),C.ref=sl(g,y,x),C.return=g,C)}function u(g,y,x,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Zd(x,g.mode,C),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function c(g,y,x,C,T){return y===null||y.tag!==7?(y=ts(x,g.mode,C,T),y.return=g,y):(y=i(y,x),y.return=g,y)}function d(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xd(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ua:return x=Nu(y.type,y.key,y.props,null,g.mode,x),x.ref=sl(g,null,y),x.return=g,x;case Ls:return y=Zd(y,g.mode,x),y.return=g,y;case Nr:var C=y._init;return d(g,C(y._payload),x)}if(ml(y)||el(y))return y=ts(y,g.mode,x,null),y.return=g,y;Za(g,y)}return null}function f(g,y,x,C){var T=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:l(g,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ua:return x.key===T?a(g,y,x,C):null;case Ls:return x.key===T?u(g,y,x,C):null;case Nr:return T=x._init,f(g,y,T(x._payload),C)}if(ml(x)||el(x))return T!==null?null:c(g,y,x,C,null);Za(g,x)}return null}function h(g,y,x,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(x)||null,l(y,g,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ua:return g=g.get(C.key===null?x:C.key)||null,a(y,g,C,T);case Ls:return g=g.get(C.key===null?x:C.key)||null,u(y,g,C,T);case Nr:var S=C._init;return h(g,y,x,S(C._payload),T)}if(ml(C)||el(C))return g=g.get(x)||null,c(y,g,C,T,null);Za(y,C)}return null}function p(g,y,x,C){for(var T=null,S=null,N=y,O=y=0,P=null;N!==null&&O<x.length;O++){N.index>O?(P=N,N=null):P=N.sibling;var I=f(g,N,x[O],C);if(I===null){N===null&&(N=P);break}t&&N&&I.alternate===null&&e(g,N),y=s(I,y,O),S===null?T=I:S.sibling=I,S=I,N=P}if(O===x.length)return n(g,N),Te&&Pi(g,O),T;if(N===null){for(;O<x.length;O++)N=d(g,x[O],C),N!==null&&(y=s(N,y,O),S===null?T=N:S.sibling=N,S=N);return Te&&Pi(g,O),T}for(N=r(g,N);O<x.length;O++)P=h(N,g,O,x[O],C),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?O:P.key),y=s(P,y,O),S===null?T=P:S.sibling=P,S=P);return t&&N.forEach(function(ee){return e(g,ee)}),Te&&Pi(g,O),T}function m(g,y,x,C){var T=el(x);if(typeof T!="function")throw Error(D(150));if(x=T.call(x),x==null)throw Error(D(151));for(var S=T=null,N=y,O=y=0,P=null,I=x.next();N!==null&&!I.done;O++,I=x.next()){N.index>O?(P=N,N=null):P=N.sibling;var ee=f(g,N,I.value,C);if(ee===null){N===null&&(N=P);break}t&&N&&ee.alternate===null&&e(g,N),y=s(ee,y,O),S===null?T=ee:S.sibling=ee,S=ee,N=P}if(I.done)return n(g,N),Te&&Pi(g,O),T;if(N===null){for(;!I.done;O++,I=x.next())I=d(g,I.value,C),I!==null&&(y=s(I,y,O),S===null?T=I:S.sibling=I,S=I);return Te&&Pi(g,O),T}for(N=r(g,N);!I.done;O++,I=x.next())I=h(N,g,O,I.value,C),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?O:I.key),y=s(I,y,O),S===null?T=I:S.sibling=I,S=I);return t&&N.forEach(function(pe){return e(g,pe)}),Te&&Pi(g,O),T}function v(g,y,x,C){if(typeof x=="object"&&x!==null&&x.type===$s&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ua:e:{for(var T=x.key,S=y;S!==null;){if(S.key===T){if(T=x.type,T===$s){if(S.tag===7){n(g,S.sibling),y=i(S,x.props.children),y.return=g,g=y;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Nr&&uy(T)===S.type){n(g,S.sibling),y=i(S,x.props),y.ref=sl(g,S,x),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}x.type===$s?(y=ts(x.props.children,g.mode,C,x.key),y.return=g,g=y):(C=Nu(x.type,x.key,x.props,null,g.mode,C),C.ref=sl(g,y,x),C.return=g,g=C)}return o(g);case Ls:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=Zd(x,g.mode,C),y.return=g,g=y}return o(g);case Nr:return S=x._init,v(g,y,S(x._payload),C)}if(ml(x))return p(g,y,x,C);if(el(x))return m(g,y,x,C);Za(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,x),y.return=g,g=y):(n(g,y),y=Xd(x,g.mode,C),y.return=g,g=y),o(g)):n(g,y)}return v}var Oo=ww(!0),xw=ww(!1),Zu=wi(null),ec=null,qs=null,Yp=null;function Xp(){Yp=qs=ec=null}function Zp(t){var e=Zu.current;Ee(Zu),t._currentValue=e}function uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function to(t,e){ec=t,Yp=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Yp!==t)if(t={context:t,memoizedValue:e,next:null},qs===null){if(ec===null)throw Error(D(308));qs=t,ec.dependencies={lanes:0,firstContext:t}}else qs=qs.next=t;return e}var Fi=null;function em(t){Fi===null?Fi=[t]:Fi.push(t)}function Sw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,em(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,em(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function Cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fp(t,n)}}function cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tc(t,e,n,r){var i=t.updateQueue;Pr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,c=u=a=null,l=s;do{var f=l.lane,h=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,m=l;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ne({},d,f);break e;case 2:Pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=h,a=d):c=c.next=h,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=d}}function dy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var Ca={},Kn=wi(Ca),Gl=wi(Ca),Yl=wi(Ca);function Bi(t){if(t===Ca)throw Error(D(174));return t}function nm(t,e){switch(Se(Yl,e),Se(Gl,t),Se(Kn,Ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}Ee(Kn),Se(Kn,e)}function Mo(){Ee(Kn),Ee(Gl),Ee(Yl)}function bw(t){Bi(Yl.current);var e=Bi(Kn.current),n=Vf(e,t.type);e!==n&&(Se(Gl,t),Se(Kn,n))}function rm(t){Gl.current===t&&(Ee(Kn),Ee(Gl))}var Oe=wi(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qd=[];function im(){for(var t=0;t<qd.length;t++)qd[t]._workInProgressVersionPrimary=null;qd.length=0}var Eu=vr.ReactCurrentDispatcher,Kd=vr.ReactCurrentBatchConfig,cs=0,Me=null,qe=null,Ge=null,rc=!1,Ml=!1,Xl=0,RE=0;function dt(){throw Error(D(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function om(t,e,n,r,i,s){if(cs=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eu.current=t===null||t.memoizedState===null?jE:LE,t=n(r,i),Ml){s=0;do{if(Ml=!1,Xl=0,25<=s)throw Error(D(301));s+=1,Ge=qe=null,e.updateQueue=null,Eu.current=$E,t=n(r,i)}while(Ml)}if(Eu.current=ic,e=qe!==null&&qe.next!==null,cs=0,Ge=qe=Me=null,rc=!1,e)throw Error(D(300));return t}function lm(){var t=Xl!==0;return Xl=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Me.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function yn(){if(qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ge===null?Me.memoizedState:Ge.next;if(e!==null)Ge=e,qe=t;else{if(t===null)throw Error(D(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ge===null?Me.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Zl(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=yn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((cs&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Me.lanes|=c,ds|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,An(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qd(t){var e=yn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Cw(){}function Ew(t,e){var n=Me,r=yn(),i=e(),s=!An(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,am(Ow.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,ea(9,Tw.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error(D(349));cs&30||_w(n,e,i)}return i}function _w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tw(t,e,n,r){e.value=n,e.getSnapshot=r,Mw(e)&&Nw(t)}function Ow(t,e,n){return n(function(){Mw(e)&&Nw(t)})}function Mw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function Nw(t){var e=hr(t,1);e!==null&&Pn(e,t,1,-1)}function fy(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:t},e.queue=t,t=t.dispatch=IE.bind(null,Me,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Pw(){return yn().memoizedState}function _u(t,e,n,r){var i=$n();Me.flags|=t,i.memoizedState=ea(1|e,n,void 0,r===void 0?null:r)}function Hc(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(qe!==null){var o=qe.memoizedState;if(s=o.destroy,r!==null&&sm(r,o.deps)){i.memoizedState=ea(e,n,s,r);return}}Me.flags|=t,i.memoizedState=ea(1|e,n,s,r)}function hy(t,e){return _u(8390656,8,t,e)}function am(t,e){return Hc(2048,8,t,e)}function Rw(t,e){return Hc(4,2,t,e)}function Aw(t,e){return Hc(4,4,t,e)}function Dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Iw(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4,4,Dw.bind(null,e,t),n)}function um(){}function jw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lw(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $w(t,e,n){return cs&21?(An(n,e)||(n=V1(),Me.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function AE(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Kd.transition;Kd.transition={};try{t(!1),e()}finally{ge=n,Kd.transition=r}}function zw(){return yn().memoizedState}function DE(t,e,n){var r=oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fw(t))Bw(e,n);else if(n=Sw(t,e,n,r),n!==null){var i=Ct();Pn(n,t,r,i),Uw(n,e,r)}}function IE(t,e,n){var r=oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fw(t))Bw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,An(l,o)){var a=e.interleaved;a===null?(i.next=i,em(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Sw(t,e,i,r),n!==null&&(i=Ct(),Pn(n,t,r,i),Uw(n,e,r))}}function Fw(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Bw(t,e){Ml=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fp(t,n)}}var ic={readContext:gn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},jE={readContext:gn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:hy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,Dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DE.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:fy,useDebugValue:um,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=fy(!1),e=t[0];return t=AE.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=$n();if(Te){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Xe===null)throw Error(D(349));cs&30||_w(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hy(Ow.bind(null,r,s,t),[t]),r.flags|=2048,ea(9,Tw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$n(),e=Xe.identifierPrefix;if(Te){var n=lr,r=or;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LE={readContext:gn,useCallback:jw,useContext:gn,useEffect:am,useImperativeHandle:Iw,useInsertionEffect:Rw,useLayoutEffect:Aw,useMemo:Lw,useReducer:Jd,useRef:Pw,useState:function(){return Jd(Zl)},useDebugValue:um,useDeferredValue:function(t){var e=yn();return $w(e,qe.memoizedState,t)},useTransition:function(){var t=Jd(Zl)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Ew,useId:zw,unstable_isNewReconciler:!1},$E={readContext:gn,useCallback:jw,useContext:gn,useEffect:am,useImperativeHandle:Iw,useInsertionEffect:Rw,useLayoutEffect:Aw,useMemo:Lw,useReducer:Qd,useRef:Pw,useState:function(){return Qd(Zl)},useDebugValue:um,useDeferredValue:function(t){var e=yn();return qe===null?e.memoizedState=t:$w(e,qe.memoizedState,t)},useTransition:function(){var t=Qd(Zl)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:Ew,useId:zw,unstable_isNewReconciler:!1};function Sn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ch(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wc={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=oi(t),s=ar(r,i);s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Pn(e,t,i,r),Cu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=oi(t),s=ar(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Pn(e,t,i,r),Cu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=oi(t),i=ar(n,r);i.tag=2,e!=null&&(i.callback=e),e=ii(t,i,r),e!==null&&(Pn(e,t,r,n),Cu(e,t,r))}};function py(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ql(n,r)||!ql(i,s):!0}function Vw(t,e,n){var r=!1,i=mi,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=zt(e)?as:yt.current,r=e.contextTypes,s=(r=r!=null)?_o(t,i):mi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function my(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function dh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=zt(e)?as:yt.current,i.context=_o(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ch(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wc.enqueueReplaceState(i,i.state,null),tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function No(t,e){try{var n="",r=e;do n+=fC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zE=typeof WeakMap=="function"?WeakMap:Map;function Hw(t,e,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oc||(oc=!0,kh=r),fh(t,e)},n}function Ww(t,e,n){n=ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fh(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ZE.bind(null,t,e,n),e.then(t,t))}function yy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ar(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var FE=vr.ReactCurrentOwner,Lt=!1;function bt(t,e,n,r){e.child=t===null?xw(e,null,n,r):Oo(e,t.child,n,r)}function wy(t,e,n,r,i){n=n.render;var s=e.ref;return to(e,i),r=om(t,e,n,r,s,i),n=lm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pr(t,e,i)):(Te&&n&&Jp(e),e.flags|=1,bt(t,e,r,i),e.child)}function xy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ym(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qw(t,e,s,r,i)):(t=Nu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ql,n(o,r)&&t.ref===e.ref)return pr(t,e,i)}return e.flags|=1,t=li(s,r),t.ref=e.ref,t.return=e,e.child=t}function qw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ql(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,pr(t,e,i)}return hh(t,e,n,r,i)}function Kw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Js,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Js,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Js,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Js,qt),qt|=r;return bt(t,e,i,n),e.child}function Jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hh(t,e,n,r,i){var s=zt(n)?as:yt.current;return s=_o(e,s),to(e,i),n=om(t,e,n,r,s,i),r=lm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pr(t,e,i)):(Te&&r&&Jp(e),e.flags|=1,bt(t,e,n,i),e.child)}function Sy(t,e,n,r,i){if(zt(n)){var s=!0;Gu(e)}else s=!1;if(to(e,i),e.stateNode===null)Tu(t,e),Vw(e,n,r),dh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gn(u):(u=zt(n)?as:yt.current,u=_o(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&my(e,o,r,u),Pr=!1;var f=e.memoizedState;o.state=f,tc(e,r,o,i),a=e.memoizedState,l!==r||f!==a||$t.current||Pr?(typeof c=="function"&&(ch(e,n,c,r),a=e.memoizedState),(l=Pr||py(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Sn(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=gn(a):(a=zt(n)?as:yt.current,a=_o(e,a));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&my(e,o,r,a),Pr=!1,f=e.memoizedState,o.state=f,tc(e,r,o,i);var p=e.memoizedState;l!==d||f!==p||$t.current||Pr?(typeof h=="function"&&(ch(e,n,h,r),p=e.memoizedState),(u=Pr||py(e,n,u,r,f,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ph(t,e,n,r,s,i)}function ph(t,e,n,r,i,s){Jw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&oy(e,n,!1),pr(t,e,s);r=e.stateNode,FE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,s),e.child=Oo(e,null,l,s)):bt(t,e,l,s),e.memoizedState=r.state,i&&oy(e,n,!0),e.child}function Qw(t){var e=t.stateNode;e.pendingContext?sy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sy(t,e.context,!1),nm(t,e.containerInfo)}function ky(t,e,n,r,i){return To(),Gp(i),e.flags|=256,bt(t,e,n,r),e.child}var mh={dehydrated:null,treeContext:null,retryLane:0};function gh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gw(t,e,n){var r=e.pendingProps,i=Oe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Oe,i&1),t===null)return ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jc(o,r,0,null),t=ts(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gh(n),e.memoizedState=mh,t):cm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return BE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=li(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=li(l,s):(s=ts(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?gh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=mh,r}return s=t.child,t=s.sibling,r=li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cm(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eu(t,e,n,r){return r!==null&&Gp(r),Oo(e,t.child,null,n),t=cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Gd(Error(D(422))),eu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jc({mode:"visible",children:r.children},i,0,null),s=ts(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=gh(o),e.memoizedState=mh,s);if(!(e.mode&1))return eu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(D(419)),r=Gd(s,r,void 0),eu(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=Xe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(t,i),Pn(r,t,i,-1))}return gm(),r=Gd(Error(D(421))),eu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=e_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qt=ri(i.nextSibling),Xt=e,Te=!0,_n=null,t!==null&&(an[un++]=or,an[un++]=lr,an[un++]=us,or=t.id,lr=t.overflow,us=e),e=cm(e,r.children),e.flags|=4096,e)}function by(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uh(t.return,e,n)}function Yd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(bt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,n,e);else if(t.tag===19)by(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yd(e,!0,n,null,s);break;case"together":Yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UE(t,e,n){switch(e.tag){case 3:Qw(e),To();break;case 5:bw(e);break;case 1:zt(e.type)&&Gu(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Zu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?Gw(t,e,n):(Se(Oe,Oe.current&1),t=pr(t,e,n),t!==null?t.sibling:null);Se(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Kw(t,e,n)}return pr(t,e,n)}var Xw,yh,Zw,ex;Xw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yh=function(){};Zw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bi(Kn.current);var s=null;switch(n){case"input":i=zf(t,i),r=zf(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=Uf(t,i),r=Uf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ju)}Hf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zl.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&be("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ex=function(t,e,n,r){n!==r&&(e.flags|=4)};function ol(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VE(t,e,n){var r=e.pendingProps;switch(Qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return zt(e.type)&&Qu(),ft(e),null;case 3:return r=e.stateNode,Mo(),Ee($t),Ee(yt),im(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Eh(_n),_n=null))),yh(t,e),ft(e),null;case 5:rm(e);var i=Bi(Yl.current);if(n=e.type,t!==null&&e.stateNode!=null)Zw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return ft(e),null}if(t=Bi(Kn.current),Xa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Ql]=s,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(i=0;i<yl.length;i++)be(yl[i],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Rg(r,s),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},be("invalid",r);break;case"textarea":Dg(r,s),be("invalid",r)}Hf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),i=["children",""+l]):zl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Va(r),Ag(r,s,!0);break;case"textarea":Va(r),Ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ju)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=O1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[Ql]=r,Xw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wf(n,r),n){case"dialog":be("cancel",t),be("close",t),i=r;break;case"iframe":case"object":case"embed":be("load",t),i=r;break;case"video":case"audio":for(i=0;i<yl.length;i++)be(yl[i],t);i=r;break;case"source":be("error",t),i=r;break;case"img":case"image":case"link":be("error",t),be("load",t),i=r;break;case"details":be("toggle",t),i=r;break;case"input":Rg(t,r),i=zf(t,r),be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),be("invalid",t);break;case"textarea":Dg(t,r),i=Uf(t,r),be("invalid",t);break;default:i=r}Hf(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?P1(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&M1(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Fl(t,a):typeof a=="number"&&Fl(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zl.hasOwnProperty(s)?a!=null&&s==="onScroll"&&be("scroll",t):a!=null&&Dp(t,s,a,o))}switch(n){case"input":Va(t),Ag(t,r,!1);break;case"textarea":Va(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ys(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)ex(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Bi(Yl.current),Bi(Kn.current),Xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Ya(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ya(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return ft(e),null;case 13:if(Ee(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Qt!==null&&e.mode&1&&!(e.flags&128))vw(),To(),e.flags|=98560,s=!1;else if(s=Xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Hn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),s=!1}else _n!==null&&(Eh(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Je===0&&(Je=3):gm())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Mo(),yh(t,e),t===null&&Kl(e.stateNode.containerInfo),ft(e),null;case 10:return Zp(e.type._context),ft(e),null;case 17:return zt(e.type)&&Qu(),ft(e),null;case 19:if(Ee(Oe),s=e.memoizedState,s===null)return ft(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ol(s,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,ol(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Oe,Oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Po&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304)}else{if(!r)if(t=nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ol(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return ft(e),null}else 2*Le()-s.renderingStartTime>Po&&n!==1073741824&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Oe.current,Se(Oe,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return mm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function HE(t,e){switch(Qp(e),e.tag){case 1:return zt(e.type)&&Qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mo(),Ee($t),Ee(yt),im(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rm(e),null;case 13:if(Ee(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Oe),null;case 4:return Mo(),null;case 10:return Zp(e.type._context),null;case 22:case 23:return mm(),null;case 24:return null;default:return null}}var tu=!1,mt=!1,WE=typeof WeakSet=="function"?WeakSet:Set,z=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function vh(t,e,n){try{n()}catch(r){De(t,e,r)}}var Cy=!1;function qE(t,e){if(th=Wu,t=sw(),Kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++c===r&&(a=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:t,selectionRange:n},Wu=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Sn(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){De(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return p=Cy,Cy=!1,p}function Nl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&vh(e,n,s)}i=i.next}while(i!==r)}}function qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tx(t){var e=t.alternate;e!==null&&(t.alternate=null,tx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Ql],delete e[sh],delete e[OE],delete e[ME])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nx(t){return t.tag===5||t.tag===3||t.tag===4}function Ey(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(r!==4&&(t=t.child,t!==null))for(xh(t,e,n),t=t.sibling;t!==null;)xh(t,e,n),t=t.sibling}function Sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sh(t,e,n),t=t.sibling;t!==null;)Sh(t,e,n),t=t.sibling}var st=null,bn=!1;function Cr(t,e,n){for(n=n.child;n!==null;)rx(t,e,n),n=n.sibling}function rx(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount($c,n)}catch{}switch(n.tag){case 5:mt||Ks(n,e);case 6:var r=st,i=bn;st=null,Cr(t,e,n),st=r,bn=i,st!==null&&(bn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(bn?(t=st,n=n.stateNode,t.nodeType===8?Hd(t.parentNode,n):t.nodeType===1&&Hd(t,n),Hl(t)):Hd(st,n.stateNode));break;case 4:r=st,i=bn,st=n.stateNode.containerInfo,bn=!0,Cr(t,e,n),st=r,bn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vh(n,e,o),i=i.next}while(i!==r)}Cr(t,e,n);break;case 1:if(!mt&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Cr(t,e,n),mt=r):Cr(t,e,n);break;default:Cr(t,e,n)}}function _y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WE),e.forEach(function(r){var i=t_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,bn=!1;break e;case 3:st=l.stateNode.containerInfo,bn=!0;break e;case 4:st=l.stateNode.containerInfo,bn=!0;break e}l=l.return}if(st===null)throw Error(D(160));rx(s,o,i),st=null,bn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ix(e,t),e=e.sibling}function ix(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),Ln(t),r&4){try{Nl(3,t,t.return),qc(3,t)}catch(m){De(t,t.return,m)}try{Nl(5,t,t.return)}catch(m){De(t,t.return,m)}}break;case 1:wn(e,t),Ln(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(wn(e,t),Ln(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var i=t.stateNode;try{Fl(i,"")}catch(m){De(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_1(i,s),Wf(l,o);var u=Wf(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?P1(i,d):c==="dangerouslySetInnerHTML"?M1(i,d):c==="children"?Fl(i,d):Dp(i,c,d,u)}switch(l){case"input":Ff(i,s);break;case"textarea":T1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ys(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ys(i,!!s.multiple,s.defaultValue,!0):Ys(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ql]=s}catch(m){De(t,t.return,m)}}break;case 6:if(wn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){De(t,t.return,m)}}break;case 3:if(wn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(e.containerInfo)}catch(m){De(t,t.return,m)}break;case 4:wn(e,t),Ln(t);break;case 13:wn(e,t),Ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hm=Le())),r&4&&_y(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||c,wn(e,t),mt=u):wn(e,t),Ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(z=t,c=t.child;c!==null;){for(d=z=c;z!==null;){switch(f=z,h=f.child,f.tag){case 0:case 11:case 14:case 15:Nl(4,f,f.return);break;case 1:Ks(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){De(r,n,m)}}break;case 5:Ks(f,f.return);break;case 22:if(f.memoizedState!==null){Oy(d);continue}}h!==null?(h.return=f,z=h):Oy(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=N1("display",o))}catch(m){De(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){De(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wn(e,t),Ln(t),r&4&&_y(t);break;case 21:break;default:wn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nx(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fl(i,""),r.flags&=-33);var s=Ey(t);Sh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ey(t);xh(t,l,o);break;default:throw Error(D(161))}}catch(a){De(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KE(t,e,n){z=t,sx(t)}function sx(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tu;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||mt;l=tu;var u=mt;if(tu=o,(mt=a)&&!u)for(z=i;z!==null;)o=z,a=o.child,o.tag===22&&o.memoizedState!==null?My(i):a!==null?(a.return=o,z=a):My(i);for(;s!==null;)z=s,sx(s),s=s.sibling;z=i,tu=l,mt=u}Ty(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):Ty(t)}}function Ty(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Hl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}mt||e.flags&512&&wh(e)}catch(f){De(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Oy(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function My(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qc(4,e)}catch(a){De(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){De(e,i,a)}}var s=e.return;try{wh(e)}catch(a){De(e,s,a)}break;case 5:var o=e.return;try{wh(e)}catch(a){De(e,o,a)}}}catch(a){De(e,e.return,a)}if(e===t){z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,z=l;break}z=e.return}}var JE=Math.ceil,sc=vr.ReactCurrentDispatcher,dm=vr.ReactCurrentOwner,hn=vr.ReactCurrentBatchConfig,ce=0,Xe=null,Ve=null,ut=0,qt=0,Js=wi(0),Je=0,ta=null,ds=0,Kc=0,fm=0,Pl=null,It=null,hm=0,Po=1/0,rr=null,oc=!1,kh=null,si=null,nu=!1,Qr=null,lc=0,Rl=0,bh=null,Ou=-1,Mu=0;function Ct(){return ce&6?Le():Ou!==-1?Ou:Ou=Le()}function oi(t){return t.mode&1?ce&2&&ut!==0?ut&-ut:PE.transition!==null?(Mu===0&&(Mu=V1()),Mu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:G1(t.type)),t):1}function Pn(t,e,n,r){if(50<Rl)throw Rl=0,bh=null,Error(D(185));Sa(t,n,r),(!(ce&2)||t!==Xe)&&(t===Xe&&(!(ce&2)&&(Kc|=n),Je===4&&jr(t,ut)),Ft(t,r),n===1&&ce===0&&!(e.mode&1)&&(Po=Le()+500,Vc&&xi()))}function Ft(t,e){var n=t.callbackNode;PC(t,e);var r=Hu(t,t===Xe?ut:0);if(r===0)n!==null&&$g(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$g(n),e===1)t.tag===0?NE(Ny.bind(null,t)):mw(Ny.bind(null,t)),_E(function(){!(ce&6)&&xi()}),n=null;else{switch(H1(r)){case 1:n=zp;break;case 4:n=B1;break;case 16:n=Vu;break;case 536870912:n=U1;break;default:n=Vu}n=hx(n,ox.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ox(t,e){if(Ou=-1,Mu=0,ce&6)throw Error(D(327));var n=t.callbackNode;if(no()&&t.callbackNode!==n)return null;var r=Hu(t,t===Xe?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var i=ce;ce|=2;var s=ax();(Xe!==t||ut!==e)&&(rr=null,Po=Le()+500,es(t,e));do try{YE();break}catch(l){lx(t,l)}while(!0);Xp(),sc.current=s,ce=i,Ve!==null?e=0:(Xe=null,ut=0,e=Je)}if(e!==0){if(e===2&&(i=Gf(t),i!==0&&(r=i,e=Ch(t,i))),e===1)throw n=ta,es(t,0),jr(t,r),Ft(t,Le()),n;if(e===6)jr(t,r);else{if(i=t.current.alternate,!(r&30)&&!QE(i)&&(e=ac(t,r),e===2&&(s=Gf(t),s!==0&&(r=s,e=Ch(t,s))),e===1))throw n=ta,es(t,0),jr(t,r),Ft(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Ri(t,It,rr);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=hm+500-Le(),10<e)){if(Hu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ih(Ri.bind(null,t,It,rr),e);break}Ri(t,It,rr);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JE(r/1960))-r,10<r){t.timeoutHandle=ih(Ri.bind(null,t,It,rr),r);break}Ri(t,It,rr);break;case 5:Ri(t,It,rr);break;default:throw Error(D(329))}}}return Ft(t,Le()),t.callbackNode===n?ox.bind(null,t):null}function Ch(t,e){var n=Pl;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=ac(t,e),t!==2&&(e=It,It=n,e!==null&&Eh(e)),t}function Eh(t){It===null?It=t:It.push.apply(It,t)}function QE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!An(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~fm,e&=~Kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function Ny(t){if(ce&6)throw Error(D(327));no();var e=Hu(t,0);if(!(e&1))return Ft(t,Le()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=Gf(t);r!==0&&(e=r,n=Ch(t,r))}if(n===1)throw n=ta,es(t,0),jr(t,e),Ft(t,Le()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,It,rr),Ft(t,Le()),null}function pm(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Po=Le()+500,Vc&&xi())}}function fs(t){Qr!==null&&Qr.tag===0&&!(ce&6)&&no();var e=ce;ce|=1;var n=hn.transition,r=ge;try{if(hn.transition=null,ge=1,t)return t()}finally{ge=r,hn.transition=n,ce=e,!(ce&6)&&xi()}}function mm(){qt=Js.current,Ee(Js)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EE(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Qp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qu();break;case 3:Mo(),Ee($t),Ee(yt),im();break;case 5:rm(r);break;case 4:Mo();break;case 13:Ee(Oe);break;case 19:Ee(Oe);break;case 10:Zp(r.type._context);break;case 22:case 23:mm()}n=n.return}if(Xe=t,Ve=t=li(t.current,null),ut=qt=e,Je=0,ta=null,fm=Kc=ds=0,It=Pl=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fi=null}return t}function lx(t,e){do{var n=Ve;try{if(Xp(),Eu.current=ic,rc){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rc=!1}if(cs=0,Ge=qe=Me=null,Ml=!1,Xl=0,dm.current=null,n===null||n.return===null){Je=1,ta=e,Ve=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ut,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=yy(o);if(h!==null){h.flags&=-257,vy(h,o,l,s,e),h.mode&1&&gy(s,u,e),e=h,a=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(a),e.updateQueue=m}else p.add(a);break e}else{if(!(e&1)){gy(s,u,e),gm();break e}a=Error(D(426))}}else if(Te&&l.mode&1){var v=yy(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),vy(v,o,l,s,e),Gp(No(a,l));break e}}s=a=No(a,l),Je!==4&&(Je=2),Pl===null?Pl=[s]:Pl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Hw(s,a,e);cy(s,g);break e;case 1:l=a;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(si===null||!si.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Ww(s,l,e);cy(s,C);break e}}s=s.return}while(s!==null)}cx(n)}catch(T){e=T,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function ax(){var t=sc.current;return sc.current=ic,t===null?ic:t}function gm(){(Je===0||Je===3||Je===2)&&(Je=4),Xe===null||!(ds&268435455)&&!(Kc&268435455)||jr(Xe,ut)}function ac(t,e){var n=ce;ce|=2;var r=ax();(Xe!==t||ut!==e)&&(rr=null,es(t,e));do try{GE();break}catch(i){lx(t,i)}while(!0);if(Xp(),ce=n,sc.current=r,Ve!==null)throw Error(D(261));return Xe=null,ut=0,Je}function GE(){for(;Ve!==null;)ux(Ve)}function YE(){for(;Ve!==null&&!kC();)ux(Ve)}function ux(t){var e=fx(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?cx(t):Ve=e,dm.current=null}function cx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HE(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ve=null;return}}else if(n=VE(n,e,qt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Je===0&&(Je=5)}function Ri(t,e,n){var r=ge,i=hn.transition;try{hn.transition=null,ge=1,XE(t,e,n,r)}finally{hn.transition=i,ge=r}return null}function XE(t,e,n,r){do no();while(Qr!==null);if(ce&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RC(t,s),t===Xe&&(Ve=Xe=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nu||(nu=!0,hx(Vu,function(){return no(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=ge;ge=1;var l=ce;ce|=4,dm.current=null,qE(t,n),ix(n,t),vE(nh),Wu=!!th,nh=th=null,t.current=n,KE(n),bC(),ce=l,ge=o,hn.transition=s}else t.current=n;if(nu&&(nu=!1,Qr=t,lc=i),s=t.pendingLanes,s===0&&(si=null),_C(n.stateNode),Ft(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oc)throw oc=!1,t=kh,kh=null,t;return lc&1&&t.tag!==0&&no(),s=t.pendingLanes,s&1?t===bh?Rl++:(Rl=0,bh=t):Rl=0,xi(),null}function no(){if(Qr!==null){var t=H1(lc),e=hn.transition,n=ge;try{if(hn.transition=null,ge=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,lc=0,ce&6)throw Error(D(331));var i=ce;for(ce|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(z=u;z!==null;){var c=z;switch(c.tag){case 0:case 11:case 15:Nl(8,c,s)}var d=c.child;if(d!==null)d.return=c,z=d;else for(;z!==null;){c=z;var f=c.sibling,h=c.return;if(tx(c),c===u){z=null;break}if(f!==null){f.return=h,z=f;break}z=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nl(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,z=g;break e}z=s.return}}var y=t.current;for(z=y;z!==null;){o=z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,z=x;else e:for(o=y;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qc(9,l)}}catch(T){De(l,l.return,T)}if(l===o){z=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,z=C;break e}z=l.return}}if(ce=i,xi(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot($c,t)}catch{}r=!0}return r}finally{ge=n,hn.transition=e}}return!1}function Py(t,e,n){e=No(n,e),e=Hw(t,e,1),t=ii(t,e,1),e=Ct(),t!==null&&(Sa(t,1,e),Ft(t,e))}function De(t,e,n){if(t.tag===3)Py(t,t,n);else for(;e!==null;){if(e.tag===3){Py(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=No(n,t),t=Ww(e,t,1),e=ii(e,t,1),t=Ct(),e!==null&&(Sa(e,1,t),Ft(e,t));break}}e=e.return}}function ZE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(ut&n)===n&&(Je===4||Je===3&&(ut&130023424)===ut&&500>Le()-hm?es(t,0):fm|=n),Ft(t,e)}function dx(t,e){e===0&&(t.mode&1?(e=qa,qa<<=1,!(qa&130023424)&&(qa=4194304)):e=1);var n=Ct();t=hr(t,e),t!==null&&(Sa(t,e,n),Ft(t,n))}function e_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dx(t,n)}function t_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),dx(t,n)}var fx;fx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,UE(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Te&&e.flags&1048576&&gw(e,Xu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tu(t,e),t=e.pendingProps;var i=_o(e,yt.current);to(e,n),i=om(null,e,r,t,i,n);var s=lm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,Gu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tm(e),i.updater=Wc,e.stateNode=i,i._reactInternals=e,dh(e,r,t,n),e=ph(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Jp(e),bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=r_(r),t=Sn(r,t),i){case 0:e=hh(null,e,r,t,n);break e;case 1:e=Sy(null,e,r,t,n);break e;case 11:e=wy(null,e,r,t,n);break e;case 14:e=xy(null,e,r,Sn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),hh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Sy(t,e,r,i,n);case 3:e:{if(Qw(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kw(t,e),tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=No(Error(D(423)),e),e=ky(t,e,r,n,i);break e}else if(r!==i){i=No(Error(D(424)),e),e=ky(t,e,r,n,i);break e}else for(Qt=ri(e.stateNode.containerInfo.firstChild),Xt=e,Te=!0,_n=null,n=xw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===i){e=pr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return bw(e),t===null&&ah(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,rh(r,i)?o=null:s!==null&&rh(r,s)&&(e.flags|=32),Jw(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&ah(e),null;case 13:return Gw(t,e,n);case 4:return nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),wy(t,e,r,i,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Zu,r._currentValue),r._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===i.children&&!$t.current){e=pr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=ar(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),uh(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),uh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,to(e,n),i=gn(i),r=r(i),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,i=Sn(r,e.pendingProps),i=Sn(r.type,i),xy(t,e,r,i,n);case 15:return qw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Tu(t,e),e.tag=1,zt(r)?(t=!0,Gu(e)):t=!1,to(e,n),Vw(e,r,i),dh(e,r,i,n),ph(null,e,r,!0,t,n);case 19:return Yw(t,e,n);case 22:return Kw(t,e,n)}throw Error(D(156,e.tag))};function hx(t,e){return F1(t,e)}function n_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new n_(t,e,n,r)}function ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r_(t){if(typeof t=="function")return ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jp)return 11;if(t===Lp)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ym(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return ts(n.children,i,s,e);case Ip:o=8,i|=8;break;case If:return t=dn(12,n,e,i|2),t.elementType=If,t.lanes=s,t;case jf:return t=dn(13,n,e,i),t.elementType=jf,t.lanes=s,t;case Lf:return t=dn(19,n,e,i),t.elementType=Lf,t.lanes=s,t;case b1:return Jc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S1:o=10;break e;case k1:o=9;break e;case jp:o=11;break e;case Lp:o=14;break e;case Nr:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ts(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function Jc(t,e,n,r){return t=dn(22,t,r,e),t.elementType=b1,t.lanes=n,t.stateNode={isHidden:!1},t}function Xd(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function Zd(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function i_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vm(t,e,n,r,i,s,o,l,a){return t=new i_(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(s),t}function s_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ls,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function px(t){if(!t)return mi;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(zt(n))return pw(t,n,e)}return e}function mx(t,e,n,r,i,s,o,l,a){return t=vm(n,r,!0,t,i,s,o,l,a),t.context=px(null),n=t.current,r=Ct(),i=oi(n),s=ar(r,i),s.callback=e??null,ii(n,s,i),t.current.lanes=i,Sa(t,i,r),Ft(t,r),t}function Qc(t,e,n,r){var i=e.current,s=Ct(),o=oi(i);return n=px(n),e.context===null?e.context=n:e.pendingContext=n,e=ar(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(i,e,o),t!==null&&(Pn(t,i,o,s),Cu(t,i,o)),o}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ry(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wm(t,e){Ry(t,e),(t=t.alternate)&&Ry(t,e)}function o_(){return null}var gx=typeof reportError=="function"?reportError:function(t){console.error(t)};function xm(t){this._internalRoot=t}Gc.prototype.render=xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Qc(t,e,null,null)};Gc.prototype.unmount=xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Qc(null,t,null,null)}),e[fr]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=K1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&Q1(t)}};function Sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ay(){}function l_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=uc(o);s.call(u)}}var o=mx(e,r,t,0,null,!1,!1,"",Ay);return t._reactRootContainer=o,t[fr]=o.current,Kl(t.nodeType===8?t.parentNode:t),fs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=uc(a);l.call(u)}}var a=vm(t,0,!1,null,null,!1,!1,"",Ay);return t._reactRootContainer=a,t[fr]=a.current,Kl(t.nodeType===8?t.parentNode:t),fs(function(){Qc(e,a,n,r)}),a}function Xc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=uc(o);l.call(a)}}Qc(e,o,t,i)}else o=l_(n,e,t,i,r);return uc(o)}W1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gl(e.pendingLanes);n!==0&&(Fp(e,n|1),Ft(e,Le()),!(ce&6)&&(Po=Le()+500,xi()))}break;case 13:fs(function(){var r=hr(t,1);if(r!==null){var i=Ct();Pn(r,t,1,i)}}),wm(t,1)}};Bp=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Ct();Pn(e,t,134217728,n)}wm(t,134217728)}};q1=function(t){if(t.tag===13){var e=oi(t),n=hr(t,e);if(n!==null){var r=Ct();Pn(n,t,e,r)}wm(t,e)}};K1=function(){return ge};J1=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Kf=function(t,e,n){switch(e){case"input":if(Ff(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Uc(r);if(!i)throw Error(D(90));E1(r),Ff(r,i)}}}break;case"textarea":T1(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};D1=pm;I1=fs;var a_={usingClientEntryPoint:!1,Events:[ba,Us,Uc,R1,A1,pm]},ll={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u_={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$1(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||o_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{$c=ru.inject(u_),qn=ru}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a_;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(e))throw Error(D(200));return s_(t,e,null,n)};en.createRoot=function(t,e){if(!Sm(t))throw Error(D(299));var n=!1,r="",i=gx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vm(t,1,!1,null,null,n,!1,r,i),t[fr]=e.current,Kl(t.nodeType===8?t.parentNode:t),new xm(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=$1(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return fs(t)};en.hydrate=function(t,e,n){if(!Yc(e))throw Error(D(200));return Xc(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Sm(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mx(e,null,t,1,n??null,i,!1,s,o),t[fr]=e.current,Kl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)};en.render=function(t,e,n){if(!Yc(e))throw Error(D(200));return Xc(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(D(40));return t._reactRootContainer?(fs(function(){Xc(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};en.unstable_batchedUpdates=pm;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Xc(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function yx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yx)}catch(t){console.error(t)}}yx(),y1.exports=en;var km=y1.exports;const vx=s1(km),c_=i1({__proto__:null,default:vx},[km]);var wx,Dy=km;wx=Dy.createRoot,Dy.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_e.apply(this,arguments)}var Be;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Be||(Be={}));const Iy="popstate";function d_(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return na("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hs(i)}return h_(e,n,null,t)}function ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ro(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f_(){return Math.random().toString(36).substr(2,8)}function jy(t,e){return{usr:t.state,key:t.key,idx:e}}function na(t,e,n,r){return n===void 0&&(n=null),_e({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Si(e):e,{state:n,key:e&&e.key||r||f_()})}function hs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Si(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h_(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Be.Pop,a=null,u=c();u==null&&(u=0,o.replaceState(_e({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){l=Be.Pop;let v=c(),g=v==null?null:v-u;u=v,a&&a({action:l,location:m.location,delta:g})}function f(v,g){l=Be.Push;let y=na(m.location,v,g);u=c()+1;let x=jy(y,u),C=m.createHref(y);try{o.pushState(x,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(C)}s&&a&&a({action:l,location:m.location,delta:1})}function h(v,g){l=Be.Replace;let y=na(m.location,v,g);u=c();let x=jy(y,u),C=m.createHref(y);o.replaceState(x,"",C),s&&a&&a({action:l,location:m.location,delta:0})}function p(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:hs(v);return y=y.replace(/ $/,"%20"),ie(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return l},get location(){return t(i,o)},listen(v){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Iy,d),a=v,()=>{i.removeEventListener(Iy,d),a=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let g=p(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(v){return o.go(v)}};return m}var ye;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ye||(ye={}));const p_=new Set(["lazy","caseSensitive","path","id","index","children"]);function m_(t){return t.index===!0}function cc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(ie(i.index!==!0||!i.children,"Cannot specify children on an index route"),ie(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),m_(i)){let a=_e({},i,e(i),{id:l});return r[l]=a,a}else{let a=_e({},i,e(i),{id:l,children:void 0});return r[l]=a,i.children&&(a.children=cc(i.children,e,o,r)),a}})}function Di(t,e,n){return n===void 0&&(n="/"),Pu(t,e,n,!1)}function Pu(t,e,n,r){let i=typeof e=="string"?Si(e):e,s=mr(i.pathname||"/",n);if(s==null)return null;let o=xx(t);y_(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=O_(s);l=__(o[a],u,r)}return l}function g_(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function xx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(ie(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=ur([r,a.relativePath]),c=n.concat(a);s.children&&s.children.length>0&&(ie(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xx(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:C_(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of Sx(s.path))i(s,o,a)}),e}function Sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Sx(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function y_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E_(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const v_=/^:[\w-]+$/,w_=3,x_=2,S_=1,k_=10,b_=-2,Ly=t=>t==="*";function C_(t,e){let n=t.split("/"),r=n.length;return n.some(Ly)&&(r+=b_),e&&(r+=x_),n.filter(i=>!Ly(i)).reduce((i,s)=>i+(v_.test(s)?w_:s===""?S_:k_),r)}function E_(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function __(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=dc({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=dc({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ur([s,d.pathname]),pathnameBase:P_(ur([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=ur([s,d.pathnameBase]))}return o}function dc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T_(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=l[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=l[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function T_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ro(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function O_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ro(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function M_(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Si(t):t;return{pathname:n?n.startsWith("/")?n:N_(n,e):e,search:R_(r),hash:A_(i)}}function N_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ef(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bm(t,e){let n=kx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cm(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Si(t):(i=_e({},t),ie(!i.pathname||!i.pathname.includes("?"),ef("?","pathname","search",i)),ie(!i.pathname||!i.pathname.includes("#"),ef("#","pathname","hash",i)),ie(!i.search||!i.search.includes("#"),ef("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=M_(i,l),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const ur=t=>t.join("/").replace(/\/\/+/g,"/"),P_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R_=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class fc{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Zc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bx=["post","put","patch","delete"],D_=new Set(bx),I_=["get",...bx],j_=new Set(I_),L_=new Set([301,302,303,307,308]),$_=new Set([307,308]),tf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},z_={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},al={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Em=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F_=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Cx="remix-router-transitions";function B_(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ie(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let b=t.detectErrorBoundary;i=E=>({hasErrorBoundary:b(E)})}else i=F_;let s={},o=cc(t.routes,i,void 0,s),l,a=t.basename||"/",u=t.dataStrategy||W_,c=t.patchRoutesOnNavigation,d=_e({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,h=new Set,p=null,m=null,v=null,g=t.hydrationData!=null,y=Di(o,t.history.location,a),x=null;if(y==null&&!c){let b=Dt(404,{pathname:t.history.location.pathname}),{matches:E,route:M}=Jy(o);y=E,x={[M.id]:b}}y&&!t.hydrationData&&ja(y,o,t.history.location.pathname).active&&(y=null);let C;if(y)if(y.some(b=>b.route.lazy))C=!1;else if(!y.some(b=>b.route.loader))C=!0;else if(d.v7_partialHydration){let b=t.hydrationData?t.hydrationData.loaderData:null,E=t.hydrationData?t.hydrationData.errors:null;if(E){let M=y.findIndex(R=>E[R.route.id]!==void 0);C=y.slice(0,M+1).every(R=>!Th(R.route,b,E))}else C=y.every(M=>!Th(M.route,b,E))}else C=t.hydrationData!=null;else if(C=!1,y=[],d.v7_partialHydration){let b=ja(null,o,t.history.location.pathname);b.active&&b.matches&&(y=b.matches)}let T,S={historyAction:t.history.action,location:t.history.location,matches:y,initialized:C,navigation:tf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||x,fetchers:new Map,blockers:new Map},N=Be.Pop,O=!1,P,I=!1,ee=new Map,pe=null,$e=!1,ze=!1,xr=[],Sr=new Set,je=new Map,$=0,Q=-1,Y=new Map,fe=new Set,ke=new Map,In=new Map,rt=new Set,vn=new Map,wt=new Map,Yn;function xb(){if(f=t.history.listen(b=>{let{action:E,location:M,delta:R}=b;if(Yn){Yn(),Yn=void 0;return}Ro(wt.size===0||R!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let F=Sg({currentLocation:S.location,nextLocation:M,historyAction:E});if(F&&R!=null){let W=new Promise(X=>{Yn=X});t.history.go(R*-1),Ia(F,{state:"blocked",location:M,proceed(){Ia(F,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),W.then(()=>t.history.go(R))},reset(){let X=new Map(S.blockers);X.set(F,al),xt({blockers:X})}});return}return Ti(E,M)}),n){sT(e,ee);let b=()=>oT(e,ee);e.addEventListener("pagehide",b),pe=()=>e.removeEventListener("pagehide",b)}return S.initialized||Ti(Be.Pop,S.location,{initialHydration:!0}),T}function Sb(){f&&f(),pe&&pe(),h.clear(),P&&P.abort(),S.fetchers.forEach((b,E)=>Da(E)),S.blockers.forEach((b,E)=>xg(E))}function kb(b){return h.add(b),()=>h.delete(b)}function xt(b,E){E===void 0&&(E={}),S=_e({},S,b);let M=[],R=[];d.v7_fetcherPersist&&S.fetchers.forEach((F,W)=>{F.state==="idle"&&(rt.has(W)?R.push(W):M.push(W))}),[...h].forEach(F=>F(S,{deletedFetchers:R,viewTransitionOpts:E.viewTransitionOpts,flushSync:E.flushSync===!0})),d.v7_fetcherPersist&&(M.forEach(F=>S.fetchers.delete(F)),R.forEach(F=>Da(F)))}function Cs(b,E,M){var R,F;let{flushSync:W}=M===void 0?{}:M,X=S.actionData!=null&&S.navigation.formMethod!=null&&Cn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((R=b.state)==null?void 0:R._isRedirect)!==!0,U;E.actionData?Object.keys(E.actionData).length>0?U=E.actionData:U=null:X?U=S.actionData:U=null;let H=E.loaderData?qy(S.loaderData,E.loaderData,E.matches||[],E.errors):S.loaderData,B=S.blockers;B.size>0&&(B=new Map(B),B.forEach((ue,it)=>B.set(it,al)));let q=O===!0||S.navigation.formMethod!=null&&Cn(S.navigation.formMethod)&&((F=b.state)==null?void 0:F._isRedirect)!==!0;l&&(o=l,l=void 0),$e||N===Be.Pop||(N===Be.Push?t.history.push(b,b.state):N===Be.Replace&&t.history.replace(b,b.state));let oe;if(N===Be.Pop){let ue=ee.get(S.location.pathname);ue&&ue.has(b.pathname)?oe={currentLocation:S.location,nextLocation:b}:ee.has(b.pathname)&&(oe={currentLocation:b,nextLocation:S.location})}else if(I){let ue=ee.get(S.location.pathname);ue?ue.add(b.pathname):(ue=new Set([b.pathname]),ee.set(S.location.pathname,ue)),oe={currentLocation:S.location,nextLocation:b}}xt(_e({},E,{actionData:U,loaderData:H,historyAction:N,location:b,initialized:!0,navigation:tf,revalidation:"idle",restoreScrollPosition:bg(b,E.matches||S.matches),preventScrollReset:q,blockers:B}),{viewTransitionOpts:oe,flushSync:W===!0}),N=Be.Pop,O=!1,I=!1,$e=!1,ze=!1,xr=[]}async function hg(b,E){if(typeof b=="number"){t.history.go(b);return}let M=_h(S.location,S.matches,a,d.v7_prependBasename,b,d.v7_relativeSplatPath,E==null?void 0:E.fromRouteId,E==null?void 0:E.relative),{path:R,submission:F,error:W}=$y(d.v7_normalizeFormMethod,!1,M,E),X=S.location,U=na(S.location,R,E&&E.state);U=_e({},U,t.history.encodeLocation(U));let H=E&&E.replace!=null?E.replace:void 0,B=Be.Push;H===!0?B=Be.Replace:H===!1||F!=null&&Cn(F.formMethod)&&F.formAction===S.location.pathname+S.location.search&&(B=Be.Replace);let q=E&&"preventScrollReset"in E?E.preventScrollReset===!0:void 0,oe=(E&&E.flushSync)===!0,ue=Sg({currentLocation:X,nextLocation:U,historyAction:B});if(ue){Ia(ue,{state:"blocked",location:U,proceed(){Ia(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),hg(b,E)},reset(){let it=new Map(S.blockers);it.set(ue,al),xt({blockers:it})}});return}return await Ti(B,U,{submission:F,pendingError:W,preventScrollReset:q,replace:E&&E.replace,enableViewTransition:E&&E.viewTransition,flushSync:oe})}function bb(){if(bd(),xt({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){Ti(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}Ti(N||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:I===!0})}}async function Ti(b,E,M){P&&P.abort(),P=null,N=b,$e=(M&&M.startUninterruptedRevalidation)===!0,Ab(S.location,S.matches),O=(M&&M.preventScrollReset)===!0,I=(M&&M.enableViewTransition)===!0;let R=l||o,F=M&&M.overrideNavigation,W=Di(R,E,a),X=(M&&M.flushSync)===!0,U=ja(W,R,E.pathname);if(U.active&&U.matches&&(W=U.matches),!W){let{error:we,notFoundMatches:he,route:Pe}=Cd(E.pathname);Cs(E,{matches:he,loaderData:{},errors:{[Pe.id]:we}},{flushSync:X});return}if(S.initialized&&!ze&&Y_(S.location,E)&&!(M&&M.submission&&Cn(M.submission.formMethod))){Cs(E,{matches:W},{flushSync:X});return}P=new AbortController;let H=Ms(t.history,E,P.signal,M&&M.submission),B;if(M&&M.pendingError)B=[Ii(W).route.id,{type:ye.error,error:M.pendingError}];else if(M&&M.submission&&Cn(M.submission.formMethod)){let we=await Cb(H,E,M.submission,W,U.active,{replace:M.replace,flushSync:X});if(we.shortCircuited)return;if(we.pendingActionResult){let[he,Pe]=we.pendingActionResult;if(Kt(Pe)&&Zc(Pe.error)&&Pe.error.status===404){P=null,Cs(E,{matches:we.matches,loaderData:{},errors:{[he]:Pe.error}});return}}W=we.matches||W,B=we.pendingActionResult,F=nf(E,M.submission),X=!1,U.active=!1,H=Ms(t.history,H.url,H.signal)}let{shortCircuited:q,matches:oe,loaderData:ue,errors:it}=await Eb(H,E,W,U.active,F,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,X,B);q||(P=null,Cs(E,_e({matches:oe||W},Ky(B),{loaderData:ue,errors:it})))}async function Cb(b,E,M,R,F,W){W===void 0&&(W={}),bd();let X=rT(E,M);if(xt({navigation:X},{flushSync:W.flushSync===!0}),F){let B=await La(R,E.pathname,b.signal);if(B.type==="aborted")return{shortCircuited:!0};if(B.type==="error"){let q=Ii(B.partialMatches).route.id;return{matches:B.partialMatches,pendingActionResult:[q,{type:ye.error,error:B.error}]}}else if(B.matches)R=B.matches;else{let{notFoundMatches:q,error:oe,route:ue}=Cd(E.pathname);return{matches:q,pendingActionResult:[ue.id,{type:ye.error,error:oe}]}}}let U,H=vl(R,E);if(!H.route.action&&!H.route.lazy)U={type:ye.error,error:Dt(405,{method:b.method,pathname:E.pathname,routeId:H.route.id})};else if(U=(await Go("action",S,b,[H],R,null))[H.route.id],b.signal.aborted)return{shortCircuited:!0};if(Ui(U)){let B;return W&&W.replace!=null?B=W.replace:B=Vy(U.response.headers.get("Location"),new URL(b.url),a)===S.location.pathname+S.location.search,await Oi(b,U,!0,{submission:M,replace:B}),{shortCircuited:!0}}if(Gr(U))throw Dt(400,{type:"defer-action"});if(Kt(U)){let B=Ii(R,H.route.id);return(W&&W.replace)!==!0&&(N=Be.Push),{matches:R,pendingActionResult:[B.route.id,U]}}return{matches:R,pendingActionResult:[H.route.id,U]}}async function Eb(b,E,M,R,F,W,X,U,H,B,q){let oe=F||nf(E,W),ue=W||X||Gy(oe),it=!$e&&(!d.v7_partialHydration||!H);if(R){if(it){let Re=pg(q);xt(_e({navigation:oe},Re!==void 0?{actionData:Re}:{}),{flushSync:B})}let de=await La(M,E.pathname,b.signal);if(de.type==="aborted")return{shortCircuited:!0};if(de.type==="error"){let Re=Ii(de.partialMatches).route.id;return{matches:de.partialMatches,loaderData:{},errors:{[Re]:de.error}}}else if(de.matches)M=de.matches;else{let{error:Re,notFoundMatches:_s,route:Zo}=Cd(E.pathname);return{matches:_s,loaderData:{},errors:{[Zo.id]:Re}}}}let we=l||o,[he,Pe]=Fy(t.history,S,M,ue,E,d.v7_partialHydration&&H===!0,d.v7_skipActionErrorRevalidation,ze,xr,Sr,rt,ke,fe,we,a,q);if(Ed(de=>!(M&&M.some(Re=>Re.route.id===de))||he&&he.some(Re=>Re.route.id===de)),Q=++$,he.length===0&&Pe.length===0){let de=vg();return Cs(E,_e({matches:M,loaderData:{},errors:q&&Kt(q[1])?{[q[0]]:q[1].error}:null},Ky(q),de?{fetchers:new Map(S.fetchers)}:{}),{flushSync:B}),{shortCircuited:!0}}if(it){let de={};if(!R){de.navigation=oe;let Re=pg(q);Re!==void 0&&(de.actionData=Re)}Pe.length>0&&(de.fetchers=_b(Pe)),xt(de,{flushSync:B})}Pe.forEach(de=>{br(de.key),de.controller&&je.set(de.key,de.controller)});let Es=()=>Pe.forEach(de=>br(de.key));P&&P.signal.addEventListener("abort",Es);let{loaderResults:Yo,fetcherResults:Zn}=await mg(S,M,he,Pe,b);if(b.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Es),Pe.forEach(de=>je.delete(de.key));let jn=iu(Yo);if(jn)return await Oi(b,jn.result,!0,{replace:U}),{shortCircuited:!0};if(jn=iu(Zn),jn)return fe.add(jn.key),await Oi(b,jn.result,!0,{replace:U}),{shortCircuited:!0};let{loaderData:_d,errors:Xo}=Wy(S,M,Yo,q,Pe,Zn,vn);vn.forEach((de,Re)=>{de.subscribe(_s=>{(_s||de.done)&&vn.delete(Re)})}),d.v7_partialHydration&&H&&S.errors&&(Xo=_e({},S.errors,Xo));let Mi=vg(),$a=wg(Q),za=Mi||$a||Pe.length>0;return _e({matches:M,loaderData:_d,errors:Xo},za?{fetchers:new Map(S.fetchers)}:{})}function pg(b){if(b&&!Kt(b[1]))return{[b[0]]:b[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function _b(b){return b.forEach(E=>{let M=S.fetchers.get(E.key),R=ul(void 0,M?M.data:void 0);S.fetchers.set(E.key,R)}),new Map(S.fetchers)}function Tb(b,E,M,R){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");br(b);let F=(R&&R.flushSync)===!0,W=l||o,X=_h(S.location,S.matches,a,d.v7_prependBasename,M,d.v7_relativeSplatPath,E,R==null?void 0:R.relative),U=Di(W,X,a),H=ja(U,W,X);if(H.active&&H.matches&&(U=H.matches),!U){Xn(b,E,Dt(404,{pathname:X}),{flushSync:F});return}let{path:B,submission:q,error:oe}=$y(d.v7_normalizeFormMethod,!0,X,R);if(oe){Xn(b,E,oe,{flushSync:F});return}let ue=vl(U,B),it=(R&&R.preventScrollReset)===!0;if(q&&Cn(q.formMethod)){Ob(b,E,B,ue,U,H.active,F,it,q);return}ke.set(b,{routeId:E,path:B}),Mb(b,E,B,ue,U,H.active,F,it,q)}async function Ob(b,E,M,R,F,W,X,U,H){bd(),ke.delete(b);function B(Fe){if(!Fe.route.action&&!Fe.route.lazy){let Ts=Dt(405,{method:H.formMethod,pathname:M,routeId:E});return Xn(b,E,Ts,{flushSync:X}),!0}return!1}if(!W&&B(R))return;let q=S.fetchers.get(b);kr(b,iT(H,q),{flushSync:X});let oe=new AbortController,ue=Ms(t.history,M,oe.signal,H);if(W){let Fe=await La(F,M,ue.signal);if(Fe.type==="aborted")return;if(Fe.type==="error"){Xn(b,E,Fe.error,{flushSync:X});return}else if(Fe.matches){if(F=Fe.matches,R=vl(F,M),B(R))return}else{Xn(b,E,Dt(404,{pathname:M}),{flushSync:X});return}}je.set(b,oe);let it=$,he=(await Go("action",S,ue,[R],F,b))[R.route.id];if(ue.signal.aborted){je.get(b)===oe&&je.delete(b);return}if(d.v7_fetcherPersist&&rt.has(b)){if(Ui(he)||Kt(he)){kr(b,Er(void 0));return}}else{if(Ui(he))if(je.delete(b),Q>it){kr(b,Er(void 0));return}else return fe.add(b),kr(b,ul(H)),Oi(ue,he,!1,{fetcherSubmission:H,preventScrollReset:U});if(Kt(he)){Xn(b,E,he.error);return}}if(Gr(he))throw Dt(400,{type:"defer-action"});let Pe=S.navigation.location||S.location,Es=Ms(t.history,Pe,oe.signal),Yo=l||o,Zn=S.navigation.state!=="idle"?Di(Yo,S.navigation.location,a):S.matches;ie(Zn,"Didn't find any matches after fetcher action");let jn=++$;Y.set(b,jn);let _d=ul(H,he.data);S.fetchers.set(b,_d);let[Xo,Mi]=Fy(t.history,S,Zn,H,Pe,!1,d.v7_skipActionErrorRevalidation,ze,xr,Sr,rt,ke,fe,Yo,a,[R.route.id,he]);Mi.filter(Fe=>Fe.key!==b).forEach(Fe=>{let Ts=Fe.key,Cg=S.fetchers.get(Ts),jb=ul(void 0,Cg?Cg.data:void 0);S.fetchers.set(Ts,jb),br(Ts),Fe.controller&&je.set(Ts,Fe.controller)}),xt({fetchers:new Map(S.fetchers)});let $a=()=>Mi.forEach(Fe=>br(Fe.key));oe.signal.addEventListener("abort",$a);let{loaderResults:za,fetcherResults:de}=await mg(S,Zn,Xo,Mi,Es);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",$a),Y.delete(b),je.delete(b),Mi.forEach(Fe=>je.delete(Fe.key));let Re=iu(za);if(Re)return Oi(Es,Re.result,!1,{preventScrollReset:U});if(Re=iu(de),Re)return fe.add(Re.key),Oi(Es,Re.result,!1,{preventScrollReset:U});let{loaderData:_s,errors:Zo}=Wy(S,Zn,za,void 0,Mi,de,vn);if(S.fetchers.has(b)){let Fe=Er(he.data);S.fetchers.set(b,Fe)}wg(jn),S.navigation.state==="loading"&&jn>Q?(ie(N,"Expected pending action"),P&&P.abort(),Cs(S.navigation.location,{matches:Zn,loaderData:_s,errors:Zo,fetchers:new Map(S.fetchers)})):(xt({errors:Zo,loaderData:qy(S.loaderData,_s,Zn,Zo),fetchers:new Map(S.fetchers)}),ze=!1)}async function Mb(b,E,M,R,F,W,X,U,H){let B=S.fetchers.get(b);kr(b,ul(H,B?B.data:void 0),{flushSync:X});let q=new AbortController,oe=Ms(t.history,M,q.signal);if(W){let he=await La(F,M,oe.signal);if(he.type==="aborted")return;if(he.type==="error"){Xn(b,E,he.error,{flushSync:X});return}else if(he.matches)F=he.matches,R=vl(F,M);else{Xn(b,E,Dt(404,{pathname:M}),{flushSync:X});return}}je.set(b,q);let ue=$,we=(await Go("loader",S,oe,[R],F,b))[R.route.id];if(Gr(we)&&(we=await _m(we,oe.signal,!0)||we),je.get(b)===q&&je.delete(b),!oe.signal.aborted){if(rt.has(b)){kr(b,Er(void 0));return}if(Ui(we))if(Q>ue){kr(b,Er(void 0));return}else{fe.add(b),await Oi(oe,we,!1,{preventScrollReset:U});return}if(Kt(we)){Xn(b,E,we.error);return}ie(!Gr(we),"Unhandled fetcher deferred data"),kr(b,Er(we.data))}}async function Oi(b,E,M,R){let{submission:F,fetcherSubmission:W,preventScrollReset:X,replace:U}=R===void 0?{}:R;E.response.headers.has("X-Remix-Revalidate")&&(ze=!0);let H=E.response.headers.get("Location");ie(H,"Expected a Location header on the redirect Response"),H=Vy(H,new URL(b.url),a);let B=na(S.location,H,{_isRedirect:!0});if(n){let he=!1;if(E.response.headers.has("X-Remix-Reload-Document"))he=!0;else if(Em.test(H)){const Pe=t.history.createURL(H);he=Pe.origin!==e.location.origin||mr(Pe.pathname,a)==null}if(he){U?e.location.replace(H):e.location.assign(H);return}}P=null;let q=U===!0||E.response.headers.has("X-Remix-Replace")?Be.Replace:Be.Push,{formMethod:oe,formAction:ue,formEncType:it}=S.navigation;!F&&!W&&oe&&ue&&it&&(F=Gy(S.navigation));let we=F||W;if($_.has(E.response.status)&&we&&Cn(we.formMethod))await Ti(q,B,{submission:_e({},we,{formAction:H}),preventScrollReset:X||O,enableViewTransition:M?I:void 0});else{let he=nf(B,F);await Ti(q,B,{overrideNavigation:he,fetcherSubmission:W,preventScrollReset:X||O,enableViewTransition:M?I:void 0})}}async function Go(b,E,M,R,F,W){let X,U={};try{X=await q_(u,b,E,M,R,F,W,s,i)}catch(H){return R.forEach(B=>{U[B.route.id]={type:ye.error,error:H}}),U}for(let[H,B]of Object.entries(X))if(X_(B)){let q=B.result;U[H]={type:ye.redirect,response:Q_(q,M,H,F,a,d.v7_relativeSplatPath)}}else U[H]=await J_(B);return U}async function mg(b,E,M,R,F){let W=b.matches,X=Go("loader",b,F,M,E,null),U=Promise.all(R.map(async q=>{if(q.matches&&q.match&&q.controller){let ue=(await Go("loader",b,Ms(t.history,q.path,q.controller.signal),[q.match],q.matches,q.key))[q.match.route.id];return{[q.key]:ue}}else return Promise.resolve({[q.key]:{type:ye.error,error:Dt(404,{pathname:q.path})}})})),H=await X,B=(await U).reduce((q,oe)=>Object.assign(q,oe),{});return await Promise.all([tT(E,H,F.signal,W,b.loaderData),nT(E,B,R)]),{loaderResults:H,fetcherResults:B}}function bd(){ze=!0,xr.push(...Ed()),ke.forEach((b,E)=>{je.has(E)&&Sr.add(E),br(E)})}function kr(b,E,M){M===void 0&&(M={}),S.fetchers.set(b,E),xt({fetchers:new Map(S.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function Xn(b,E,M,R){R===void 0&&(R={});let F=Ii(S.matches,E);Da(b),xt({errors:{[F.route.id]:M},fetchers:new Map(S.fetchers)},{flushSync:(R&&R.flushSync)===!0})}function gg(b){return d.v7_fetcherPersist&&(In.set(b,(In.get(b)||0)+1),rt.has(b)&&rt.delete(b)),S.fetchers.get(b)||z_}function Da(b){let E=S.fetchers.get(b);je.has(b)&&!(E&&E.state==="loading"&&Y.has(b))&&br(b),ke.delete(b),Y.delete(b),fe.delete(b),rt.delete(b),Sr.delete(b),S.fetchers.delete(b)}function Nb(b){if(d.v7_fetcherPersist){let E=(In.get(b)||0)-1;E<=0?(In.delete(b),rt.add(b)):In.set(b,E)}else Da(b);xt({fetchers:new Map(S.fetchers)})}function br(b){let E=je.get(b);E&&(E.abort(),je.delete(b))}function yg(b){for(let E of b){let M=gg(E),R=Er(M.data);S.fetchers.set(E,R)}}function vg(){let b=[],E=!1;for(let M of fe){let R=S.fetchers.get(M);ie(R,"Expected fetcher: "+M),R.state==="loading"&&(fe.delete(M),b.push(M),E=!0)}return yg(b),E}function wg(b){let E=[];for(let[M,R]of Y)if(R<b){let F=S.fetchers.get(M);ie(F,"Expected fetcher: "+M),F.state==="loading"&&(br(M),Y.delete(M),E.push(M))}return yg(E),E.length>0}function Pb(b,E){let M=S.blockers.get(b)||al;return wt.get(b)!==E&&wt.set(b,E),M}function xg(b){S.blockers.delete(b),wt.delete(b)}function Ia(b,E){let M=S.blockers.get(b)||al;ie(M.state==="unblocked"&&E.state==="blocked"||M.state==="blocked"&&E.state==="blocked"||M.state==="blocked"&&E.state==="proceeding"||M.state==="blocked"&&E.state==="unblocked"||M.state==="proceeding"&&E.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+E.state);let R=new Map(S.blockers);R.set(b,E),xt({blockers:R})}function Sg(b){let{currentLocation:E,nextLocation:M,historyAction:R}=b;if(wt.size===0)return;wt.size>1&&Ro(!1,"A router only supports one blocker at a time");let F=Array.from(wt.entries()),[W,X]=F[F.length-1],U=S.blockers.get(W);if(!(U&&U.state==="proceeding")&&X({currentLocation:E,nextLocation:M,historyAction:R}))return W}function Cd(b){let E=Dt(404,{pathname:b}),M=l||o,{matches:R,route:F}=Jy(M);return Ed(),{notFoundMatches:R,route:F,error:E}}function Ed(b){let E=[];return vn.forEach((M,R)=>{(!b||b(R))&&(M.cancel(),E.push(R),vn.delete(R))}),E}function Rb(b,E,M){if(p=b,v=E,m=M||null,!g&&S.navigation===tf){g=!0;let R=bg(S.location,S.matches);R!=null&&xt({restoreScrollPosition:R})}return()=>{p=null,v=null,m=null}}function kg(b,E){return m&&m(b,E.map(R=>g_(R,S.loaderData)))||b.key}function Ab(b,E){if(p&&v){let M=kg(b,E);p[M]=v()}}function bg(b,E){if(p){let M=kg(b,E),R=p[M];if(typeof R=="number")return R}return null}function ja(b,E,M){if(c)if(b){if(Object.keys(b[0].params).length>0)return{active:!0,matches:Pu(E,M,a,!0)}}else return{active:!0,matches:Pu(E,M,a,!0)||[]};return{active:!1,matches:null}}async function La(b,E,M){if(!c)return{type:"success",matches:b};let R=b;for(;;){let F=l==null,W=l||o,X=s;try{await c({path:E,matches:R,patch:(B,q)=>{M.aborted||Uy(B,q,W,X,i)}})}catch(B){return{type:"error",error:B,partialMatches:R}}finally{F&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let U=Di(W,E,a);if(U)return{type:"success",matches:U};let H=Pu(W,E,a,!0);if(!H||R.length===H.length&&R.every((B,q)=>B.route.id===H[q].route.id))return{type:"success",matches:null};R=H}}function Db(b){s={},l=cc(b,i,void 0,s)}function Ib(b,E){let M=l==null;Uy(b,E,l||o,s,i),M&&(o=[...o],xt({}))}return T={get basename(){return a},get future(){return d},get state(){return S},get routes(){return o},get window(){return e},initialize:xb,subscribe:kb,enableScrollRestoration:Rb,navigate:hg,fetch:Tb,revalidate:bb,createHref:b=>t.history.createHref(b),encodeLocation:b=>t.history.encodeLocation(b),getFetcher:gg,deleteFetcher:Nb,dispose:Sb,getBlocker:Pb,deleteBlocker:xg,patchRoutes:Ib,_internalFetchControllers:je,_internalActiveDeferreds:vn,_internalSetRoutes:Db},T}function U_(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function _h(t,e,n,r,i,s,o,l){let a,u;if(o){a=[];for(let d of e)if(a.push(d),d.route.id===o){u=d;break}}else a=e,u=e[e.length-1];let c=Cm(i||".",bm(a,s),mr(t.pathname,n)||t.pathname,l==="path");if(i==null&&(c.search=t.search,c.hash=t.hash),(i==null||i===""||i===".")&&u){let d=Tm(c.search);if(u.route.index&&!d)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&d){let f=new URLSearchParams(c.search),h=f.getAll("index");f.delete("index"),h.filter(m=>m).forEach(m=>f.append("index",m));let p=f.toString();c.search=p?"?"+p:""}}return r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:ur([n,c.pathname])),hs(c)}function $y(t,e,n,r){if(!r||!U_(r))return{path:n};if(r.formMethod&&!eT(r.formMethod))return{path:n,error:Dt(405,{method:r.formMethod})};let i=()=>({path:n,error:Dt(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=Tx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Cn(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[m,v]=p;return""+h+m+"="+v+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Cn(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}ie(typeof FormData=="function","FormData is not available in this environment");let a,u;if(r.formData)a=Oh(r.formData),u=r.formData;else if(r.body instanceof FormData)a=Oh(r.body),u=r.body;else if(r.body instanceof URLSearchParams)a=r.body,u=Hy(a);else if(r.body==null)a=new URLSearchParams,u=new FormData;else try{a=new URLSearchParams(r.body),u=Hy(a)}catch{return i()}let c={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Cn(c.formMethod))return{path:n,submission:c};let d=Si(n);return e&&d.search&&Tm(d.search)&&a.append("index",""),d.search="?"+a,{path:hs(d),submission:c}}function zy(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Fy(t,e,n,r,i,s,o,l,a,u,c,d,f,h,p,m){let v=m?Kt(m[1])?m[1].error:m[1].data:void 0,g=t.createURL(e.location),y=t.createURL(i),x=n;s&&e.errors?x=zy(n,Object.keys(e.errors)[0],!0):m&&Kt(m[1])&&(x=zy(n,m[0]));let C=m?m[1].statusCode:void 0,T=o&&C&&C>=400,S=x.filter((O,P)=>{let{route:I}=O;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return Th(I,e.loaderData,e.errors);if(V_(e.loaderData,e.matches[P],O)||a.some($e=>$e===O.route.id))return!0;let ee=e.matches[P],pe=O;return By(O,_e({currentUrl:g,currentParams:ee.params,nextUrl:y,nextParams:pe.params},r,{actionResult:v,actionStatus:C,defaultShouldRevalidate:T?!1:l||g.pathname+g.search===y.pathname+y.search||g.search!==y.search||Ex(ee,pe)}))}),N=[];return d.forEach((O,P)=>{if(s||!n.some(ze=>ze.route.id===O.routeId)||c.has(P))return;let I=Di(h,O.path,p);if(!I){N.push({key:P,routeId:O.routeId,path:O.path,matches:null,match:null,controller:null});return}let ee=e.fetchers.get(P),pe=vl(I,O.path),$e=!1;f.has(P)?$e=!1:u.has(P)?(u.delete(P),$e=!0):ee&&ee.state!=="idle"&&ee.data===void 0?$e=l:$e=By(pe,_e({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:v,actionStatus:C,defaultShouldRevalidate:T?!1:l})),$e&&N.push({key:P,routeId:O.routeId,path:O.path,matches:I,match:pe,controller:new AbortController})}),[S,N]}function Th(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function V_(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Ex(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function By(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Uy(t,e,n,r,i){var s;let o;if(t){let u=r[t];ie(u,"No route found to patch children into: routeId = "+t),u.children||(u.children=[]),o=u.children}else o=n;let l=e.filter(u=>!o.some(c=>_x(u,c))),a=cc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...a)}function _x(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>_x(n,s))}):!1}async function H_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ie(i,"No route found in manifest");let s={};for(let o in r){let a=i[o]!==void 0&&o!=="hasErrorBoundary";Ro(!a,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!a&&!p_.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,_e({},e(i),{lazy:void 0}))}async function W_(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function q_(t,e,n,r,i,s,o,l,a,u){let c=s.map(h=>h.route.lazy?H_(h.route,a,l):void 0),d=s.map((h,p)=>{let m=c[p],v=i.some(y=>y.route.id===h.route.id);return _e({},h,{shouldLoad:v,resolve:async y=>(y&&r.method==="GET"&&(h.route.lazy||h.route.loader)&&(v=!0),v?K_(e,r,h,m,y,u):Promise.resolve({type:ye.data,result:void 0}))})}),f=await t({matches:d,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(c)}catch{}return f}async function K_(t,e,n,r,i,s){let o,l,a=u=>{let c,d=new Promise((p,m)=>c=m);l=()=>c(),e.signal.addEventListener("abort",l);let f=p=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...p!==void 0?[p]:[]),h=(async()=>{try{return{type:"data",result:await(i?i(m=>f(m)):f())}}catch(p){return{type:"error",result:p}}})();return Promise.race([h,d])};try{let u=n.route[t];if(r)if(u){let c,[d]=await Promise.all([a(u).catch(f=>{c=f}),r]);if(c!==void 0)throw c;o=d}else if(await r,u=n.route[t],u)o=await a(u);else if(t==="action"){let c=new URL(e.url),d=c.pathname+c.search;throw Dt(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:ye.data,result:void 0};else if(u)o=await a(u);else{let c=new URL(e.url),d=c.pathname+c.search;throw Dt(404,{pathname:d})}ie(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:ye.error,result:u}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function J_(t){let{result:e,type:n}=t;if(Ox(e)){let u;try{let c=e.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(c){return{type:ye.error,error:c}}return n===ye.error?{type:ye.error,error:new fc(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:ye.data,data:u,statusCode:e.status,headers:e.headers}}if(n===ye.error){if(Qy(e)){var r;if(e.data instanceof Error){var i;return{type:ye.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new fc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:ye.error,error:e,statusCode:Zc(e)?e.status:void 0}}if(Z_(e)){var s,o;return{type:ye.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(Qy(e)){var l,a;return{type:ye.data,data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:ye.data,data:e}}function Q_(t,e,n,r,i,s){let o=t.headers.get("Location");if(ie(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Em.test(o)){let l=r.slice(0,r.findIndex(a=>a.route.id===n)+1);o=_h(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function Vy(t,e,n){if(Em.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=mr(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ms(t,e,n,r){let i=t.createURL(Tx(e)).toString(),s={signal:n};if(r&&Cn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=Oh(r.formData):s.body=r.formData}return new Request(i,s)}function Oh(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Hy(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function G_(t,e,n,r,i){let s={},o=null,l,a=!1,u={},c=n&&Kt(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,h=e[f];if(ie(!Ui(h),"Cannot handle redirect results in processLoaderData"),Kt(h)){let p=h.error;c!==void 0&&(p=c,c=void 0),o=o||{};{let m=Ii(t,f);o[m.route.id]==null&&(o[m.route.id]=p)}s[f]=void 0,a||(a=!0,l=Zc(h.error)?h.error.status:500),h.headers&&(u[f]=h.headers)}else Gr(h)?(r.set(f,h.deferredData),s[f]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!a&&(l=h.statusCode),h.headers&&(u[f]=h.headers)):(s[f]=h.data,h.statusCode&&h.statusCode!==200&&!a&&(l=h.statusCode),h.headers&&(u[f]=h.headers))}),c!==void 0&&n&&(o={[n[0]]:c},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:u}}function Wy(t,e,n,r,i,s,o){let{loaderData:l,errors:a}=G_(e,n,r,o);return i.forEach(u=>{let{key:c,match:d,controller:f}=u,h=s[c];if(ie(h,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Kt(h)){let p=Ii(t.matches,d==null?void 0:d.route.id);a&&a[p.route.id]||(a=_e({},a,{[p.route.id]:h.error})),t.fetchers.delete(c)}else if(Ui(h))ie(!1,"Unhandled fetcher revalidation redirect");else if(Gr(h))ie(!1,"Unhandled fetcher deferred data");else{let p=Er(h.data);t.fetchers.set(c,p)}}),{loaderData:l,errors:a}}function qy(t,e,n,r){let i=_e({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Ky(t){return t?Kt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ii(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Jy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Dt(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(l="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",a='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new fc(t||500,l,new Error(a),!0)}function iu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Ui(i))return{key:r,result:i}}}function Tx(t){let e=typeof t=="string"?Si(t):t;return hs(_e({},e,{hash:""}))}function Y_(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function X_(t){return Ox(t.result)&&L_.has(t.result.status)}function Gr(t){return t.type===ye.deferred}function Kt(t){return t.type===ye.error}function Ui(t){return(t&&t.type)===ye.redirect}function Qy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Z_(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Ox(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function eT(t){return j_.has(t.toLowerCase())}function Cn(t){return D_.has(t.toLowerCase())}async function tT(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,a]=s[o],u=t.find(f=>(f==null?void 0:f.route.id)===l);if(!u)continue;let c=r.find(f=>f.route.id===u.route.id),d=c!=null&&!Ex(c,u)&&(i&&i[u.route.id])!==void 0;Gr(a)&&d&&await _m(a,n,!1).then(f=>{f&&(e[l]=f)})}}async function nT(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&Gr(l)&&(ie(o,"Expected an AbortController for revalidating fetcher deferred result"),await _m(l,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function _m(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ye.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ye.error,error:i}}return{type:ye.data,data:t.deferredData.data}}}function Tm(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function vl(t,e){let n=typeof e=="string"?Si(e).search:e.search;if(t[t.length-1].route.index&&Tm(n||""))return t[t.length-1];let r=kx(t);return r[r.length-1]}function Gy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function nf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function rT(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ul(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function iT(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Er(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function sT(t,e){try{let n=t.sessionStorage.getItem(Cx);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function oT(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Cx,JSON.stringify(n))}catch(r){Ro(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hc.apply(this,arguments)}const Ea=_.createContext(null),Om=_.createContext(null),ki=_.createContext(null),Mm=_.createContext(null),wr=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Mx=_.createContext(null);function lT(t,e){let{relative:n}=e===void 0?{}:e;_a()||ie(!1);let{basename:r,navigator:i}=_.useContext(ki),{hash:s,pathname:o,search:l}=ed(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:ur([r,o])),i.createHref({pathname:a,search:l,hash:s})}function _a(){return _.useContext(Mm)!=null}function Wo(){return _a()||ie(!1),_.useContext(Mm).location}function Nx(t){_.useContext(ki).static||_.useLayoutEffect(t)}function Nm(){let{isDataRoute:t}=_.useContext(wr);return t?kT():aT()}function aT(){_a()||ie(!1);let t=_.useContext(Ea),{basename:e,future:n,navigator:r}=_.useContext(ki),{matches:i}=_.useContext(wr),{pathname:s}=Wo(),o=JSON.stringify(bm(i,n.v7_relativeSplatPath)),l=_.useRef(!1);return Nx(()=>{l.current=!0}),_.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=Cm(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ur([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}const uT=_.createContext(null);function cT(t){let e=_.useContext(wr).outlet;return e&&_.createElement(uT.Provider,{value:t},e)}function dT(){let{matches:t}=_.useContext(wr),e=t[t.length-1];return e?e.params:{}}function ed(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(ki),{matches:i}=_.useContext(wr),{pathname:s}=Wo(),o=JSON.stringify(bm(i,r.v7_relativeSplatPath));return _.useMemo(()=>Cm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function fT(t,e,n,r){_a()||ie(!1);let{navigator:i}=_.useContext(ki),{matches:s}=_.useContext(wr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=Wo(),c;c=u;let d=c.pathname||"/",f=d;if(a!=="/"){let m=a.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let h=Di(t,{pathname:f});return yT(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:ur([a,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:ur([a,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,n,r)}function hT(){let t=ST(),e=Zc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,null)}const pT=_.createElement(hT,null);class mT extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(wr.Provider,{value:this.props.routeContext},_.createElement(Mx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gT(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(Ea);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(wr.Provider,{value:e},r)}function yT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);c>=0||ie(!1),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,v=null;n&&(h=l&&d.route.id?l[d.route.id]:void 0,m=d.route.errorElement||pT,a&&(u<0&&f===0?(bT("route-fallback"),p=!0,v=null):u===f&&(p=!0,v=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),y=()=>{let x;return h?x=m:p?x=v:d.route.Component?x=_.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,_.createElement(gT,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?_.createElement(mT,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var Px=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Px||{}),pc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pc||{});function vT(t){let e=_.useContext(Ea);return e||ie(!1),e}function wT(t){let e=_.useContext(Om);return e||ie(!1),e}function xT(t){let e=_.useContext(wr);return e||ie(!1),e}function Rx(t){let e=xT(),n=e.matches[e.matches.length-1];return n.route.id||ie(!1),n.route.id}function ST(){var t;let e=_.useContext(Mx),n=wT(pc.UseRouteError),r=Rx(pc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kT(){let{router:t}=vT(Px.UseNavigateStable),e=Rx(pc.UseNavigateStable),n=_.useRef(!1);return Nx(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hc({fromRouteId:e},s)))},[t,e])}const Yy={};function bT(t,e,n){Yy[t]||(Yy[t]=!0)}function CT(t){return cT(t.context)}function ET(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Be.Pop,navigator:s,static:o=!1,future:l}=t;_a()&&ie(!1);let a=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:a,navigator:s,static:o,future:hc({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=Si(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=_.useMemo(()=>{let v=mr(c,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:h,key:p},navigationType:i}},[a,c,d,f,h,p,i]);return m==null?null:_.createElement(ki.Provider,{value:u},_.createElement(Mm.Provider,{children:n,value:m}))}new Promise(()=>{});function _T(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:_.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:_.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:_.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(this,arguments)}function Ax(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OT(t,e){return t.button===0&&(!e||e==="_self")&&!TT(t)}const MT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NT=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],PT="6";try{window.__reactRouterVersion=PT}catch{}function RT(t,e){return B_({basename:void 0,future:Ao({},void 0,{v7_prependBasename:!0}),history:d_({window:void 0}),hydrationData:AT(),routes:t,mapRouteProperties:_T,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function AT(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ao({},e,{errors:DT(e.errors)})),e}function DT(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new fc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const Dx=_.createContext({isTransitioning:!1}),IT=_.createContext(new Map),jT="startTransition",Xy=Zb[jT],LT="flushSync",Zy=c_[LT];function $T(t){Xy?Xy(t):t()}function cl(t){Zy?Zy(t):t()}let zT=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function FT(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=_.useState(n.state),[o,l]=_.useState(),[a,u]=_.useState({isTransitioning:!1}),[c,d]=_.useState(),[f,h]=_.useState(),[p,m]=_.useState(),v=_.useRef(new Map),{v7_startTransition:g}=r||{},y=_.useCallback(O=>{g?$T(O):O()},[g]),x=_.useCallback((O,P)=>{let{deletedFetchers:I,flushSync:ee,viewTransitionOpts:pe}=P;I.forEach(ze=>v.current.delete(ze)),O.fetchers.forEach((ze,xr)=>{ze.data!==void 0&&v.current.set(xr,ze.data)});let $e=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!pe||$e){ee?cl(()=>s(O)):y(()=>s(O));return}if(ee){cl(()=>{f&&(c&&c.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation})});let ze=n.window.document.startViewTransition(()=>{cl(()=>s(O))});ze.finished.finally(()=>{cl(()=>{d(void 0),h(void 0),l(void 0),u({isTransitioning:!1})})}),cl(()=>h(ze));return}f?(c&&c.resolve(),f.skipTransition(),m({state:O,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation})):(l(O),u({isTransitioning:!0,flushSync:!1,currentLocation:pe.currentLocation,nextLocation:pe.nextLocation}))},[n.window,f,c,v,y]);_.useLayoutEffect(()=>n.subscribe(x),[n,x]),_.useEffect(()=>{a.isTransitioning&&!a.flushSync&&d(new zT)},[a]),_.useEffect(()=>{if(c&&o&&n.window){let O=o,P=c.promise,I=n.window.document.startViewTransition(async()=>{y(()=>s(O)),await P});I.finished.finally(()=>{d(void 0),h(void 0),l(void 0),u({isTransitioning:!1})}),h(I)}},[y,o,c,n.window]),_.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,f,i.location,o]),_.useEffect(()=>{!a.isTransitioning&&p&&(l(p.state),u({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[a.isTransitioning,p]),_.useEffect(()=>{},[]);let C=_.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:O=>n.navigate(O),push:(O,P,I)=>n.navigate(O,{state:P,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(O,P,I)=>n.navigate(O,{replace:!0,state:P,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),T=n.basename||"/",S=_.useMemo(()=>({router:n,navigator:C,static:!1,basename:T}),[n,C,T]),N=_.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return _.createElement(_.Fragment,null,_.createElement(Ea.Provider,{value:S},_.createElement(Om.Provider,{value:i},_.createElement(IT.Provider,{value:v.current},_.createElement(Dx.Provider,{value:a},_.createElement(ET,{basename:T,location:i.location,navigationType:i.historyAction,navigator:C,future:N},i.initialized||n.future.v7_partialHydration?_.createElement(BT,{routes:n.routes,future:n.future,state:i}):e))))),null)}const BT=_.memo(UT);function UT(t){let{routes:e,future:n,state:r}=t;return fT(e,void 0,r,n)}const VT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gt=_.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:c,viewTransition:d}=e,f=Ax(e,MT),{basename:h}=_.useContext(ki),p,m=!1;if(typeof u=="string"&&HT.test(u)&&(p=u,VT))try{let x=new URL(window.location.href),C=u.startsWith("//")?new URL(x.protocol+u):new URL(u),T=mr(C.pathname,h);C.origin===x.origin&&T!=null?u=T+C.search+C.hash:m=!0}catch{}let v=lT(u,{relative:i}),g=qT(u,{replace:o,state:l,target:a,preventScrollReset:c,relative:i,viewTransition:d});function y(x){r&&r(x),x.defaultPrevented||g(x)}return _.createElement("a",Ao({},f,{href:p||v,onClick:m||s?r:y,ref:n,target:a}))}),Ix=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:a,viewTransition:u,children:c}=e,d=Ax(e,NT),f=ed(a,{relative:d.relative}),h=Wo(),p=_.useContext(Om),{navigator:m,basename:v}=_.useContext(ki),g=p!=null&&KT(f)&&u===!0,y=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,x=h.pathname,C=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(x=x.toLowerCase(),C=C?C.toLowerCase():null,y=y.toLowerCase()),C&&v&&(C=mr(C,v)||C);const T=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=x===y||!o&&x.startsWith(y)&&x.charAt(T)==="/",N=C!=null&&(C===y||!o&&C.startsWith(y)&&C.charAt(y.length)==="/"),O={isActive:S,isPending:N,isTransitioning:g},P=S?r:void 0,I;typeof s=="function"?I=s(O):I=[s,S?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let ee=typeof l=="function"?l(O):l;return _.createElement(Gt,Ao({},d,{"aria-current":P,className:I,ref:n,style:ee,to:a,viewTransition:u}),typeof c=="function"?c(O):c)});var Mh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mh||(Mh={}));var e0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(e0||(e0={}));function WT(t){let e=_.useContext(Ea);return e||ie(!1),e}function qT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=Nm(),u=Wo(),c=ed(t,{relative:o});return _.useCallback(d=>{if(OT(d,n)){d.preventDefault();let f=r!==void 0?r:hs(u)===hs(c);a(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,c,r,i,n,t,s,o,l])}function KT(t,e){e===void 0&&(e={});let n=_.useContext(Dx);n==null&&ie(!1);let{basename:r}=WT(Mh.useViewTransitionState),i=ed(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=mr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=mr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dc(i.pathname,o)!=null||dc(i.pathname,s)!=null}var jx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t0=Ce.createContext&&Ce.createContext(jx),JT=["attr","size","title"];function QT(t,e){if(t==null)return{};var n=GT(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GT(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mc.apply(this,arguments)}function n0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n0(Object(n),!0).forEach(function(r){YT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YT(t,e,n){return e=XT(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XT(t){var e=ZT(t,"string");return typeof e=="symbol"?e:e+""}function ZT(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lx(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,gc({key:n},e.attr),Lx(e.child)))}function We(t){return e=>Ce.createElement(eO,mc({attr:gc({},t.attr)},e),Lx(t.child))}function eO(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=QT(t,JT),l=i||n.size||"1em",a;return n.className&&(a=n.className),t.className&&(a=(a?a+" ":"")+t.className),Ce.createElement("svg",mc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:a,style:gc(gc({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),t.children)};return t0!==void 0?Ce.createElement(t0.Consumer,null,n=>e(n)):e(jx)}function tO(t){return We({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z"},child:[]}]})(t)}function nO(t){return We({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function rO(t){return We({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"},child:[]}]})(t)}function iO(t){return We({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(t)}function sO(t){return We({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM64 256c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H96c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"},child:[]}]})(t)}function oO(t){return We({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M413.5 237.5c-28.2 4.8-58.2-3.6-80-25.4l-38.1-38.1C280.4 159 272 138.8 272 117.6V105.5L192.3 62c-5.3-2.9-8.6-8.6-8.3-14.7s3.9-11.5 9.5-14l47.2-21C259.1 4.2 279 0 299.2 0h18.1c36.7 0 72 14 98.7 39.1l44.6 42c24.2 22.8 33.2 55.7 26.6 86L503 183l8-8c9.4-9.4 24.6-9.4 33.9 0l24 24c9.4 9.4 9.4 24.6 0 33.9l-88 88c-9.4 9.4-24.6 9.4-33.9 0l-24-24c-9.4-9.4-9.4-24.6 0-33.9l8-8-17.5-17.5zM27.4 377.1L260.9 182.6c3.5 4.9 7.5 9.6 11.8 14l38.1 38.1c6 6 12.4 11.2 19.2 15.7L134.9 484.6c-14.5 17.4-36 27.4-58.6 27.4C34.1 512 0 477.8 0 435.7c0-22.6 10.1-44.1 27.4-58.6z"},child:[]}]})(t)}const $x=[{id:1,title:"Inicio",href:"/"},{id:2,title:"Celulares",href:"/celulares"},{id:3,title:"Sobre Nosotros",href:"/nosotros"}],lO=[{id:1,title:"Facebook",href:"https://www.facebook.com",icon:w.jsx(tO,{})},{id:2,title:"Twitter",href:"https://www.twitter.com",icon:w.jsx(iO,{})},{id:3,title:"Instagram",href:"https://www.instagram.com",icon:w.jsx(nO,{})},{id:4,title:"Tiktok",href:"https://www.tiktok.com",icon:w.jsx(rO,{})}];function zx(t){return We({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},child:[]}]})(t)}function Fx(t){return We({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},child:[]}]})(t)}const aO="/assets/celare-CSywLSQy.jpg",uO=()=>w.jsxs(Gt,{to:"/",className:"text-2xl font-bold tracking-tighter transition-all",children:[w.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[w.jsx("img",{src:aO,alt:"Image",style:{width:"64px",height:"auto",borderRadius:"50%",objectFit:"cover",marginRight:"10px"}}),w.jsx("span",{children:"Celare"})]}),w.jsxs("p",{className:"flex text-4xl lg:hidden",children:[w.jsx("span",{className:"-skew-x-6",children:"C"}),w.jsx("span",{className:"text-cyan-600 skew-x-6",children:"L"})]})]}),r0=t=>{let e;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=c??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>a,subscribe:u=>(n.add(u),()=>n.delete(u))},a=e=t(r,i,l);return l},cO=t=>t?r0(t):r0,dO=t=>t;function fO(t,e=dO){const n=Ce.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Ce.useDebugValue(n),n}const hO=t=>{const e=cO(t),n=r=>fO(e,r);return Object.assign(n,e),n},Pm=t=>hO,i0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_kEY_SUPABASE:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvb3VkZHlhamZicnZlYmJ0Z2FyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA2ODI1NjAsImV4cCI6MjA0NjI1ODU2MH0.Ru78SP1yQXImPRxVhAcrv5qW4PUVdwaJscTAQCdk-pE",VITE_PROJECT_URL_SUPABASE:"https://uoouddyajfbrvebbtgar.supabase.co"},Nh=new Map,su=t=>{const e=Nh.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},pO=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Nh.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Nh.set(n.name,i),{type:"tracked",store:t,...i}},mO=(t,e={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:l,...a}=e;let u;try{u=(s??(i0?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:c,...d}=pO(l,u,a);let f=!0;i.setState=(m,v,g)=>{const y=n(m,v);if(!f)return y;const x=g===void 0?{type:o||"anonymous"}:typeof g=="string"?{type:g}:g;return l===void 0?(c==null||c.send(x,r()),y):(c==null||c.send({...x,type:`${l}/${x.type}`},{...su(a.name),[l]:i.getState()}),y)};const h=(...m)=>{const v=f;f=!1,n(...m),f=v},p=t(i.setState,r,i);if(d.type==="untracked"?c==null||c.init(p):(d.stores[d.store]=i,c==null||c.init(Object.fromEntries(Object.entries(d.stores).map(([m,v])=>[m,m===d.store?p:v.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let m=!1;const v=i.dispatch;i.dispatch=(...g)=>{(i0?"production":void 0)!=="production"&&g[0].type==="__setState"&&!m&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),m=!0),v(...g)}}return c.subscribe(m=>{var v;switch(m.type){case"ACTION":if(typeof m.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return rf(m.payload,g=>{if(g.type==="__setState"){if(l===void 0){h(g.state);return}Object.keys(g.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const y=g.state[l];if(y==null)return;JSON.stringify(i.getState())!==JSON.stringify(y)&&h(y);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(g)});case"DISPATCH":switch(m.payload.type){case"RESET":return h(p),l===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(su(a.name));case"COMMIT":if(l===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(su(a.name));case"ROLLBACK":return rf(m.state,g=>{if(l===void 0){h(g),c==null||c.init(i.getState());return}h(g[l]),c==null||c.init(su(a.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return rf(m.state,g=>{if(l===void 0){h(g);return}JSON.stringify(i.getState())!==JSON.stringify(g[l])&&h(g[l])});case"IMPORT_STATE":{const{nextLiftedState:g}=m.payload,y=(v=g.computedStates.slice(-1)[0])==null?void 0:v.state;if(!y)return;h(l===void 0?y:y[l]),c==null||c.send(null,g);return}case"PAUSE_RECORDING":return f=!f}return}}),p},Rm=mO,rf=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)},gO=t=>({isSheetOpen:!1,sheetContent:null,activeNavMobile:!1,openSheet:e=>{t({isSheetOpen:!0,sheetContent:e})},closeSheet:()=>{t({isSheetOpen:!1,sheetContent:null})},setActiveNavMobile:e=>{t({activeNavMobile:e})}}),gr=Pm()(Rm(gO)),yO=t=>({items:[],totalItemsInCart:0,totalAmount:0,addItem:e=>{t(n=>{const r=n.items.findIndex(l=>l.variantId===e.variantId);let i;r>=0?i=n.items.map((l,a)=>a===r?{...l,quantity:l.quantity+e.quantity}:l):i=[...n.items,e];const s=i.reduce((l,a)=>l+a.quantity,0),o=i.reduce((l,a)=>l+a.price*a.quantity,0);return{items:i,totalAmount:o,totalItemsInCart:s}})},removeItem:e=>{t(n=>{const r=n.items.filter(o=>o.variantId!==e),i=r.reduce((o,l)=>o+l.quantity,0),s=r.reduce((o,l)=>o+l.price*l.quantity,0);return{items:r,totalAmount:s,totalItemsInCart:i}})},updateQuantity:(e,n)=>{t(r=>{const i=r.items.map(l=>l.variantId===e?{...l,quantity:n}:l),s=i.reduce((l,a)=>l+a.quantity,0),o=i.reduce((l,a)=>l+a.price*a.quantity,0);return{items:i,totalAmount:o,totalItemsInCart:s}})},cleanCart:()=>{t({items:[],totalItemsInCart:0,totalAmount:0})}}),ai=Pm()(Rm(yO)),vO=()=>{const t=gr(r=>r.openSheet),e=ai(r=>r.totalItemsInCart),n=gr(r=>r.setActiveNavMobile);return w.jsxs("header",{className:"bg-white text-black py-4 flex items-center justify-between px-5 border-b border-slate-200 lg:px-12",children:[w.jsx(uO,{}),w.jsx("nav",{className:"space-x-5 hidden md:flex",children:$x.map(r=>w.jsx(Ix,{to:r.href,className:({isActive:i})=>`${i?"text-cyan-600 underline":""} transition-all duration-300 font-medium hover:text-cyan-600 hover:underline `,children:r.title},r.id))}),w.jsxs("div",{className:"flex gap-5 items-center",children:[w.jsx("button",{onClick:()=>t("search"),children:w.jsx(zx,{size:25})}),w.jsx("div",{className:"relative",children:w.jsx(Gt,{to:"/account",className:"border-2 border-slate-700 w-9 h-9 rounded-full grid place-items-center text-lg font-bold",children:"R"})}),w.jsxs("button",{className:"relative",onClick:()=>t("cart"),children:[w.jsx("span",{className:"absolute -bottom-2 -right-2 w-5 h-5 grid place-items-center bg-black text-white text-xs rounded-full",children:e}),w.jsx(Fx,{size:25})]})]}),w.jsx("button",{className:"md:hidden",onClick:()=>n(!0),children:w.jsx(sO,{size:25})})]})};function wO(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"},child:[]}]})(t)}function xO(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"},child:[]}]})(t)}const SO=()=>w.jsxs("footer",{className:"py-16 bg-gray-950 px-12 flex justify-between gap-10 text-slate-200 text-sm flex-wrap mt-10 md:flex-nowrap",children:[w.jsx(Gt,{to:"/",className:"text-2xl font-bold tracking-tighter transition-all text-white flex-1",children:"Celare"}),w.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[w.jsx("p",{className:"font-semibold uppercase tracking-tighter",children:"Suscrbete"}),w.jsx("p",{className:"text-xs font-medium",children:"Recibe promociones exclusivas"}),w.jsxs("div",{className:"border border-gray-800 flex items-center gap-2 px-3 py-2 rounded-full",children:[w.jsx("input",{type:"email",placeholder:"Correo Electrnico",className:"pl-2 bg-gray-950 text-slate-200 w-full focus:outline-none"}),w.jsx("button",{className:"text-slate-200",children:w.jsx(wO,{size:20})})]})]}),w.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[w.jsx("p",{className:"font-semibold uppercase tracking-tighter",children:"Polticas"}),w.jsxs("nav",{className:"flex flex-col gap-2 text-xs font-medium",children:[w.jsx(Gt,{to:"/celulares",children:"Productos"}),w.jsx(Gt,{to:"#",className:"text-slate-300 hover:text-white",children:"Polticas de privacidad"}),w.jsx(Gt,{to:"#",className:"text-slate-300 hover:text-white",children:"Trminos de uso"})]})]}),w.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[w.jsx("p",{className:"font-semibold uppercase tracking-tighter",children:"Sguenos"}),w.jsx("p",{className:"text-xs leading-6",children:"No te pierdas las novedades que CelularesBaratos tiene para ti."}),w.jsx("div",{className:"flex",children:lO.map(t=>w.jsx("a",{href:t.href,target:"_blank",rel:"noreferrer",className:"text-slate-300 border border-gray-8000 w-full h-full py-3.5 flex items-center justify-center transition-all hover:bg-white hover:text-gray-950",children:t.icon},t.id))})]})]}),kO=()=>w.jsxs("div",{className:"relative bg-gray-900 text-white",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-70 h-full",style:{backgroundImage:"url(/img/img-banner.jpg)"}}),w.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),w.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center py-20 px-4 text-center lg:py-40 lg:px-8",children:[w.jsx("h1",{className:"text-4xl font-bold mb-4 lg:text-6xl",children:"Los mejores celulares del 2024"}),w.jsx("p",{className:"text-lg mb-8 lg:text-2xl",children:"Descubre las ofertas exclusivas y las ltimas novedades en celulares"}),w.jsx(Gt,{to:"/celulares",className:"bg-gray-900 hover:bg-gray-950 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition duration-300 ease-in-out",children:"Ver celulares"})]})]}),bO=()=>w.jsxs("div",{className:"relative bg-gray-500 text-white py-20",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-70 h-full",style:{backgroundImage:"url(/img/background-newsletter.webp)"}}),w.jsx("div",{className:"container z-10 relative p-5 md:p-0",children:w.jsxs("div",{className:"w-full text-black bg-white p-12 space-y-5 md:w-[50%] lg:w-[40%]",children:[w.jsx("p",{className:"text-xs uppercase font-semibold",children:"Suscrbete a nuestro boletn y recibe promociones exclusivas"}),w.jsx("p",{className:"text-xs font-medium w-[80%] leading-5",children:"Introduce tu correo para recibir ofertas"}),w.jsxs("form",{className:"flex flex-col gap-5 xl:flex-row",children:[w.jsx("input",{type:"email",className:"border border-slate-200 focus:outline-none rounded-full py-3 px-5 w-full text-xs font-medium",placeholder:"Correo Electrnico"}),w.jsx("button",{className:"bg-black text-white font-semibold rounded-full uppercase tracking-wider py-3 text-xs xl:px-5",children:"Suscribirme"})]})]})})]});function Am(t){return We({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(t)}function CO(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11.0049 2L18.3032 4.28071C18.7206 4.41117 19.0049 4.79781 19.0049 5.23519V7H21.0049C21.5572 7 22.0049 7.44772 22.0049 8V16C22.0049 16.5523 21.5572 17 21.0049 17L17.7848 17.0011C17.3982 17.5108 16.9276 17.9618 16.3849 18.3318L11.0049 22L5.62486 18.3318C3.98563 17.2141 3.00488 15.3584 3.00488 13.3744V5.23519C3.00488 4.79781 3.28913 4.41117 3.70661 4.28071L11.0049 2ZM11.0049 4.094L5.00488 5.97V13.3744C5.00488 14.6193 5.58406 15.7884 6.56329 16.5428L6.75154 16.6793L11.0049 19.579L14.7869 17H10.0049C9.4526 17 9.00488 16.5523 9.00488 16V8C9.00488 7.44772 9.4526 7 10.0049 7H17.0049V5.97L11.0049 4.094ZM11.0049 12V15H20.0049V12H11.0049ZM11.0049 10H20.0049V9H11.0049V10Z"},child:[]}]})(t)}function Bx(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]}]})(t)}function Ux(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"M12 5v14"},child:[]}]})(t)}const td=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Ph=t=>t.map(e=>{const n=e.variants.reduce((i,s)=>{const o=i.find(l=>l.color===s.color);return o?o.price=Math.min(o.price,s.price):i.push({color:s.color,price:s.price,name:s.color_name}),i},[]),r=Math.min(...n.map(i=>i.price));return{...e,price:r,colors:n.map(({name:i,color:s})=>({name:i,color:s})),variants:e.variants}}),EO=({item:t})=>{const e=ai(s=>s.removeItem),n=ai(s=>s.updateQuantity),r=()=>{n(t.variantId,t.quantity+1)},i=()=>{t.quantity>1&&n(t.variantId,t.quantity-1)};return w.jsxs("li",{className:"flex justify-between items-center gap-5",children:[w.jsx("div",{className:"flex",children:w.jsx("img",{src:t.image,alt:t.name,className:"w-20 h-20 object-contain"})}),w.jsxs("div",{className:"flex-1 space-y-3",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("p",{className:"font-semibold",children:t.name}),w.jsx("p",{className:"text-sm font-medium text-gray-600 mt-1",children:td(t.price)})]}),w.jsx("div",{className:"flex gap-3",children:w.jsxs("p",{className:"text-[13px] text-gray-600",children:[t.storage," / ",t.color]})}),w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"flex items-center gap-5 px-2 py-1 border border-slate-200 w-fit rounded-full",children:[w.jsx("button",{onClick:i,disabled:t.quantity===1,children:w.jsx(Bx,{size:15})}),w.jsx("span",{className:"text-slate-500 text-sm",children:t.quantity}),w.jsx("button",{onClick:r,children:w.jsx(Ux,{size:15})})]}),w.jsx("button",{className:"underline font-medium text-[10px]",onClick:()=>e(t.variantId),children:"Eliminar"})]})]})]})},_O=()=>{const t=gr(i=>i.closeSheet),e=ai(i=>i.items),n=ai(i=>i.cleanCart),r=ai(i=>i.totalItemsInCart);return w.jsxs("div",{className:"flex flex-col h-full",children:[w.jsxs("div",{className:"px-5 py-7 flex justify-between items-center border-b border-slate-200",children:[w.jsxs("span",{className:"flex gap-3 items-center font-semibold",children:[w.jsx(Fx,{size:20}),r," artculos"]}),w.jsx("button",{onClick:t,children:w.jsx(Am,{size:25,className:"text-black"})})]}),r>0?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"p-7 overflow-auto flex-1",children:w.jsx("ul",{className:"space-y-9",children:e.map(i=>w.jsx(EO,{item:i},i.variantId))})}),w.jsxs("div",{className:"mt-4 p-7",children:[w.jsxs(Gt,{to:"/checkout",className:"w-full bg-black text-white py-3.5 rounded-full flex items-center justify-center gap-3",children:[w.jsx(CO,{size:24}),"Continuar con la compra"]}),w.jsx("button",{className:"mt-3 w-full text-black border border-black rounded-full py-3",onClick:n,children:"Limpiar Carrito"})]})]}):w.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-7",children:[w.jsx("p",{className:"text-sm font-medium tracking-tight",children:"Su carro esta vaco"}),w.jsx(Gt,{to:"/celulares",className:"py-4 bg-black rounded-full text-white px-7 text-xs uppercase tracking-widest font-semibold",onClick:t,children:"Empezar a comprar"})]})]})},TO="modulepreload",OO=function(t){return"/"+t},s0={},Do=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(a=>{if(a=OO(a),a in s0)return;s0[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":TO,u||(d.as="script"),d.crossOrigin="",d.href=a,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},MO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Do(async()=>{const{default:r}=await Promise.resolve().then(()=>qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Dm extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class NO extends Dm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class PO extends Dm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class RO extends Dm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rh||(Rh={}));var AO=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class DO{constructor(e,{headers:n={},customFetch:r,region:i=Rh.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=MO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return AO(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let l={},{region:a}=n;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:u}).catch(p=>{throw new NO(p)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new PO(c);if(!c.ok)throw new RO(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield c.json():f==="application/octet-stream"?h=yield c.blob():f==="text/event-stream"?h=c:f==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var jt={},Im={},nd={},Ta={},rd={},id={},IO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Io=IO();const jO=Io.fetch,Vx=Io.fetch.bind(Io),Hx=Io.Headers,LO=Io.Request,$O=Io.Response,qo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hx,Request:LO,Response:$O,default:Vx,fetch:jO},Symbol.toStringTag,{value:"Module"})),zO=Lb(qo);var sd={};Object.defineProperty(sd,"__esModule",{value:!0});class FO extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}sd.default=FO;var Wx=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(id,"__esModule",{value:!0});const BO=Wx(zO),UO=Wx(sd);let VO=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=BO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,a;let u=null,c=null,d=null,f=s.status,h=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=g:c=JSON.parse(g))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await s.text();try{u=JSON.parse(m),Array.isArray(u)&&s.status===404&&(c=[],u=null,f=200,h="OK")}catch{s.status===404&&m===""?(f=204,h="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("0 rows"))&&(u=null,f=200,h="OK"),u&&this.shouldThrowOnError)throw new UO.default(u)}return{error:u,data:c,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,l,a;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}};id.default=VO;var HO=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rd,"__esModule",{value:!0});const WO=HO(id);let qO=class extends WO.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rd.default=qO;var KO=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ta,"__esModule",{value:!0});const JO=KO(rd);let QO=class extends JO.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Ta.default=QO;var GO=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nd,"__esModule",{value:!0});const dl=GO(Ta);let YO=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new dl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new dl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new dl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new dl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};nd.default=YO;var od={},ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.version=void 0;ld.version="0.0.0-automated";Object.defineProperty(od,"__esModule",{value:!0});od.DEFAULT_HEADERS=void 0;const XO=ld;od.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${XO.version}`};var qx=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Im,"__esModule",{value:!0});const ZO=qx(nd),eM=qx(Ta),tM=od;let nM=class Kx{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},tM.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new ZO.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{l.searchParams.append(c,d)})):(o="POST",a=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new eM.default({method:o,url:l,headers:u,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};Im.default=nM;var Ko=mn&&mn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jt,"__esModule",{value:!0});jt.PostgrestError=jt.PostgrestBuilder=jt.PostgrestTransformBuilder=jt.PostgrestFilterBuilder=jt.PostgrestQueryBuilder=jt.PostgrestClient=void 0;const Jx=Ko(Im);jt.PostgrestClient=Jx.default;const Qx=Ko(nd);jt.PostgrestQueryBuilder=Qx.default;const Gx=Ko(Ta);jt.PostgrestFilterBuilder=Gx.default;const Yx=Ko(rd);jt.PostgrestTransformBuilder=Yx.default;const Xx=Ko(id);jt.PostgrestBuilder=Xx.default;const Zx=Ko(sd);jt.PostgrestError=Zx.default;var rM=jt.default={PostgrestClient:Jx.default,PostgrestQueryBuilder:Qx.default,PostgrestFilterBuilder:Gx.default,PostgrestTransformBuilder:Yx.default,PostgrestBuilder:Xx.default,PostgrestError:Zx.default};const{PostgrestClient:iM,PostgrestQueryBuilder:t3,PostgrestFilterBuilder:n3,PostgrestTransformBuilder:r3,PostgrestBuilder:i3}=rM,sM="2.10.7",oM={"X-Client-Info":`realtime-js/${sM}`},lM="1.0.0",eS=1e4,aM=1e3;var ro;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ro||(ro={}));var Ht;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ht||(Ht={}));var En;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(En||(En={}));var Ah;(function(t){t.websocket="websocket"})(Ah||(Ah={}));var ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ji||(ji={}));class uM{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+i));o=o+i;const a=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class tS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xe||(xe={}));const o0=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=cM(o,t,e,i),s),{})},cM=(t,e,n,r)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?nS(s,o):Dh(o)},nS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return pM(e,n)}switch(t){case xe.bool:return dM(e);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return fM(e);case xe.json:case xe.jsonb:return hM(e);case xe.timestamp:return mM(e);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return Dh(e);default:return Dh(e)}},Dh=t=>t,dM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},pM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>nS(e,l))}return t},mM=t=>typeof t=="string"?t.replace(" ","T"):t,rS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class sf{constructor(e,n,r={},i=eS){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var l0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(l0||(l0={}));class Al{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Al.syncState(this.state,i,s,o),this.pendingDiffs.forEach(a=>{this.state=Al.syncDiff(this.state,a,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Al.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(s,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(v=>v.presence_ref),h=d.map(v=>v.presence_ref),p=c.filter(v=>h.indexOf(v.presence_ref)<0),m=d.filter(v=>f.indexOf(v.presence_ref)<0);p.length>0&&(l[u]=p),m.length>0&&(a[u]=m)}else l[u]=c}),this.syncDiff(s,{joins:l,leaves:a},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const d=e[l].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);e[l].unshift(...f)}r(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[l]=u,i(l,u,a),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var a0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(a0||(a0={}));var u0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(u0||(u0={}));var c0;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(c0||(c0={}));class jm{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sf(this,En.join,this.params,this.timeout),this.rejoinTimer=new tS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(En.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Al(this),this.broadcastEndpointURL=rS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:c})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<h;m++){const v=f[m],{filter:{event:g,schema:y,table:x,filter:C}}=v,T=c&&c[m];if(T&&T.event===g&&T.schema===y&&T.table===x&&T.filter===C)p.push(Object.assign(Object.assign({},v),{id:T.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const a=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=a.body)===null||i===void 0?void 0:i.cancel()),a.ok?"ok":"error"}catch(a){return a.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,a;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ht.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(En.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new sf(this,En.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new sf(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=En;if(r&&[l,a,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,m,v;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(m=h.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var p,m,v,g,y,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const C=h.id,T=(p=h.filter)===null||p===void 0?void 0:p.event;return C&&((m=n.ids)===null||m===void 0?void 0:m.includes(C))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const C=(y=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:v,commit_timestamp:g,type:y,errors:x}=p;f=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:g,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&jm.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(En.close,{},e)}_onError(e){this._on(En.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=o0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=o0(e.columns,e.old_record)),n}}const gM=()=>{},yM=typeof WebSocket<"u",vM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wM{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=oM,this.params={},this.timeout=eS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=gM,this.conn=null,this.sendBuffer=[],this.serializer=new uM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>Do(async()=>{const{default:a}=await Promise.resolve().then(()=>qo);return{default:a}},void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Ah.websocket}`,this.httpEndpoint=rS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(yM){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new xM(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Do(async()=>{const{default:e}=await import("./browser-BTBRPdKM.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ro.connecting:return ji.Connecting;case ro.open:return ji.Open;case ro.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}channel(e,n={config:{}}){const r=new jm(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(En.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lM}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(En.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(aM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([vM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class xM{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ro.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Lm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class SM extends Lm{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ih extends Lm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var kM=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const iS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Do(async()=>{const{default:r}=await Promise.resolve().then(()=>qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},bM=()=>kM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Do(()=>Promise.resolve().then(()=>qo),void 0)).Response:Response}),jh=t=>{if(Array.isArray(t))return t.map(n=>jh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=jh(r)}),e};var xs=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const of=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CM=(t,e,n)=>xs(void 0,void 0,void 0,function*(){const r=yield bM();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new SM(of(i),t.status||500))}).catch(i=>{e(new Ih(of(i),i))}):e(new Ih(of(t),t))}),EM=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Oa(t,e,n,r,i,s){return xs(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,EM(e,r,i,s)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>CM(a,l,r))})})}function yc(t,e,n,r){return xs(this,void 0,void 0,function*(){return Oa(t,"GET",e,n,r)})}function Rr(t,e,n,r,i){return xs(this,void 0,void 0,function*(){return Oa(t,"POST",e,r,i,n)})}function _M(t,e,n,r,i){return xs(this,void 0,void 0,function*(){return Oa(t,"PUT",e,r,i,n)})}function TM(t,e,n,r){return xs(this,void 0,void 0,function*(){return Oa(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function sS(t,e,n,r,i){return xs(this,void 0,void 0,function*(){return Oa(t,"DELETE",e,r,i,n)})}var Rt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const OM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class MM{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=iS(i)}uploadOrUpdate(e,n,r,i){return Rt(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},d0),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(Qe(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Rt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const u=Object.assign({upsert:d0.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl)):(a=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:c}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Qe(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new Lm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}update(e,n,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Rt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Rr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Rt(this,void 0,void 0,function*(){try{const i=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}download(e,n){return Rt(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield yc(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Qe(l))return{data:null,error:l};throw l}})}info(e){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield yc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:jh(r),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return Rt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield TM(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Qe(r)&&r instanceof Ih){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&i.push(a);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield sS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}list(e,n,r){return Rt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},OM),n),{prefix:e||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const NM="2.7.1",PM={"X-Client-Info":`storage-js/${NM}`};var Ns=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class RM{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},PM),n),this.fetch=iS(r)}listBuckets(){return Ns(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Qe(e))return{data:null,error:e};throw e}})}getBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ns(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ns(this,void 0,void 0,function*(){try{return{data:yield _M(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ns(this,void 0,void 0,function*(){try{return{data:yield sS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Qe(n))return{data:null,error:n};throw n}})}}class AM extends RM{constructor(e,n={},r){super(e,n,r)}from(e){return new MM(this.url,this.headers,e,this.fetch)}}const DM="2.46.1";let wl="";typeof Deno<"u"?wl="deno":typeof document<"u"?wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wl="react-native":wl="node";const IM={"X-Client-Info":`supabase-js-${wl}/${DM}`},jM={headers:IM},LM={schema:"public"},$M={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zM={};var FM=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const BM=t=>{let e;return t?e=t:typeof fetch>"u"?e=Vx:e=fetch,(...n)=>e(...n)},UM=()=>typeof Headers>"u"?Hx:Headers,VM=(t,e,n)=>{const r=BM(n),i=UM();return(s,o)=>FM(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var HM=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};function WM(t){return t.replace(/\/$/,"")}function qM(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:l,realtime:a,global:u}=e,c={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},a),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>HM(this,void 0,void 0,function*(){return""})};return t.accessToken?c.accessToken=t.accessToken:delete c.accessToken,c}const oS="2.65.1",KM="http://localhost:9999",JM="supabase.auth.token",QM={"X-Client-Info":`gotrue-js/${oS}`},f0=10,Lh="X-Supabase-Api-Version",lS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function GM(t){return Math.round(Date.now()/1e3)+t}function YM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const xn=()=>typeof document<"u",Ni={tested:!1,writable:!1},Dl=()=>{if(!xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function lf(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const aS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Do(async()=>{const{default:r}=await Promise.resolve().then(()=>qo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ou=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},lu=async(t,e)=>{await t.removeItem(e)};function ZM(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,l,a,u,c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)o=e.indexOf(t.charAt(c++)),l=e.indexOf(t.charAt(c++)),a=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),r=o<<2|l>>4,i=(l&15)<<4|a>>2,s=(a&3)<<6|u,n=n+String.fromCharCode(r),a!=64&&i!=0&&(n=n+String.fromCharCode(i)),u!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class ad{constructor(){this.promise=new ad.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ad.promiseConstructor=Promise;function h0(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(ZM(r))}async function eN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tN(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function nN(t){return("0"+t.toString(16)).substr(-2)}function rN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,nN).join("")}async function iN(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function sN(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await iN(t);return sN(n)}async function Ps(t,e,n=!1){const r=rN();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await uS(t,`${e}-code-verifier`,i);const s=await oN(r);return[s,r===s?"plain":"s256"]}const lN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aN(t){const e=t.headers.get(Lh);if(!e||!e.match(lN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class $m extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class uN extends $m{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cN(t){return ne(t)&&t.name==="AuthApiError"}class cS extends $m{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ss extends $m{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class _r extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dN(t){return ne(t)&&t.name==="AuthSessionMissingError"}class af extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class au extends Ss{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class uu extends Ss{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class p0 extends Ss{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $h extends Ss{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function uf(t){return ne(t)&&t.name==="AuthRetryableFetchError"}class m0 extends Ss{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var fN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ai=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hN=[502,503,504];async function g0(t){var e;if(!XM(t))throw new $h(Ai(t),0);if(hN.includes(t.status))throw new $h(Ai(t),t.status);let n;try{n=await t.json()}catch(s){throw new cS(Ai(s),s)}let r;const i=aN(t);if(i&&i.getTime()>=lS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new m0(Ai(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new _r}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new m0(Ai(n),t.status,n.weak_password.reasons);throw new uN(Ai(n),t.status||500,r)}const pN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ae(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Lh]||(s[Lh]=lS["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await mN(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function mN(t,e,n,r,i,s){const o=pN(e,r,i,s);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new $h(Ai(a),0)}if(l.ok||await g0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await g0(a)}}function Tr(t){var e;let n=null;wN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=GM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function y0(t){const e=Tr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gN(t){return{data:t,error:null}}function yN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=fN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function vN(t){return t}function wN(t){return t.access_token&&t.refresh_token&&t.expires_in}var xN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class SN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=aS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lr})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xN(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yN,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lr})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},c=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:vN});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lr})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Lr})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lr})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}}const kN={getItem:t=>Dl()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Dl()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Dl()&&globalThis.localStorage.removeItem(t)}};function v0(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function bN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Rs={debug:!!(globalThis&&Dl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class CN extends dS{}async function EN(t,e,n){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new CN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Rs.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}bN();const _N={url:KM,storageKey:JM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},fl=30*1e3,w0=3;async function x0(t,e,n){return await n()}class ra{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ra.nextInstanceID,ra.nextInstanceID+=1,this.instanceID>0&&xn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},_N),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new SN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=aS(i.fetch),this.lock=i.lock||x0,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=EN:this.lock=x0,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Dl()?this.storage=kN:(this.memoryStorage={},this.storage=v0(this.memoryStorage)):(this.memoryStorage={},this.storage=v0(this.memoryStorage)),xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=xn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.code)==="identity_already_exists"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ne(e)?{error:e}:{error:new cS("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Tr}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:c,password:d,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ps(this.storage,this.storageKey)),s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:Tr})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tr})}else throw new au("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:l}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else if("phone"in e){const{phone:s,password:o,options:l}=e;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else throw new au("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new af}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await ou(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tr});if(await lu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new af}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ne(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tr}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new af}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:l,options:a}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Ps(this.storage,this.storageKey));const{error:d}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new au("You must provide either an email or phone number.")}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Tr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,u=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Ps(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:gN})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new _r;const{error:i}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:l}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new au("You must provide either an email or phone number and a type")}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ou(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lr}):await this._useSession(async n=>{var r,i,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _r}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Lr})})}catch(n){if(ne(n))return dN(n)&&(await this._removeSession(),await lu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new _r;const o=i.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Ps(this.storage,this.storageKey));const{data:u,error:c}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Lr});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return h0(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _r;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=h0(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new _r;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!xn())throw new uu("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new uu("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new p0("Not a valid PKCE flow url.");const n=lf(window.location.href);if(e){if(!n.code)throw new p0("No code detected.");const{data:y,error:x}=await this._exchangeCodeForSession(n.code);if(x)throw x;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new uu(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:a,token_type:u}=n;if(!s||!l||!o||!u)throw new uu("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(l);let f=c+d;a&&(f=parseInt(a));const h=f-c;h*1e3<=fl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:m,error:v}=await this._getUser(s);if(v)throw v;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:n.type},error:null}}catch(n){if(ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=lf(window.location.href);return!!(xn()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=lf(window.location.href),n=await ou(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(cN(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await lu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=YM(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ps(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,l,a,u,c;const{data:d,error:f}=s;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return xn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ne(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await tN(async i=>(i>0&&await eN(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&uf(s)&&Date.now()+o-r<fl})}catch(r){if(this._debug(n,"error",r),ne(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),xn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ou(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+f0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${f0}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),uf(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new _r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ad;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new _r;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),ne(s)){const o={session:null,error:s};return uf(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){s.push(a)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await uS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await lu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${fl}ms, refresh threshold is ${w0} ticks`),i<=w0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ps(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:u}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:c},error:null}}))}}ra.nextInstanceID=0;const TN=ra;class ON extends TN{constructor(e){super(e)}}var MN=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class NN{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=WM(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:LM,realtime:zM,auth:Object.assign(Object.assign({},$M),{storageKey:a}),global:jM},c=qM(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=VM(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new iM(`${l}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new DO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new AM(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return MN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:l,debug:a},u,c){var d;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ON({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:l,debug:a,fetch:c,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new wM(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PN=(t,e,n)=>new NN(t,e,n),RN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvb3VkZHlhamZicnZlYmJ0Z2FyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA2ODI1NjAsImV4cCI6MjA0NjI1ODU2MH0.Ru78SP1yQXImPRxVhAcrv5qW4PUVdwaJscTAQCdk-pE",AN="https://uoouddyajfbrvebbtgar.supabase.co",Ma=PN(AN,RN),DN=async({page:t=1,brands:e=[]})=>{const r=(t-1)*10,i=r+10-1;let s=Ma.from("products").select("*, variants(*)",{count:"exact"}).order("created_at",{ascending:!1}).range(r,i);e.length>0&&(s=s.in("brand",e));const{data:o,error:l,count:a}=await s;if(l)throw console.log(l.message),new Error(l.message);return{data:o,count:a}},IN=async()=>{const{data:t,error:e}=await Ma.from("products").select("*, variants(*)").order("created_at",{ascending:!1}).limit(4);if(e)throw console.log(e.message),new Error(e.message);return t},jN=async()=>{const{data:t,error:e}=await Ma.from("products").select("*, variants(*)").limit(20);if(e)throw console.log(e.message),new Error(e.message);return t.sort(()=>.5-Math.random()).slice(0,4)},LN=async t=>{const{data:e,error:n}=await Ma.from("products").select("*, variants(*)").eq("slug",t).single();if(n)throw console.log(n.message),new Error(n.message);return e},$N=async t=>{const{data:e,error:n}=await Ma.from("products").select("*, variants(*)").ilike("name",`%${t}%`);if(n)throw console.log(n.message),new Error(n.message);return e},zN=()=>{const[t,e]=_.useState(""),[n,r]=_.useState([]),i=gr(l=>l.closeSheet),s=Nm(),o=async l=>{if(l.preventDefault(),t.trim()){const a=await $N(t);r(a)}};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"py-5 px-7 flex gap-10 items-center border-b border-slate-200",children:[w.jsxs("form",{className:"flex gap-3 items-center flex-1",onSubmit:o,children:[w.jsx(zx,{size:22}),w.jsx("input",{type:"text",placeholder:"Qu busca?",className:"outline-none w-full text-sm ",value:t,onChange:l=>e(l.target.value)})]}),w.jsx("button",{onClick:i,children:w.jsx(Am,{size:25,className:"text-black"})})]}),w.jsx("div",{className:"p-5",children:n.length>0?w.jsx("ul",{children:n.map(l=>w.jsx("li",{className:"py-2 group",children:w.jsxs("button",{className:"flex items-center gap-3",onClick:()=>{s(`/celulares/${l.slug}`),i()},children:[w.jsx("img",{src:l.images[0],alt:l.name,className:"h-20 w-20 object-contain p-3"}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsx("p",{className:"text-sm font-semibold group-hover:underline",children:l.name}),w.jsxs("p",{className:"text-[13px] text-gray-600",children:[l.variants[0].storage," /"," ",l.variants[0].color_name]}),w.jsx("p",{className:"text-sm font-medium text-gray-600",children:td(l.variants[0].price)})]})]})},l.id))}):w.jsx("p",{className:"text-sm text-gray-600",children:"No se encontraron resultados"})})]})},FN=()=>{const t=gr(i=>i.sheetContent),e=gr(i=>i.closeSheet),n=_.useRef(null);_.useEffect(()=>{document.body.style.overflow="hidden";const i=s=>{n.current&&!n.current.contains(s.target)&&e()};return document.addEventListener("mousedown",i),()=>{document.body.style.overflow="unset",document.removeEventListener("mousedown",i)}},[e]);const r=()=>{switch(t){case"cart":return w.jsx(_O,{});case"search":return w.jsx(zN,{});default:return null}};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end animate-fade-in",children:w.jsx("div",{ref:n,className:"bg-white text-black h-screen w-[500px] shadow-lg animate-slide-in",children:r()})})},BN=()=>{const t=gr(e=>e.setActiveNavMobile);return w.jsxs("div",{className:"bg-white text-black h-screen w-full shadow-lg animate-slide-in-left fixed z-50 flex justify-center py-32",children:[w.jsx("button",{className:"absolute top-5 right-5",onClick:()=>t(!1),children:w.jsx(Am,{size:30,className:"text-black"})}),w.jsxs("div",{className:"flex flex-col gap-20",children:[w.jsx(Gt,{to:"/",className:"text-4xl font-bold tracking-tighter transition-all",onClick:()=>t(!1),children:w.jsxs("p",{children:["Celulares",w.jsx("span",{className:"text-cyan-600",children:"Baratos"})]})}),w.jsx("nav",{className:"flex flex-col items-center gap-5",children:$x.map(e=>w.jsx(Ix,{to:e.href,className:({isActive:n})=>`
                                ${n?"text-cyan-600 underline":""} transition-all duration-300 font-semibold text-xl hover:text-cyan-600 hover:underline
                            `,onClick:()=>t(!1),children:e.title},e.id))})]})]})},UN=()=>{const{pathname:t}=Wo(),e=gr(r=>r.isSheetOpen),n=gr(r=>r.activeNavMobile);return w.jsxs("div",{className:"h-screen flex flex-col font-montserrat",children:[w.jsx(vO,{}),t==="/"&&w.jsx(kO,{}),w.jsx("main",{className:"container my-8 flex-1",children:w.jsx(CT,{})}),t==="/"&&w.jsx(bO,{}),e&&w.jsx(FN,{}),n&&w.jsx(BN,{}),w.jsx(SO,{})]})},VN=[{image:"/img/brands/apple-logo.webp",alt:"Apple"},{image:"/img/brands/samsung-logo.webp",alt:"Samsung"},{image:"/img/brands/xiaomi-logo.webp",alt:"Xiaomi"},{image:"/img/brands/realme-logo.webp",alt:"Realme"},{image:"/img/brands/huawei-logo.png",alt:"Huawei"},{image:"/img/brands/honor-logo.png",alt:"Honor"}],HN=()=>w.jsxs("div",{className:"flex flex-col items-center gap-3 pt-16 pb-12",children:[w.jsx("h2",{className:"font-bold text-2xl",children:"Marcas que disponemos"}),w.jsx("p",{className:"w-2/3 text-center text-sm md:text-base",children:"Tenemos lo ms moderno en tecnologa y los ltimos modelos de celulares disponibles"}),w.jsx("div",{className:"grid grid-cols-3 gap-6 mt-8 items-center md:grid-cols-6",children:VN.map((t,e)=>w.jsx("div",{children:w.jsx("img",{src:t.image,alt:t.alt})},e))})]});function WN(t){return We({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.93 2.31a41.401 41.401 0 0 1 10.14 0C16.194 2.45 17 3.414 17 4.517V17.25a.75.75 0 0 1-1.075.676l-2.8-1.344-2.8 1.344a.75.75 0 0 1-.65 0l-2.8-1.344-2.8 1.344A.75.75 0 0 1 3 17.25V4.517c0-1.103.806-2.068 1.93-2.207Zm4.822 3.997a.75.75 0 1 0-1.004-1.114l-2.5 2.25a.75.75 0 0 0 0 1.114l2.5 2.25a.75.75 0 0 0 1.004-1.114L8.704 8.75h1.921a1.875 1.875 0 0 1 0 3.75.75.75 0 0 0 0 1.5 3.375 3.375 0 1 0 0-6.75h-1.92l1.047-.943Z",clipRule:"evenodd"},child:[]}]})(t)}function qN(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9 1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"},child:[]}]})(t)}const KN=()=>w.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-6 mb-16 lg:grid-cols-4 lg:gap-5",children:[w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx(qN,{size:40,className:"text-slate-600"}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"font-semibold",children:"Envo gratis"}),w.jsx("p",{className:"text-sm",children:"En todos nuestros productos"})]})]}),w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx(WN,{size:40,className:"text-slate-600"}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"font-semibold",children:"Devoluciones"}),w.jsx("p",{className:"text-sm",children:"Devuelve el equipo si no te satisface la compra dentro de 72 horas"})]})]}),w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx(oO,{size:40,className:"text-slate-600"}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"font-semibold",children:"Soporte 24/7"}),w.jsx("p",{className:"text-sm",children:"Soporte tcnico en cualquier momento"})]})]}),w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx(xO,{size:40,className:"text-slate-600"}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"font-semibold",children:"Garanta"}),w.jsx("p",{className:"text-sm",children:"Garanta de 1 ao en todos los equipos"})]})]})]});function JN(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}const QN=t=>{const e=t.toLowerCase();return e==="nuevo"?"bg-blue-500":e==="agotado"?"bg-black":"bg-gray-500"},fS=({contentTag:t})=>w.jsx("div",{className:`text-white w-fit px-2 ${QN(t)}`,children:w.jsx("p",{className:"uppercase text-xs font-medium",children:t})});let GN={data:""},YN=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||GN,XN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ZN=/\/\*[^]*?\*\/|  +/g,S0=/\n+/g,$r=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?$r(o,s):s+"{"+$r(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=$r(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,a=>/&/.test(a)?a.replace(/&/g,l):l?l+" "+a:a)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=$r.p?$r.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},er={},hS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+hS(t[n]);return e}return t},eP=(t,e,n,r,i)=>{let s=hS(t),o=er[s]||(er[s]=(a=>{let u=0,c=11;for(;u<a.length;)c=101*c+a.charCodeAt(u++)>>>0;return"go"+c})(s));if(!er[o]){let a=s!==t?t:(u=>{let c,d,f=[{}];for(;c=XN.exec(u.replace(ZN,""));)c[4]?f.shift():c[3]?(d=c[3].replace(S0," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][c[1]]=c[2].replace(S0," ").trim();return f[0]})(t);er[o]=$r(i?{["@keyframes "+o]:a}:a,n?"":"."+o)}let l=n&&er.g?er.g:null;return n&&(er.g=er[o]),((a,u,c,d)=>{d?u.data=u.data.replace(d,a):u.data.indexOf(a)===-1&&(u.data=c?a+u.data:u.data+a)})(er[o],e,r,l),o},tP=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),a=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=a?"."+a:l&&typeof l=="object"?l.props?"":$r(l,""):l===!1?"":l}return r+i+(o??"")},"");function ud(t){let e=this||{},n=t.call?t(e.p):t;return eP(n.unshift?n.raw?tP(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,YN(e.target),e.g,e.o,e.k)}let pS,zh,Fh;ud.bind({g:1});let yr=ud.bind({k:1});function nP(t,e,n,r){$r.p=e,pS=t,zh=n,Fh=r}function bi(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),a=l.className||i.className;n.p=Object.assign({theme:zh&&zh()},l),n.o=/ *go\d+/.test(a),l.className=ud.apply(n,r)+(a?" "+a:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),Fh&&u[0]&&Fh(l),pS(u,l)}return i}}var rP=t=>typeof t=="function",vc=(t,e)=>rP(t)?t(e):t,iP=(()=>{let t=0;return()=>(++t).toString()})(),mS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),sP=20,Ru=new Map,oP=1e3,k0=t=>{if(Ru.has(t))return;let e=setTimeout(()=>{Ru.delete(t),ks({type:4,toastId:t})},oP);Ru.set(t,e)},lP=t=>{let e=Ru.get(t);e&&clearTimeout(e)},Bh=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,sP)};case 1:return e.toast.id&&lP(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?Bh(t,{type:1,toast:n}):Bh(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?k0(r):t.toasts.forEach(s=>{k0(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Au=[],Du={toasts:[],pausedAt:void 0},ks=t=>{Du=Bh(Du,t),Au.forEach(e=>{e(Du)})},aP={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},uP=(t={})=>{let[e,n]=_.useState(Du);_.useEffect(()=>(Au.push(n),()=>{let i=Au.indexOf(n);i>-1&&Au.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o;return{...t,...t[i.type],...i,duration:i.duration||((s=t[i.type])==null?void 0:s.duration)||(t==null?void 0:t.duration)||aP[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:r}},cP=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||iP()}),Na=t=>(e,n)=>{let r=cP(e,t,n);return ks({type:2,toast:r}),r.id},Yt=(t,e)=>Na("blank")(t,e);Yt.error=Na("error");Yt.success=Na("success");Yt.loading=Na("loading");Yt.custom=Na("custom");Yt.dismiss=t=>{ks({type:3,toastId:t})};Yt.remove=t=>ks({type:4,toastId:t});Yt.promise=(t,e,n)=>{let r=Yt.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(Yt.success(vc(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Yt.error(vc(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var dP=(t,e)=>{ks({type:1,toast:{id:t,height:e}})},fP=()=>{ks({type:5,time:Date.now()})},hP=t=>{let{toasts:e,pausedAt:n}=uP(t);_.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let a=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(a<0){l.visible&&Yt.dismiss(l.id);return}return setTimeout(()=>Yt.dismiss(l.id),a)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=_.useCallback(()=>{n&&ks({type:6,time:Date.now()})},[n]),i=_.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:a=8,defaultPosition:u}=o||{},c=e.filter(h=>(h.position||u)===(s.position||u)&&h.height),d=c.findIndex(h=>h.id===s.id),f=c.filter((h,p)=>p<d&&h.visible).length;return c.filter(h=>h.visible).slice(...l?[f+1]:[0,f]).reduce((h,p)=>h+(p.height||0)+a,0)},[e]);return{toasts:e,handlers:{updateHeight:dP,startPause:fP,endPause:r,calculateOffset:i}}},pP=yr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mP=yr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gP=yr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,yP=bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mP} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${gP} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vP=yr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wP=bi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${vP} 1s linear infinite;
`,xP=yr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,SP=yr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,kP=bi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xP} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${SP} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bP=bi("div")`
  position: absolute;
`,CP=bi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,EP=yr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_P=bi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${EP} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,TP=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?_.createElement(_P,null,e):e:n==="blank"?null:_.createElement(CP,null,_.createElement(wP,{...r}),n!=="loading"&&_.createElement(bP,null,n==="error"?_.createElement(yP,{...r}):_.createElement(kP,{...r})))},OP=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,MP=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,NP="0%{opacity:0;} 100%{opacity:1;}",PP="0%{opacity:1;} 100%{opacity:0;}",RP=bi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,AP=bi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,DP=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=mS()?[NP,PP]:[OP(n),MP(n)];return{animation:e?`${yr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${yr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},IP=_.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?DP(t.position||e||"top-center",t.visible):{opacity:0},s=_.createElement(TP,{toast:t}),o=_.createElement(AP,{...t.ariaProps},vc(t.message,t));return _.createElement(RP,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):_.createElement(_.Fragment,null,s,o))});nP(_.createElement);var jP=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=_.useCallback(o=>{if(o){let l=()=>{let a=o.getBoundingClientRect().height;r(t,a)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return _.createElement("div",{ref:s,className:e,style:n},i)},LP=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},$P=ud`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cu=16,zP=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:a}=hP(n);return _.createElement("div",{style:{position:"fixed",zIndex:9999,top:cu,left:cu,right:cu,bottom:cu,pointerEvents:"none",...s},className:o,onMouseEnter:a.startPause,onMouseLeave:a.endPause},l.map(u=>{let c=u.position||e,d=a.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=LP(c,d);return _.createElement(jP,{id:u.id,key:u.id,onHeightUpdate:a.updateHeight,className:u.visible?$P:"",style:f},u.type==="custom"?vc(u.message,u):i?i(u):_.createElement(IP,{toast:u,position:c}))}))},Uh=Yt;const gS=({img:t,name:e,price:n,slug:r,colors:i,variants:s})=>{const[o,l]=_.useState(i[0]),a=ai(f=>f.addItem),u=f=>{f.preventDefault(),c&&c.stock>0?(a({variantId:c.id,productId:r,name:e,image:t,color:o.name,storage:c.storage,price:c.price,quantity:1}),Uh.success("Producto aadido al carrito",{position:"bottom-right"})):Uh.error("Producto agotado",{position:"bottom-right"})},c=s.find(f=>f.color===o.color),d=(c==null?void 0:c.stock)||0;return w.jsxs("div",{className:"flex flex-col gap-6 relative",children:[w.jsxs(Gt,{to:`/celulares/${r}`,className:"flex relative group overflow-hidden ",children:[w.jsx("div",{className:"flex h-[350px] w-full items-center justify-center py-2 lg:h-[250px]",children:w.jsx("img",{src:t,alt:e,className:"object-contain h-full w-full"})}),w.jsxs("button",{className:"bg-white border border-slate-200 absolute w-full bottom-0 py-3 rounded-3xl flex items-center justify-center gap-1 text-sm font-medium hover:bg-stone-100 translate-y-[100%] transition-all duration-300 group-hover:translate-y-0",onClick:u,children:[w.jsx(JN,{}),"Aadir"]})]}),w.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[w.jsx("p",{className:"text-[15px] font-medium",children:e}),w.jsx("p",{className:"text-[15px] font-medium",children:td(n)}),w.jsx("div",{className:"flex gap-3",children:i.map(f=>w.jsx("span",{className:`grid place-items-center w-5 h-5 rounded-full cursor-pointer ${o.color===f.color?"border border-black":""}`,onClick:()=>l(f),children:w.jsx("span",{className:"w-[14px] h-[14px] rounded-full",style:{backgroundColor:f.color}})},f.color))})]}),w.jsx("div",{className:"absolute top-2 left-2",children:d===0&&w.jsx(fS,{contentTag:"agotado"})})]})},b0=({title:t,products:e})=>w.jsxs("div",{className:"my-32",children:[w.jsx("h2",{className:"text-3xl font-semibold text-center mb-8 md:text-4xl lg:text-5xl",children:t}),w.jsx("div",{className:"grid grid-cols-1 gap-4 gap-y-8 sm:grid-cols-2 lg:grid-cols-4",children:e.map(n=>w.jsx(gS,{name:n.name,price:n.price,colors:n.colors,img:n.images[0],slug:n.slug,variants:n.variants},n.id))})]}),C0=({numberOfProducts:t})=>w.jsx("div",{className:"my-20",children:w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 gap-y-8 animate-pulse",children:Array.from({length:t}).map((e,n)=>w.jsx("div",{className:"bg-gray-200 h-[250px]"},n))})});var Jo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ps=typeof window>"u"||"Deno"in globalThis;function on(){}function FP(t,e){return typeof t=="function"?t(e):t}function Vh(t){return typeof t=="number"&&t>=0&&t!==1/0}function yS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function io(t,e){return typeof t=="function"?t(e):t}function Tn(t,e){return typeof t=="function"?t(e):t}function E0(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==zm(o,e.options))return!1}else if(!sa(e.queryKey,o))return!1}if(n!=="all"){const a=e.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function _0(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ia(e.options.mutationKey)!==ia(s))return!1}else if(!sa(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function zm(t,e){return((e==null?void 0:e.queryKeyHashFn)||ia)(t)}function ia(t){return JSON.stringify(t,(e,n)=>Wh(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function sa(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!sa(t[n],e[n])):!1}function Fm(t,e){if(t===e)return t;const n=T0(t)&&T0(e);if(n||Wh(t)&&Wh(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let a=0;for(let u=0;u<o;u++){const c=n?u:s[u];(!n&&r.includes(c)||n)&&t[c]===void 0&&e[c]===void 0?(l[c]=void 0,a++):(l[c]=Fm(t[c],e[c]),l[c]===t[c]&&t[c]!==void 0&&a++)}return i===o&&a===i?t:l}return e}function Hh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function T0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wh(t){if(!O0(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!O0(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function O0(t){return Object.prototype.toString.call(t)==="[object Object]"}function BP(t){return new Promise(e=>{setTimeout(e,t)})}function qh(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Fm(t,e):e}function UP(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function VP(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Bm=Symbol();function vS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Bm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var qi,Fr,uo,Jv,HP=(Jv=class extends Jo{constructor(){super();K(this,qi);K(this,Fr);K(this,uo);j(this,uo,e=>{if(!ps&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,Fr)||this.setEventListener(k(this,uo))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Fr))==null||e.call(this),j(this,Fr,void 0))}setEventListener(e){var n;j(this,uo,e),(n=k(this,Fr))==null||n.call(this),j(this,Fr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){k(this,qi)!==e&&(j(this,qi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof k(this,qi)=="boolean"?k(this,qi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qi=new WeakMap,Fr=new WeakMap,uo=new WeakMap,Jv),Um=new HP,co,Br,fo,Qv,WP=(Qv=class extends Jo{constructor(){super();K(this,co,!0);K(this,Br);K(this,fo);j(this,fo,e=>{if(!ps&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,Br)||this.setEventListener(k(this,fo))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Br))==null||e.call(this),j(this,Br,void 0))}setEventListener(e){var n;j(this,fo,e),(n=k(this,Br))==null||n.call(this),j(this,Br,e(this.setOnline.bind(this)))}setOnline(e){k(this,co)!==e&&(j(this,co,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return k(this,co)}},co=new WeakMap,Br=new WeakMap,fo=new WeakMap,Qv),wc=new WP;function Kh(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function qP(t){return Math.min(1e3*2**t,3e4)}function wS(t){return(t??"online")==="online"?wc.isOnline():!0}var xS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function cf(t){return t instanceof xS}function SS(t){let e=!1,n=0,r=!1,i;const s=Kh(),o=m=>{var v;r||(f(new xS(m)),(v=t.abort)==null||v.call(t))},l=()=>{e=!0},a=()=>{e=!1},u=()=>Um.isFocused()&&(t.networkMode==="always"||wc.isOnline())&&t.canRun(),c=()=>wS(t.networkMode)&&t.canRun(),d=m=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,m),i==null||i(),s.resolve(m))},f=m=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,m),i==null||i(),s.reject(m))},h=()=>new Promise(m=>{var v;i=g=>{(r||u())&&m(g)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;i=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const v=n===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(d).catch(g=>{var S;if(r)return;const y=t.retry??(ps?0:3),x=t.retryDelay??qP,C=typeof x=="function"?x(n,g):x,T=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(e||!T){f(g);return}n++,(S=t.onFail)==null||S.call(t,n,g),BP(C).then(()=>u()?void 0:h()).then(()=>{e?f(g):p()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:a,canStart:c,start:()=>(c()?p():h().then(p),s)}}function KP(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;e++;try{a=l()}finally{e--,e||o()}return a},batchCalls:l=>(...a)=>{s(()=>{l(...a)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Ue=KP(),Ki,Gv,kS=(Gv=class{constructor(){K(this,Ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vh(this.gcTime)&&j(this,Ki,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ps?1/0:5*60*1e3))}clearGcTimeout(){k(this,Ki)&&(clearTimeout(k(this,Ki)),j(this,Ki,void 0))}},Ki=new WeakMap,Gv),ho,po,nn,ht,pa,Ji,kn,nr,Yv,JP=(Yv=class extends kS{constructor(e){super();K(this,kn);K(this,ho);K(this,po);K(this,nn);K(this,ht);K(this,pa);K(this,Ji);j(this,Ji,!1),j(this,pa,e.defaultOptions),this.setOptions(e.options),this.observers=[],j(this,nn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,j(this,ho,QP(this.options)),this.state=e.state??k(this,ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=k(this,ht))==null?void 0:e.promise}setOptions(e){this.options={...k(this,pa),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,nn).remove(this)}setData(e,n){const r=qh(this.state.data,e,this.options);return G(this,kn,nr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){G(this,kn,nr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=k(this,ht))==null?void 0:r.promise;return(i=k(this,ht))==null||i.cancel(e),n?n.then(on).catch(on):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,ho))}isActive(){return this.observers.some(e=>Tn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!yS(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=k(this,ht))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=k(this,ht))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),k(this,nn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(k(this,ht)&&(k(this,Ji)?k(this,ht).cancel({revert:!0}):k(this,ht).cancelRetry()),this.scheduleGc()),k(this,nn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||G(this,kn,nr).call(this,{type:"invalidate"})}fetch(e,n){var a,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,ht))return k(this,ht).continueRetry(),k(this,ht).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(j(this,Ji,!0),r.signal)})},s=()=>{const d=vS(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return i(f),j(this,Ji,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(a=this.options.behavior)==null||a.onFetch(o,this),j(this,po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&G(this,kn,nr).call(this,{type:"fetch",meta:(c=o.fetchOptions)==null?void 0:c.meta});const l=d=>{var f,h,p,m;cf(d)&&d.silent||G(this,kn,nr).call(this,{type:"error",error:d}),cf(d)||((h=(f=k(this,nn).config).onError)==null||h.call(f,d,this),(m=(p=k(this,nn).config).onSettled)==null||m.call(p,this.state.data,d,this)),this.scheduleGc()};return j(this,ht,SS({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,h,p,m;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(v){l(v);return}(h=(f=k(this,nn).config).onSuccess)==null||h.call(f,d,this),(m=(p=k(this,nn).config).onSettled)==null||m.call(p,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,f)=>{G(this,kn,nr).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{G(this,kn,nr).call(this,{type:"pause"})},onContinue:()=>{G(this,kn,nr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),k(this,ht).start()}},ho=new WeakMap,po=new WeakMap,nn=new WeakMap,ht=new WeakMap,pa=new WeakMap,Ji=new WeakMap,kn=new WeakSet,nr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bS(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return cf(i)&&i.revert&&k(this,po)?{...k(this,po),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ue.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,nn).notify({query:this,type:"updated",action:e})})},Yv);function bS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function QP(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fn,Xv,GP=(Xv=class extends Jo{constructor(e={}){super();K(this,Fn);this.config=e,j(this,Fn,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??zm(i,n);let o=this.get(s);return o||(o=new JP({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){k(this,Fn).has(e.queryHash)||(k(this,Fn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=k(this,Fn).get(e.queryHash);n&&(e.destroy(),n===e&&k(this,Fn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ue.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return k(this,Fn).get(e)}getAll(){return[...k(this,Fn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>E0(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>E0(e,r)):n}notify(e){Ue.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ue.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ue.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fn=new WeakMap,Xv),Bn,St,Qi,Un,Or,Zv,YP=(Zv=class extends kS{constructor(e){super();K(this,Un);K(this,Bn);K(this,St);K(this,Qi);this.mutationId=e.mutationId,j(this,St,e.mutationCache),j(this,Bn,[]),this.state=e.state||XP(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){k(this,Bn).includes(e)||(k(this,Bn).push(e),this.clearGcTimeout(),k(this,St).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){j(this,Bn,k(this,Bn).filter(n=>n!==e)),this.scheduleGc(),k(this,St).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){k(this,Bn).length||(this.state.status==="pending"?this.scheduleGc():k(this,St).remove(this))}continue(){var e;return((e=k(this,Qi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,l,a,u,c,d,f,h,p,m,v,g,y,x,C,T,S,N;j(this,Qi,SS({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(O,P)=>{G(this,Un,Or).call(this,{type:"failed",failureCount:O,error:P})},onPause:()=>{G(this,Un,Or).call(this,{type:"pause"})},onContinue:()=>{G(this,Un,Or).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,St).canRun(this)}));const n=this.state.status==="pending",r=!k(this,Qi).canStart();try{if(!n){G(this,Un,Or).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=k(this,St).config).onMutate)==null?void 0:s.call(i,e,this));const P=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));P!==this.state.context&&G(this,Un,Or).call(this,{type:"pending",context:P,variables:e,isPaused:r})}const O=await k(this,Qi).start();return await((u=(a=k(this,St).config).onSuccess)==null?void 0:u.call(a,O,e,this.state.context,this)),await((d=(c=this.options).onSuccess)==null?void 0:d.call(c,O,e,this.state.context)),await((h=(f=k(this,St).config).onSettled)==null?void 0:h.call(f,O,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,O,null,e,this.state.context)),G(this,Un,Or).call(this,{type:"success",data:O}),O}catch(O){try{throw await((g=(v=k(this,St).config).onError)==null?void 0:g.call(v,O,e,this.state.context,this)),await((x=(y=this.options).onError)==null?void 0:x.call(y,O,e,this.state.context)),await((T=(C=k(this,St).config).onSettled)==null?void 0:T.call(C,void 0,O,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,O,e,this.state.context)),O}finally{G(this,Un,Or).call(this,{type:"error",error:O})}}finally{k(this,St).runNext(this)}}},Bn=new WeakMap,St=new WeakMap,Qi=new WeakMap,Un=new WeakSet,Or=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ue.batch(()=>{k(this,Bn).forEach(r=>{r.onMutationUpdate(e)}),k(this,St).notify({mutation:this,type:"updated",action:e})})},Zv);function XP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wt,ma,e1,ZP=(e1=class extends Jo{constructor(e={}){super();K(this,Wt);K(this,ma);this.config=e,j(this,Wt,new Map),j(this,ma,Date.now())}build(e,n,r){const i=new YP({mutationCache:this,mutationId:++Fa(this,ma)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=du(e),r=k(this,Wt).get(n)??[];r.push(e),k(this,Wt).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=du(e);if(k(this,Wt).has(n)){const i=(r=k(this,Wt).get(n))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?k(this,Wt).delete(n):k(this,Wt).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=k(this,Wt).get(du(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=k(this,Wt).get(du(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Ue.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...k(this,Wt).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>_0(n,r))}findAll(e={}){return this.getAll().filter(n=>_0(e,n))}notify(e){Ue.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ue.batch(()=>Promise.all(e.map(n=>n.continue().catch(on))))}},Wt=new WeakMap,ma=new WeakMap,e1);function du(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function M0(t){return{onFetch:(e,n)=>{var c,d,f,h,p;const r=e.options,i=(f=(d=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((h=e.state.data)==null?void 0:h.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const u=async()=>{let m=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},g=vS(e.options,e.fetchOptions),y=async(x,C,T)=>{if(m)return Promise.reject();if(C==null&&x.pages.length)return Promise.resolve(x);const S={queryKey:e.queryKey,pageParam:C,direction:T?"backward":"forward",meta:e.options.meta};v(S);const N=await g(S),{maxPages:O}=e.options,P=T?VP:UP;return{pages:P(x.pages,N,O),pageParams:P(x.pageParams,C,O)}};if(i&&s.length){const x=i==="backward",C=x?e2:N0,T={pages:s,pageParams:o},S=C(r,T);l=await y(T,S,x)}else{const x=t??s.length;do{const C=a===0?o[0]??r.initialPageParam:N0(r,l);if(a>0&&C==null)break;l=await y(l,C),a++}while(a<x)}return l};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function N0(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function e2(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ae,Ur,Vr,mo,go,Hr,yo,vo,t1,t2=(t1=class{constructor(t={}){K(this,Ae);K(this,Ur);K(this,Vr);K(this,mo);K(this,go);K(this,Hr);K(this,yo);K(this,vo);j(this,Ae,t.queryCache||new GP),j(this,Ur,t.mutationCache||new ZP),j(this,Vr,t.defaultOptions||{}),j(this,mo,new Map),j(this,go,new Map),j(this,Hr,0)}mount(){Fa(this,Hr)._++,k(this,Hr)===1&&(j(this,yo,Um.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,Ae).onFocus())})),j(this,vo,wc.subscribe(async t=>{t&&(await this.resumePausedMutations(),k(this,Ae).onOnline())})))}unmount(){var t,e;Fa(this,Hr)._--,k(this,Hr)===0&&((t=k(this,yo))==null||t.call(this),j(this,yo,void 0),(e=k(this,vo))==null||e.call(this),j(this,vo,void 0))}isFetching(t){return k(this,Ae).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return k(this,Ur).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,Ae).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=k(this,Ae).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(io(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return k(this,Ae).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=k(this,Ae).get(r.queryHash),s=i==null?void 0:i.state.data,o=FP(e,s);if(o!==void 0)return k(this,Ae).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ue.batch(()=>k(this,Ae).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=k(this,Ae).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=k(this,Ae);Ue.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=k(this,Ae),r={type:"active",...t};return Ue.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Ue.batch(()=>k(this,Ae).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(on).catch(on)}invalidateQueries(t={},e={}){return Ue.batch(()=>{if(k(this,Ae).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Ue.batch(()=>k(this,Ae).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(on)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(on)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=k(this,Ae).build(this,e);return n.isStaleByTime(io(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(on).catch(on)}fetchInfiniteQuery(t){return t.behavior=M0(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(on).catch(on)}ensureInfiniteQueryData(t){return t.behavior=M0(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wc.isOnline()?k(this,Ur).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,Ae)}getMutationCache(){return k(this,Ur)}getDefaultOptions(){return k(this,Vr)}setDefaultOptions(t){j(this,Vr,t)}setQueryDefaults(t,e){k(this,mo).set(ia(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...k(this,mo).values()];let n={};return e.forEach(r=>{sa(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){k(this,go).set(ia(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...k(this,go).values()];let n={};return e.forEach(r=>{sa(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...k(this,Vr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=zm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Bm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...k(this,Vr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){k(this,Ae).clear(),k(this,Ur).clear()}},Ae=new WeakMap,Ur=new WeakMap,Vr=new WeakMap,mo=new WeakMap,go=new WeakMap,Hr=new WeakMap,yo=new WeakMap,vo=new WeakMap,t1),At,le,ga,kt,Gi,wo,Wr,Vn,ya,xo,So,Yi,Xi,qr,ko,me,xl,Jh,Qh,Gh,Yh,Xh,Zh,ep,CS,n1,Vm=(n1=class extends Jo{constructor(e,n){super();K(this,me);K(this,At);K(this,le);K(this,ga);K(this,kt);K(this,Gi);K(this,wo);K(this,Wr);K(this,Vn);K(this,ya);K(this,xo);K(this,So);K(this,Yi);K(this,Xi);K(this,qr);K(this,ko,new Set);this.options=n,j(this,At,e),j(this,Vn,null),j(this,Wr,Kh()),this.options.experimental_prefetchInRender||k(this,Wr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,le).addObserver(this),P0(k(this,le),this.options)?G(this,me,xl).call(this):this.updateResult(),G(this,me,Yh).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tp(k(this,le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tp(k(this,le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,G(this,me,Xh).call(this),G(this,me,Zh).call(this),k(this,le).removeObserver(this)}setOptions(e,n){const r=this.options,i=k(this,le);if(this.options=k(this,At).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Tn(this.options.enabled,k(this,le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");G(this,me,ep).call(this),k(this,le).setOptions(this.options),r._defaulted&&!Hh(this.options,r)&&k(this,At).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,le),observer:this});const s=this.hasListeners();s&&R0(k(this,le),i,this.options,r)&&G(this,me,xl).call(this),this.updateResult(n),s&&(k(this,le)!==i||Tn(this.options.enabled,k(this,le))!==Tn(r.enabled,k(this,le))||io(this.options.staleTime,k(this,le))!==io(r.staleTime,k(this,le)))&&G(this,me,Jh).call(this);const o=G(this,me,Qh).call(this);s&&(k(this,le)!==i||Tn(this.options.enabled,k(this,le))!==Tn(r.enabled,k(this,le))||o!==k(this,qr))&&G(this,me,Gh).call(this,o)}getOptimisticResult(e){const n=k(this,At).getQueryCache().build(k(this,At),e),r=this.createResult(n,e);return r2(this,r)&&(j(this,kt,r),j(this,wo,this.options),j(this,Gi,k(this,le).state)),r}getCurrentResult(){return k(this,kt)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){k(this,ko).add(e)}getCurrentQuery(){return k(this,le)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=k(this,At).defaultQueryOptions(e),r=k(this,At).getQueryCache().build(k(this,At),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return G(this,me,xl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,kt)))}createResult(e,n){var O;const r=k(this,le),i=this.options,s=k(this,kt),o=k(this,Gi),l=k(this,wo),u=e!==r?e.state:k(this,ga),{state:c}=e;let d={...c},f=!1,h;if(n._optimisticResults){const P=this.hasListeners(),I=!P&&P0(e,n),ee=P&&R0(e,r,n,i);(I||ee)&&(d={...d,...bS(c.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:v}=d;if(n.select&&d.data!==void 0)if(s&&d.data===(o==null?void 0:o.data)&&n.select===k(this,ya))h=k(this,xo);else try{j(this,ya,n.select),h=n.select(d.data),h=qh(s==null?void 0:s.data,h,n),j(this,xo,h),j(this,Vn,null)}catch(P){j(this,Vn,P)}else h=d.data;if(n.placeholderData!==void 0&&h===void 0&&v==="pending"){let P;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))P=s.data;else if(P=typeof n.placeholderData=="function"?n.placeholderData((O=k(this,So))==null?void 0:O.state.data,k(this,So)):n.placeholderData,n.select&&P!==void 0)try{P=n.select(P),j(this,Vn,null)}catch(I){j(this,Vn,I)}P!==void 0&&(v="success",h=qh(s==null?void 0:s.data,P,n),f=!0)}k(this,Vn)&&(p=k(this,Vn),h=k(this,xo),m=Date.now(),v="error");const g=d.fetchStatus==="fetching",y=v==="pending",x=v==="error",C=y&&g,T=h!==void 0,N={status:v,fetchStatus:d.fetchStatus,isPending:y,isSuccess:v==="success",isError:x,isInitialLoading:C,isLoading:C,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:x&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&T,isStale:Hm(e,n),refetch:this.refetch,promise:k(this,Wr)};if(this.options.experimental_prefetchInRender){const P=pe=>{N.status==="error"?pe.reject(N.error):N.data!==void 0&&pe.resolve(N.data)},I=()=>{const pe=j(this,Wr,N.promise=Kh());P(pe)},ee=k(this,Wr);switch(ee.status){case"pending":e.queryHash===r.queryHash&&P(ee);break;case"fulfilled":(N.status==="error"||N.data!==ee.value)&&I();break;case"rejected":(N.status!=="error"||N.error!==ee.reason)&&I();break}}return N}updateResult(e){const n=k(this,kt),r=this.createResult(k(this,le),this.options);if(j(this,Gi,k(this,le).state),j(this,wo,this.options),k(this,Gi).data!==void 0&&j(this,So,k(this,le)),Hh(r,n))return;j(this,kt,r);const i={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!k(this,ko).size)return!0;const a=new Set(l??k(this,ko));return this.options.throwOnError&&a.add("error"),Object.keys(k(this,kt)).some(u=>{const c=u;return k(this,kt)[c]!==n[c]&&a.has(c)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),G(this,me,CS).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&G(this,me,Yh).call(this)}},At=new WeakMap,le=new WeakMap,ga=new WeakMap,kt=new WeakMap,Gi=new WeakMap,wo=new WeakMap,Wr=new WeakMap,Vn=new WeakMap,ya=new WeakMap,xo=new WeakMap,So=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,qr=new WeakMap,ko=new WeakMap,me=new WeakSet,xl=function(e){G(this,me,ep).call(this);let n=k(this,le).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(on)),n},Jh=function(){G(this,me,Xh).call(this);const e=io(this.options.staleTime,k(this,le));if(ps||k(this,kt).isStale||!Vh(e))return;const r=yS(k(this,kt).dataUpdatedAt,e)+1;j(this,Yi,setTimeout(()=>{k(this,kt).isStale||this.updateResult()},r))},Qh=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,le)):this.options.refetchInterval)??!1},Gh=function(e){G(this,me,Zh).call(this),j(this,qr,e),!(ps||Tn(this.options.enabled,k(this,le))===!1||!Vh(k(this,qr))||k(this,qr)===0)&&j(this,Xi,setInterval(()=>{(this.options.refetchIntervalInBackground||Um.isFocused())&&G(this,me,xl).call(this)},k(this,qr)))},Yh=function(){G(this,me,Jh).call(this),G(this,me,Gh).call(this,G(this,me,Qh).call(this))},Xh=function(){k(this,Yi)&&(clearTimeout(k(this,Yi)),j(this,Yi,void 0))},Zh=function(){k(this,Xi)&&(clearInterval(k(this,Xi)),j(this,Xi,void 0))},ep=function(){const e=k(this,At).getQueryCache().build(k(this,At),this.options);if(e===k(this,le))return;const n=k(this,le);j(this,le,e),j(this,ga,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},CS=function(e){Ue.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(k(this,kt))}),k(this,At).getQueryCache().notify({query:k(this,le),type:"observerResultsUpdated"})})},n1);function n2(t,e){return Tn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function P0(t,e){return n2(t,e)||t.state.data!==void 0&&tp(t,e,e.refetchOnMount)}function tp(t,e,n){if(Tn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Hm(t,e)}return!1}function R0(t,e,n,r){return(t!==e||Tn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Hm(t,n)}function Hm(t,e){return Tn(e.enabled,t)!==!1&&t.isStaleByTime(io(e.staleTime,t))}function r2(t,e){return!Hh(t.getCurrentResult(),e)}function A0(t,e){return t.filter(n=>!e.includes(n))}function i2(t,e,n){const r=t.slice(0);return r[e]=n,r}var bo,rn,Zi,Co,sn,Kr,va,wa,tt,np,rp,Iu,ip,sp,r1,s2=(r1=class extends Jo{constructor(e,n,r){super();K(this,tt);K(this,bo);K(this,rn);K(this,Zi);K(this,Co);K(this,sn);K(this,Kr);K(this,va);K(this,wa);j(this,bo,e),j(this,Co,r),j(this,Zi,[]),j(this,sn,[]),j(this,rn,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&k(this,sn).forEach(e=>{e.subscribe(n=>{G(this,tt,ip).call(this,e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,k(this,sn).forEach(e=>{e.destroy()})}setQueries(e,n,r){j(this,Zi,e),j(this,Co,n),Ue.batch(()=>{const i=k(this,sn),s=G(this,tt,Iu).call(this,k(this,Zi));s.forEach(u=>u.observer.setOptions(u.defaultedQueryOptions,r));const o=s.map(u=>u.observer),l=o.map(u=>u.getCurrentResult()),a=o.some((u,c)=>u!==i[c]);i.length===o.length&&!a||(j(this,sn,o),j(this,rn,l),this.hasListeners()&&(A0(i,o).forEach(u=>{u.destroy()}),A0(o,i).forEach(u=>{u.subscribe(c=>{G(this,tt,ip).call(this,u,c)})}),G(this,tt,sp).call(this)))})}getCurrentResult(){return k(this,rn)}getQueries(){return k(this,sn).map(e=>e.getCurrentQuery())}getObservers(){return k(this,sn)}getOptimisticResult(e,n){const i=G(this,tt,Iu).call(this,e).map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[i,s=>G(this,tt,rp).call(this,s??i,n),()=>G(this,tt,np).call(this,i,e)]}},bo=new WeakMap,rn=new WeakMap,Zi=new WeakMap,Co=new WeakMap,sn=new WeakMap,Kr=new WeakMap,va=new WeakMap,wa=new WeakMap,tt=new WeakSet,np=function(e,n){const r=G(this,tt,Iu).call(this,n);return r.map((i,s)=>{const o=e[s];return i.defaultedQueryOptions.notifyOnChangeProps?o:i.observer.trackResult(o,l=>{r.forEach(a=>{a.observer.trackProp(l)})})})},rp=function(e,n){return n?((!k(this,Kr)||k(this,rn)!==k(this,wa)||n!==k(this,va))&&(j(this,va,n),j(this,wa,k(this,rn)),j(this,Kr,Fm(k(this,Kr),n(e)))),k(this,Kr)):e},Iu=function(e){const n=new Map(k(this,sn).map(i=>[i.options.queryHash,i])),r=[];return e.forEach(i=>{const s=k(this,bo).defaultQueryOptions(i),o=n.get(s.queryHash);o?r.push({defaultedQueryOptions:s,observer:o}):r.push({defaultedQueryOptions:s,observer:new Vm(k(this,bo),s)})}),r},ip=function(e,n){const r=k(this,sn).indexOf(e);r!==-1&&(j(this,rn,i2(k(this,rn),r,n)),G(this,tt,sp).call(this))},sp=function(){var e;if(this.hasListeners()){const n=k(this,Kr),r=G(this,tt,rp).call(this,G(this,tt,np).call(this,k(this,rn),k(this,Zi)),(e=k(this,Co))==null?void 0:e.combine);n!==r&&Ue.batch(()=>{this.listeners.forEach(i=>{i(k(this,rn))})})}},r1),ES=_.createContext(void 0),_S=t=>{const e=_.useContext(ES);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},o2=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(ES.Provider,{value:t,children:e})),TS=_.createContext(!1),OS=()=>_.useContext(TS);TS.Provider;function l2(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var a2=_.createContext(l2()),MS=()=>_.useContext(a2);function u2(t,e){return typeof t=="function"?t(...e):!!t}function op(){}var NS=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},PS=t=>{_.useEffect(()=>{t.clearReset()},[t])},RS=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&u2(n,[t.error,r]),AS=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},DS=(t,e)=>t.isLoading&&t.isFetching&&!e,lp=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,xc=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function c2({queries:t,...e},n){const r=_S(),i=OS(),s=MS(),o=_.useMemo(()=>t.map(p=>{const m=r.defaultQueryOptions(p);return m._optimisticResults=i?"isRestoring":"optimistic",m}),[t,r,i]);o.forEach(p=>{AS(p),NS(p,s)}),PS(s);const[l]=_.useState(()=>new s2(r,o,e)),[a,u,c]=l.getOptimisticResult(o,e.combine);_.useSyncExternalStore(_.useCallback(p=>i?op:l.subscribe(Ue.batchCalls(p)),[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),_.useEffect(()=>{l.setQueries(o,e,{listeners:!1})},[o,e,l]);const f=a.some((p,m)=>lp(o[m],p))?a.flatMap((p,m)=>{const v=o[m];if(v){const g=new Vm(r,v);if(lp(v,p))return xc(v,g,s);DS(p,i)&&xc(v,g,s)}return[]}):[];if(f.length>0)throw Promise.all(f);const h=a.find((p,m)=>{const v=o[m];return v&&RS({result:p,errorResetBoundary:s,throwOnError:v.throwOnError,query:r.getQueryCache().get(v.queryHash)})});if(h!=null&&h.error)throw h.error;return u(c())}function d2(t,e,n){var c,d,f,h,p;const r=_S(),i=OS(),s=MS(),o=r.defaultQueryOptions(t);(d=(c=r.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||d.call(c,o),o._optimisticResults=i?"isRestoring":"optimistic",AS(o),NS(o,s),PS(s);const l=!r.getQueryCache().get(o.queryHash),[a]=_.useState(()=>new e(r,o)),u=a.getOptimisticResult(o);if(_.useSyncExternalStore(_.useCallback(m=>{const v=i?op:a.subscribe(Ue.batchCalls(m));return a.updateResult(),v},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),_.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),lp(o,u))throw xc(o,a,s);if(RS({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((h=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||h.call(f,o,u),o.experimental_prefetchInRender&&!ps&&DS(u,i)){const m=l?xc(o,a,s):(p=r.getQueryCache().get(o.queryHash))==null?void 0:p.promise;m==null||m.catch(op).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?u:a.trackResult(u)}function IS(t,e){return d2(t,Vm)}const f2=({page:t,brands:e})=>{const{data:n,isLoading:r}=IS({queryKey:["filteredProducts",t,e],queryFn:()=>DN({page:t,brands:e}),retry:!1});return{data:n==null?void 0:n.data,isLoading:r,totalProducts:(n==null?void 0:n.count)??0}},h2=()=>{const t=c2({queries:[{queryKey:["recentProducts"],queryFn:jN},{queryKey:["popularProducts"],queryFn:IN}]}),[e,n]=t,r=e.isLoading||n.isLoading,i=e.isError||n.isError;return{recentProducts:e.data||[],popularProducts:n.data||[],isLoading:r,isError:i}},p2=()=>{const{recentProducts:t,popularProducts:e,isLoading:n}=h2(),r=Ph(t),i=Ph(e);return w.jsxs("div",{children:[w.jsx(KN,{}),n?w.jsx(C0,{numberOfProducts:4}):w.jsx(b0,{title:"Nuevos Productos",products:r}),n?w.jsx(C0,{numberOfProducts:4}):w.jsx(b0,{title:"Productos Destacados",products:i}),w.jsx(HN,{})]})},jS=({className:t})=>w.jsx("div",{className:`bg-slate-200 h-px my-5 ${t}`}),m2=["Samsung","Apple","Huawei","Xiaomi","Realme","Honor"],g2=({selectedBrands:t,setSelectedBrands:e})=>{const n=r=>{t.includes(r)?e(t.filter(i=>i!==r)):e([...t,r])};return w.jsxs("div",{className:"p-5 border border-slate-200 rounded-lg h-fit col-span-2 lg:col-span-1",children:[w.jsx("h3",{className:"font-semibold text-xl mb-4",children:"Filtros"}),w.jsx(jS,{}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsx("h3",{className:"text-lg font-medium text-black",children:"Marcas"}),w.jsx("div",{className:"flex flex-col gap-2",children:m2.map(r=>w.jsxs("label",{className:"inline-flex items-center",children:[w.jsx("input",{type:"checkbox",className:"text-black border-black focus:ring-black accent-black",checked:t.includes(r),onChange:()=>n(r)}),w.jsx("span",{className:"ml-2 text-black text-sm cursor-pointer",children:r})]},r))})]})]})},y2=({totalItems:t,page:e,setPage:n})=>{const r=()=>{n(e+1)},i=()=>{n(c=>Math.max(c-1,1))},o=t?Math.ceil(t/10):1,l=e>=o,a=(e-1)*10+1,u=Math.min(e*10,t);return w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("p",{className:"text-xs font-medium",children:["Mostrando"," ",w.jsxs("span",{className:"font-bold",children:[a," - ",u]})," ","de ",w.jsxs("span",{className:"font-bold",children:[" ",t]})," productos"]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{className:"btn-paginated",onClick:i,disabled:e===1,children:"Anterior"}),w.jsx("button",{className:"btn-paginated",onClick:r,disabled:l,children:"Siguiente"})]})]})},v2=()=>{const[t,e]=_.useState(1),[n,r]=_.useState([]),{data:i=[],isLoading:s,totalProducts:o}=f2({page:t,brands:n}),l=Ph(i);return w.jsxs(w.Fragment,{children:[w.jsx("h1",{className:"text-5xl font-semibold text-center mb-12",children:"Celulares"}),w.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[w.jsx(g2,{setSelectedBrands:r,selectedBrands:n}),s?w.jsx("div",{className:"col-span-2 flex items-center justify-center h-[500px]",children:w.jsx("p",{className:"text-2xl",children:"Cargando..."})}):w.jsxs("div",{className:"col-span-2 lg:col-span-2 xl:col-span-4 flex flex-col gap-12",children:[w.jsx("div",{className:"grid grid-cols-2 gap-3 gap-y-10 xl:grid-cols-4",children:l.map(a=>w.jsx(gS,{name:a.name,price:a.price,colors:a.colors,img:a.images[0],slug:a.slug,variants:a.variants},a.id))}),w.jsx(y2,{totalItems:o,page:t,setPage:e})]})]})]})},w2=()=>w.jsxs("div",{className:"space-y-5",children:[w.jsx("h1",{className:"text-center text-4xl font-semibold tracking-tight mb-5",children:"Nuestra empresa"}),w.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1682716270464-9a91cbbcf3b7?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8ZWRpZmljaW8lMjBkZSUyMGxhJTIwZW1wcmVzYXxlbnwwfHwwfHx8MA%3D%3D",alt:"Imagen de fondo",className:"h-[500px] w-full object-cover"}),w.jsxs("div",{className:"flex flex-col gap-4 tracking-tighter leading-7 text-sm font-medium text-slate-800",children:[w.jsx("p",{children:"Celare es una tienda en lnea que se dedica a la venta de celulares, fundada en 2021. Nuestro objetivo es ofrecer a nuestros clientes la mejor calidad y precio en celulares. Contamos con un equipo de profesionales que se encargan de seleccionar los mejores productos para ti."}),w.jsx("p",{children:"En Celare podrs encontrar una amplia variedad de celulares de las mejores marcas. Adems, contamos con promociones y descuentos exclusivos para que puedas comprar tu celular al mejor precio."}),w.jsx("h2",{className:"text-3xl font-semibold tracking-tighh mt-8 mb-4",children:"No esperes ms y compra tu celular en Celare!"}),w.jsxs("p",{children:["Para ms informacin, no dudes en ponerte en contacto con nosotros, a travs de nuestro correo electrnico:",w.jsx("a",{href:"mailto:correo@Celare.com",children:"correo@Celare.com"})," o llamado al"," ",w.jsx("a",{href:"tel:333333333",children:"3333333333"})]})]})]});function x2(t){return We({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Delivery_Truck"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M21.47,11.185l-1.03-1.43a2.5,2.5,0,0,0-2.03-1.05H14.03V6.565a2.5,2.5,0,0,0-2.5-2.5H4.56a2.507,2.507,0,0,0-2.5,2.5v9.94a1.5,1.5,0,0,0,1.5,1.5H4.78a2.242,2.242,0,0,0,4.44,0h5.56a2.242,2.242,0,0,0,4.44,0h1.22a1.5,1.5,0,0,0,1.5-1.5v-3.87A2.508,2.508,0,0,0,21.47,11.185ZM7,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,7,18.935Zm6.03-1.93H9.15a2.257,2.257,0,0,0-4.3,0H3.56a.5.5,0,0,1-.5-.5V6.565a1.5,1.5,0,0,1,1.5-1.5h6.97a1.5,1.5,0,0,1,1.5,1.5ZM17,18.935a1.25,1.25,0,1,1,1.25-1.25A1.25,1.25,0,0,1,17,18.935Zm3.94-2.43a.5.5,0,0,1-.5.5H19.15a2.257,2.257,0,0,0-4.3,0h-.82v-7.3h4.38a1.516,1.516,0,0,1,1.22.63l1.03,1.43a1.527,1.527,0,0,1,.28.87Z"},child:[]},{tag:"path",attr:{d:"M18.029,12.205h-2a.5.5,0,0,1,0-1h2a.5.5,0,0,1,0,1Z"},child:[]}]}]}]})(t)}function S2(t){return We({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"},child:[]},{tag:"path",attr:{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"},child:[]}]})(t)}function ot(t){this.content=t}ot.prototype={constructor:ot,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ot(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ot(n)},addToStart:function(t,e){return new ot([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ot(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ot(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ot.from(t),t.size?new ot(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ot.from(t),t.size?new ot(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ot.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ot.from=function(t){if(t instanceof ot)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ot(e)};function LS(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=LS(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function $S(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,c=Math.min(o.text.length,l.text.length);for(;u<c&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=$S(o.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class A{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],u=l+a.nodeSize;if(u>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new A(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new A(r,i)}cutByIndex(e,n){return e==n?A.empty:e==0&&n==this.content.length?this:new A(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new A(i,s)}addToStart(e){return new A([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new A(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return LS(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return $S(this,e,n,r)}findIndex(e,n=-1){if(e==0)return fu(0,e);if(e==this.size)return fu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?fu(r+1,o):fu(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return A.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new A(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return A.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new A(n||e,r)}static from(e){if(!e)return A.empty;if(e instanceof A)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new A([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}A.empty=new A([],0);const df={index:0,offset:0};function fu(t,e){return df.index=t,df.offset=e,df}function Sc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Sc(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Sc(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ve=class ap{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ap.none;if(e instanceof ap)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ve.none=[];class kc extends Error{}class L{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=FS(this.content,e+this.openStart,n);return r&&new L(r,this.openStart,this.openEnd)}removeBetween(e,n){return new L(zS(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return L.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(A.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new L(e,r,i)}}L.empty=new L(A.empty,0,0);function zS(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(zS(s.content,e-i-1,n-i-1)))}function FS(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=FS(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function k2(t,e,n){if(n.openStart>t.depth)throw new kc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new kc("Inconsistent open depths");return BS(t,e,n,0)}function BS(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=BS(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return rs(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=b2(n,t);return rs(s,VS(t,o,l,e,r))}else return rs(s,bc(t,e,r))}function US(t,e){if(!e.type.compatibleContent(t.type))throw new kc("Cannot join "+e.type.name+" onto "+t.type.name)}function up(t,e,n){let r=t.node(n);return US(r,e.node(n)),r}function ns(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Il(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ns(t.nodeAfter,r),s++));for(let l=s;l<o;l++)ns(i.child(l),r);e&&e.depth==n&&e.textOffset&&ns(e.nodeBefore,r)}function rs(t,e){return t.type.checkContent(e),t.copy(e)}function VS(t,e,n,r,i){let s=t.depth>i&&up(t,e,i+1),o=r.depth>i&&up(n,r,i+1),l=[];return Il(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(US(s,o),ns(rs(s,VS(t,e,n,r,i+1)),l)):(s&&ns(rs(s,bc(t,e,i+1)),l),Il(e,n,i,l),o&&ns(rs(o,bc(n,r,i+1)),l)),Il(r,null,i,l),new A(l)}function bc(t,e,n){let r=[];if(Il(null,t,n,r),t.depth>n){let i=up(t,e,n+1);ns(rs(i,bc(t,e,n+1)),r)}return Il(e,null,n,r),new A(r)}function b2(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(A.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class oa{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ve.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Cc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),u=s-a;if(r.push(o,l,i+a),!u||(o=o.child(l),o.isText))break;s=u-1,i+=a+1}return new oa(n,r,s)}static resolveCached(e,n){let r=D0.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else D0.set(e,r=new C2);let i=r.elts[r.i]=oa.resolve(e,n);return r.i=(r.i+1)%E2,i}}class C2{constructor(){this.elts=[],this.i=0}}const E2=12,D0=new WeakMap;class Cc{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _2=Object.create(null);let ui=class cp{constructor(e,n,r,i=ve.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||A.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Sc(this.attrs,n||e.defaultAttrs||_2)&&ve.sameSet(this.marks,r||ve.none)}copy(e=null){return e==this.content?this:new cp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new cp(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return L.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new L(u,i.depth-o,s.depth-o)}replace(e,n,r){return k2(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return oa.resolveCached(this,e)}resolveNoCache(e){return oa.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),HS(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=A.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ve.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ve.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=A.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ui.prototype.text=void 0;class Ec extends ui{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):HS(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ec(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function HS(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ms{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new T2(e,n);if(r.next==null)return ms.empty;let i=WS(r);r.next&&r.err("Unexpected trailing text");let s=D2(A2(i));return I2(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return A.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,l.concat(c));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ms.empty=new ms(!0);class T2{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function WS(t){let e=[];do e.push(O2(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function O2(t){let e=[];do e.push(M2(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function M2(t){let e=R2(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=N2(t,e);else break;return e}function I0(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function N2(t,e){let n=I0(t),r=n;return t.eat(",")&&(t.next!="}"?r=I0(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function P2(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function R2(t){if(t.eat("(")){let e=WS(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=P2(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function A2(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let u={term:a,to:l};return e[o].push(u),u}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,u)=>a.concat(s(u,l)),[]);if(o.type=="seq")for(let a=0;;a++){let u=s(o.exprs[a],l);if(a==o.exprs.length-1)return u;i(u,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let u=0;u<o.min;u++){let c=n();i(s(o.expr,a),c),a=c}if(o.max==-1)i(s(o.expr,a),a);else for(let u=o.min;u<o.max;u++){let c=n();r(a,c),i(s(o.expr,a),c),a=c}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function qS(t,e){return e-t}function j0(t,e){let n=[];return r(e),n.sort(qS);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function D2(t){let e=Object.create(null);return n(j0(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);j0(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new ms(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(qS);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function I2(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function KS(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function JS(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function QS(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function GS(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new L2(t,r,e[r]);return n}let L0=class YS{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=GS(e,r.attrs),this.defaultAttrs=KS(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ms.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:JS(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ui(this,this.computeAttrs(e),A.from(n),ve.setFrom(r))}createChecked(e=null,n,r){return n=A.from(n),this.checkContent(n),new ui(this,this.computeAttrs(e),n,ve.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=A.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(A.empty,!0);return s?new ui(this,e,n.append(s),ve.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){QS(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ve.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new YS(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function j2(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class L2{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?j2(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class cd{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=GS(e,i.attrs),this.excluded=null;let s=KS(this.attrs);this.instance=s?new ve(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ve(this,JS(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new cd(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){QS(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class XS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ot.from(e.nodes),n.marks=ot.from(e.marks||{}),this.nodes=L0.compile(this.spec.nodes,this),this.marks=cd.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ms.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?$0(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:$0(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof L0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Ec(r,r.defaultAttrs,e,ve.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ui.fromJSON(this,e)}markFromJSON(e){return ve.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function $0(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function $2(t){return t.tag!=null}function z2(t){return t.style!=null}class ci{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if($2(i))this.tags.push(i);else if(z2(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new F0(this,n,!1);return r.addAll(e,ve.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new F0(this,n,!0);return r.addAll(e,ve.none,n.from,n.to),L.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(U2(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=B0(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=B0(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ci(e,ci.schemaRules(e)))}}const ZS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},F2={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ek={ol:!0,ul:!0},_c=1,Tc=2,jl=4;function z0(t,e,n){return e!=null?(e?_c:0)|(e==="full"?Tc:0):t&&t.whitespace=="pre"?_c|Tc:n&~jl}class hu{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ve.none,this.match=s||(o&jl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(A.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&_c)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=A.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(A.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ZS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class F0{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=z0(null,n.preserveWhitespace,0)|(r?jl:0);i?s=new hu(i.type,i.attrs,ve.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new hu(null,null,ve.none,!0,null,o):s=new hu(e.schema.topNodeType,null,ve.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&Tc||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&_c)i.options&Tc?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),s;ek.hasOwnProperty(i)&&this.parser.normalizeLists&&B2(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:F2.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,a=this.top,u=this.needsBlock;if(ZS.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let c=o&&o.skip?n:this.readStyles(e,n);c&&this.addAll(e,c),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,o,l,o.consuming===!1?s:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],l=o.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=o,!l.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=ve.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):U0(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=z0(e,s,o.options);o.options&jl&&o.content.length==0&&(l|=jl);let a=ve.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):U0(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new hu(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function B2(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ek.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function U2(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function B0(t){let e={};for(let n in t)e[n]=t[n];return e}function U0(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class bs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ff(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let u=o.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let u=o.marks[a++],c=this.serializeMark(u,o.isInline,n);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ju(ff(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ju(ff(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ju(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new bs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=V0(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return V0(e.marks)}}function V0(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ff(t){return t.document||window.document}const H0=new WeakMap;function V2(t){let e=H0.get(t);return e===void 0&&H0.set(t,e=H2(t)),e}function H2(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ju(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=V2(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=ju(t,f,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const tk=65535,nk=Math.pow(2,16);function W2(t,e){return t+e*nk}function W0(t){return t&tk}function q2(t){return(t-(t&tk))/nk}const rk=1,ik=2,Lu=4,sk=8;class dp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&sk)>0}get deletedBefore(){return(this.delInfo&(rk|Lu))>0}get deletedAfter(){return(this.delInfo&(ik|Lu))>0}get deletedAcross(){return(this.delInfo&Lu)>0}}class Jt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Jt.empty)return Jt.empty}recover(e){let n=0,r=W0(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+q2(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+s],c=this.ranges[l+o],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,h=a+i+(f<0?0:c);if(r)return h;let p=e==(n<0?a:d)?null:W2(l/3,e-a),m=e==a?ik:e==d?rk:Lu;return(n<0?e!=a:e!=d)&&(m|=sk),new dp(h,m,p)}i+=c-u}return r?e+i:new dp(e+i,0,null)}touches(e,n){let r=0,i=W0(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+s],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),s+=c-u}}invert(){return new Jt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Jt.empty:new Jt(e<0?[0,-e,0]:[0,0,e])}}Jt.empty=new Jt([]);class so{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new so(this.maps,this.mirror,e,n)}copy(){return new so(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new so;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new dp(e,i,null)}}const hf=Object.create(null);class vt{getMap(){return Jt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=hf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in hf)throw new RangeError("Duplicate use of step JSON ID "+e);return hf[e]=n,n.prototype.jsonID=e,n}}class He{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new He(e,null)}static fail(e){return new He(null,e)}static fromReplace(e,n,r,i){try{return He.ok(e.replace(n,r,i))}catch(s){if(s instanceof kc)return He.fail(s.message);throw s}}}function Wm(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Wm(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return A.fromArray(r)}class Yr extends vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new L(Wm(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return He.fromReplace(e,this.from,this.to,s)}invert(){return new Wn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yr(n.from,n.to,e.markFromJSON(n.mark))}}vt.jsonID("addMark",Yr);class Wn extends vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new L(Wm(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return He.fromReplace(e,this.from,this.to,r)}invert(){return new Yr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Wn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Wn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Wn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Wn(n.from,n.to,e.markFromJSON(n.mark))}}vt.jsonID("removeMark",Wn);class Xr extends vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return He.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return He.fromReplace(e,this.pos,this.pos+1,new L(A.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Xr(this.pos,n.marks[i]);return new Xr(this.pos,this.mark)}}return new jo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Xr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xr(n.pos,e.markFromJSON(n.mark))}}vt.jsonID("addNodeMark",Xr);class jo extends vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return He.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return He.fromReplace(e,this.pos,this.pos+1,new L(A.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Xr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jo(n.pos,e.markFromJSON(n.mark))}}vt.jsonID("removeNodeMark",jo);class Ye extends vt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&fp(e,this.from,this.to)?He.fail("Structure replace would overwrite content"):He.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Jt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ye(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ye(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ye)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ye(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ye(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ye(n.from,n.to,L.fromJSON(e,n.slice),!!n.structure)}}vt.jsonID("replace",Ye);class Ze extends vt{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(fp(e,this.from,this.gapFrom)||fp(e,this.gapTo,this.to)))return He.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return He.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?He.fromReplace(e,this.from,this.to,r):He.fail("Content does not fit in gap")}getMap(){return new Jt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ze(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ze(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ze(n.from,n.to,n.gapFrom,n.gapTo,L.fromJSON(e,n.slice),n.insert,!!n.structure)}}vt.jsonID("replaceAround",Ze);function fp(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function K2(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),h=Math.min(u+a.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:i.push(o=new Wn(f,h,d[m])));l&&l.to==f?l.to=h:s.push(l=new Yr(f,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function J2(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof cd){let u=o.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let u=Math.min(l+o.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=u,f.step=s):i.push({style:d,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new Wn(o.from,o.to,o.style)))}function qm(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let u=s.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new Ye(l,c,L.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new Wn(l,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(u.text);)p||(p=new L(A.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Ye(l+f.index,l+f.index+f[0].length,p))}}l=c}if(!r.validEnd){let a=r.fillBefore(A.empty,!0);t.replace(l,l,new L(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function Q2(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Qo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!Q2(i,s,o))break}return null}function G2(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,u=l,c=A.empty,d=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,c=A.from(r.node(p).copy(c)),d++):a--;let f=A.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=A.from(i.node(p).copy(f)),h++):u++;t.step(new Ze(a,u,o,l,new L(c.append(f),d,h),c.size-d,!0))}function Km(t,e,n=null,r=t){let i=Y2(t,e),s=i&&X2(r,e);return s?i.map(q0).concat({type:e,attrs:n}).concat(s.map(q0)):null}function q0(t){return{type:t,attrs:null}}function Y2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function X2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:o}function Z2(t,e,n){let r=A.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=A.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Ze(i,s,i,s,new L(r,0,0),n.length,!0))}function eR(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&tR(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?u=!1:!h&&p&&(u=!0)}u===!1&&lk(t,o,l,s),qm(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let c=t.mapping.slice(s),d=c.map(l,1),f=c.map(l+o.nodeSize,1);return t.step(new Ze(d,f,d+1,f-1,new L(A.from(r.create(a,null,o.marks)),0,0),1,!0)),u===!0&&ok(t,o,l,s),!1}})}function ok(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function lk(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function tR(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function nR(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ze(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new L(A.from(o),0,0),1,!0))}function oo(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>s;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[c+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function rR(t,e,n=1,r){let i=t.doc.resolve(e),s=A.empty,o=A.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){s=A.from(i.node(l).copy(s));let c=r&&r[u];o=A.from(c?c.type.create(c.attrs,o):i.node(l).copy(o))}t.step(new Ye(e,e,new L(s.append(o),n,n),!0))}function Ci(t,e){let n=t.resolve(e),r=n.index();return ak(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function iR(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function ak(t,e){return!!(t&&e&&!t.isLeaf&&iR(t,e))}function dd(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&ak(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function sR(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);lk(t,c.node(),c.before(),l)}o.inlineContent&&qm(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new Ye(u,a.map(e+n,-1),L.empty,!0)),r===!0){let c=t.doc.resolve(u);ok(t,c.node(),c.before(),t.steps.length)}return t}function oR(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function uk(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function fd(t,e,n=e,r=L.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return ck(i,s,r)?new Ye(e,n,r):new lR(i,s,r).fit()}function ck(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class lR{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=A.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=A.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new L(s,o,l);return e>-1?new Ze(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ye(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=pf(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore(A.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=pf(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new L(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=pf(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new L(Sl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new L(Sl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));d=d.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let m=l.child(u),v=d.matchType(m.type);if(!v)break;u++,(u>1||a==0||m.content.size)&&(d=v,c.push(dk(m.mark(f.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?h:-1)))}let p=u==l.childCount;p||(h=-1),this.placed=kl(this.placed,n,A.from(c)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=l;m<h;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=p?e==0?L.empty:new L(Sl(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new L(Sl(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!mf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=mf(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=mf(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=kl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=kl(this.placed,this.depth,A.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(A.empty,!0);n.childCount&&(this.placed=kl(this.placed,this.frontier.length,n))}}function Sl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Sl(t.firstChild.content,e-1,n)))}function kl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(kl(t.lastChild.content,e-1,n)))}function pf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function dk(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,dk(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(A.empty,!0)))),t.copy(r)}function mf(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!aR(n,s.content,o)?l:null}function aR(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function uR(t){return t.spec.defining||t.spec.definingForContent}function cR(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(ck(i,s,r))return t.step(new Ye(e,n,r));let o=hk(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==h&&o.splice(1,0,-f)}let a=o.indexOf(l),u=[],c=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(u.push(p),h==r.openStart)break;f=p.content}for(let f=c-1;f>=0;f--){let h=u[f],p=uR(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(l)-1)))c=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+c+1)%(r.openStart+1),p=u[h];if(p)for(let m=0;m<o.length;m++){let v=o[(m+a)%o.length],g=!0;v<0&&(g=!1,v=-v);let y=i.node(v-1),x=i.index(v-1);if(y.canReplaceWith(x,x,p.type,p.marks))return t.replace(i.before(v),g?s.after(v):n,new L(fk(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function fk(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(fk(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(A.empty,!0))}return t}function dR(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=oR(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new L(A.from(r),0,0))}function fR(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=hk(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function hk(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class lo extends vt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return He.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return He.fromReplace(e,this.pos,this.pos+1,new L(A.from(i),0,n.isLeaf?0:1))}getMap(){return Jt.empty}invert(e){return new lo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new lo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new lo(n.pos,n.attr,n.value)}}vt.jsonID("attr",lo);class la extends vt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return He.ok(r)}getMap(){return Jt.empty}invert(e){return new la(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new la(n.attr,n.value)}}vt.jsonID("docAttr",la);let Lo=class extends Error{};Lo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Lo.prototype=Object.create(Error.prototype);Lo.prototype.constructor=Lo;Lo.prototype.name="TransformError";class hR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new so}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Lo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=L.empty){let i=fd(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new L(A.from(r),0,0))}delete(e,n){return this.replace(e,n,L.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return cR(this,e,n,r),this}replaceRangeWith(e,n,r){return dR(this,e,n,r),this}deleteRange(e,n){return fR(this,e,n),this}lift(e,n){return G2(this,e,n),this}join(e,n=1){return sR(this,e,n),this}wrap(e,n){return Z2(this,e,n),this}setBlockType(e,n=e,r,i=null){return eR(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return nR(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new lo(e,n,r)),this}setDocAttribute(e,n){return this.step(new la(e,n)),this}addNodeMark(e,n){return this.step(new Xr(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ve)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new jo(e,n)),this}split(e,n=1,r){return rR(this,e,n,r),this}addMark(e,n,r){return K2(this,e,n,r),this}removeMark(e,n,r){return J2(this,e,n,r),this}clearIncompatible(e,n,r){return qm(this,e,n,r),this}}const gf=Object.create(null);class te{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new pR(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=L.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:u}=o[l],c=e.mapping.slice(s);e.replaceRange(c.map(a.pos),c.map(u.pos),l?L.empty:n),l==0&&Q0(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),u=a.map(o.pos),c=a.map(l.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Q0(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Z(e):Is(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Is(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Is(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Rn(e.node(0))}static atStart(e){return Is(e,e,0,0,1)||new Rn(e)}static atEnd(e){return Is(e,e,e.content.size,e.childCount,-1)||new Rn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=gf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in gf)throw new RangeError("Duplicate use of selection JSON ID "+e);return gf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Z.between(this.$anchor,this.$head).getBookmark()}}te.prototype.visible=!0;class pR{constructor(e,n){this.$from=e,this.$to=n}}let K0=!1;function J0(t){!K0&&!t.parent.inlineContent&&(K0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Z extends te{constructor(e,n=e){J0(e),J0(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return te.near(r);let i=e.resolve(n.map(this.anchor));return new Z(i.parent.inlineContent?i:r,r)}replace(e,n=L.empty){if(super.replace(e,n),n==L.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Z&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Z(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=te.findFrom(n,r,!0)||te.findFrom(n,-r,!0);if(s)n=s.$head;else return te.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(te.findFrom(e,-r,!0)||te.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Z(e,n)}}te.jsonID("text",Z);class hd{constructor(e,n){this.anchor=e,this.head=n}map(e){return new hd(e.map(this.anchor),e.map(this.head))}resolve(e){return Z.between(e.resolve(this.anchor),e.resolve(this.head))}}class J extends te{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?te.near(s):new J(s)}content(){return new L(A.from(this.node),0,0)}eq(e){return e instanceof J&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Jm(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new J(e.resolve(n.anchor))}static create(e,n){return new J(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}J.prototype.visible=!1;te.jsonID("node",J);class Jm{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new hd(r,r):new Jm(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&J.isSelectable(r)?new J(n):te.near(n)}}class Rn extends te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=L.empty){if(n==L.empty){e.delete(0,e.doc.content.size);let r=te.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Rn(e)}map(e){return new Rn(e)}eq(e){return e instanceof Rn}getBookmark(){return mR}}te.jsonID("all",Rn);const mR={map(){return this},resolve(t){return new Rn(t)}};function Is(t,e,n,r,i,s=!1){if(e.inlineContent)return Z.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&J.isSelectable(l))return J.create(t,n-(i<0?l.nodeSize:0))}else{let a=Is(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function Q0(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ye||i instanceof Ze))return;let s=t.mapping.maps[r],o;s.forEach((l,a,u,c)=>{o==null&&(o=c)}),t.setSelection(te.near(t.doc.resolve(o),n))}const G0=1,pu=2,Y0=4;class gR extends hR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|G0)&~pu,this.storedMarks=null,this}get selectionSet(){return(this.updated&G0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=pu,this}ensureMarks(e){return ve.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&pu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~pu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ve.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(te.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Y0,this}get scrolledIntoView(){return(this.updated&Y0)>0}}function X0(t,e){return!e||!t?t:t.bind(e)}class bl{constructor(e,n,r){this.name=e,this.init=X0(n.init,r),this.apply=X0(n.apply,r)}}const yR=[new bl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new bl("selection",{init(t,e){return t.selection||te.atStart(e.doc)},apply(t){return t.selection}}),new bl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new bl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class yf{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yR.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new bl(r.key,r.spec.state,r))})}}class Qs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,u=i?i[o].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Qs(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new gR(this)}static create(e){let n=new yf(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qs(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new yf(this.schema,e.plugins),r=n.fields,i=new Qs(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new yf(e.schema,e.plugins),s=new Qs(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ui.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=te.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=u.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function pk(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=pk(i,e,{})),n[r]=i}return n}class Vt{constructor(e){this.spec=e,this.props={},e.props&&pk(e.props,this,this.props),this.key=e.key?e.key.key:mk("plugin")}getState(e){return e[this.key]}}const vf=Object.create(null);function mk(t){return t in vf?t+"$"+ ++vf[t]:(vf[t]=0,t+"$")}class Gn{constructor(e="key"){this.key=mk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const lt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},aa=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let hp=null;const ir=function(t,e,n){let r=hp||(hp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},vR=function(){hp=null},gs=function(t,e,n,r){return n&&(Z0(t,e,n,r,-1)||Z0(t,e,n,r,1))},wR=/^(img|br|input|textarea|hr)$/i;function Z0(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:cn(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Pa(t)||wR.test(t.nodeName)||t.contentEditable=="false")return!1;e=lt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?cn(t):0}else return!1}}function cn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xR(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=cn(t)}else if(t.parentNode&&!Pa(t))e=lt(t),t=t.parentNode;else return null}}function SR(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Pa(t))e=lt(t)+1,t=t.parentNode;else return null}}function kR(t,e,n){for(let r=e==0,i=e==cn(t);r||i;){if(t==n)return!0;let s=lt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==cn(t)}}function Pa(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const pd=function(t){return t.focusNode&&gs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Li(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function bR(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function CR(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(cn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(cn(r.startContainer),r.startOffset)}}}const Jn=typeof navigator<"u"?navigator:null,ev=typeof document<"u"?document:null,Ei=Jn&&Jn.userAgent||"",pp=/Edge\/(\d+)/.exec(Ei),gk=/MSIE \d/.exec(Ei),mp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ei),Bt=!!(gk||mp||pp),di=gk?document.documentMode:mp?+mp[1]:pp?+pp[1]:0,Dn=!Bt&&/gecko\/(\d+)/i.test(Ei);Dn&&+(/Firefox\/(\d+)/.exec(Ei)||[0,0])[1];const gp=!Bt&&/Chrome\/(\d+)/.exec(Ei),gt=!!gp,yk=gp?+gp[1]:0,Et=!Bt&&!!Jn&&/Apple Computer/.test(Jn.vendor),$o=Et&&(/Mobile\/\w+/.test(Ei)||!!Jn&&Jn.maxTouchPoints>2),ln=$o||(Jn?/Mac/.test(Jn.platform):!1),ER=Jn?/Win/.test(Jn.platform):!1,On=/Android \d/.test(Ei),Ra=!!ev&&"webkitFontSmoothing"in ev.documentElement.style,_R=Ra?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function TR(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function tr(t,e){return typeof t=="number"?t:t[e]}function OR(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function tv(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=aa(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,u=a?TR(s):OR(l),c=0,d=0;if(e.top<u.top+tr(r,"top")?d=-(u.top-e.top+tr(i,"top")):e.bottom>u.bottom-tr(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+tr(i,"top")-u.top:e.bottom-u.bottom+tr(i,"bottom")),e.left<u.left+tr(r,"left")?c=-(u.left-e.left+tr(i,"left")):e.right>u.right-tr(r,"right")&&(c=e.right-u.right+tr(i,"right")),c||d)if(a)s.defaultView.scrollBy(c,d);else{let f=l.scrollLeft,h=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let p=l.scrollLeft-f,m=l.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function MR(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:vk(t.dom)}}function vk(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=aa(r));return e}function NR({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;wk(n,r==0?0:r-e)}function wk(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let As=null;function PR(t){if(t.setActive)return t.setActive();if(As)return t.focus(As);let e=vk(t);t.focus(As==null?{get preventScroll(){return As={preventScroll:!0},!0}}:void 0),As||(As=!1,wk(e,0))}function xk(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=ir(c).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=c,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&m&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?RR(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:xk(n,i)}function RR(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Mr(r,1);if(s.top!=s.bottom&&Qm(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function Qm(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function AR(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function DR(t,e,n){let{node:r,offset:i}=xk(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function IR(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Sk(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(Qm(e,u))return Sk(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function jR(t,e){let n=t.dom.ownerDocument,r,i=0,s=CR(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!Qm(e,u)||(o=Sk(t.dom,e,u),!o))return null}if(Et)for(let u=o;r&&u;u=aa(u))u.draggable&&(r=void 0);if(o=AR(o,e),r){if(Dn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;Ra&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=IR(t,r,i,e))}l==null&&(l=DR(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function nv(t){return t.top<t.bottom||t.left<t.right}function Mr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(nv(r))return r}return Array.prototype.find.call(n,nv)||t.getBoundingClientRect()}const LR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function kk(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Ra||Dn;if(r.nodeType==3)if(o&&(LR.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=Mr(ir(r,i,i),n);if(Dn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Mr(ir(r,i-1,i-1),-1);if(u.top==a.top){let c=Mr(ir(r,i,i+1),-1);if(c.top!=a.top)return hl(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,hl(Mr(ir(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==cn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return wf(a.getBoundingClientRect(),!1)}if(s==null&&i<cn(r)){let a=r.childNodes[i];if(a.nodeType==1)return wf(a.getBoundingClientRect(),!0)}return wf(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==cn(r))){let a=r.childNodes[i-1],u=a.nodeType==3?ir(a,cn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return hl(Mr(u,1),!1)}if(s==null&&i<cn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?ir(a,0,o?0:1):a.nodeType==1?a:null:null;if(u)return hl(Mr(u,-1),!0)}return hl(Mr(r.nodeType==3?ir(r):r,-n),n>=0)}function hl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function wf(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function bk(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function $R(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return bk(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=kk(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=ir(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const zR=/[\u0590-\u08ac]/;function FR(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!zR.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:bk(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&u==m;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let rv=null,iv=null,sv=!1;function BR(t,e,n){return rv==e&&iv==n?sv:(rv=e,iv=n,sv=n=="up"||n=="down"?$R(t,e,n):FR(t,e,n))}const pn=0,ov=1,Vi=2,Qn=3;class Aa{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=pn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>lt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Ek){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Ck&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?lt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?lt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],u=o+a.size;if(i==-1&&e<=u){let c=o+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=lt(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=lt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],v=p+m.size;if(s>p&&o<v)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Dn||Et)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:lt(v)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Dn&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Et)&&gs(l.node,l.offset,c.anchorNode,c.anchorOffset)&&gs(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Vi:ov,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Qn:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vi:Qn}r=o}this.dirty=Vi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vi:ov;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Ck extends Aa{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==pn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class UR extends Aa{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ys extends Aa{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=bs.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ys(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Qn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Qn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=pn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=pn}}slice(e,n,r){let i=ys.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=vp(s,n,o,r)),e>0&&(s=vp(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class fi extends Aa{constructor(e,n,r,i,s,o,l,a,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,u=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=bs.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=Ok(c,r,n),u?a=new VR(e,n,r,i,c,d||null,f,u,s,o+1):n.isText?new md(e,n,r,i,c,f,s):new fi(e,n,r,i,c,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>A.empty)}return e}matchesNode(e,n,r){return this.dirty==pn&&e.eq(this.node)&&Oc(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new WR(this,o&&o.node,e);JR(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?ve.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let h;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(u,c,d,h,e)||a.updateNextNode(u,c,d,e,f,i)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Vi)&&(o&&this.protectLocalComposition(e,o),_k(this.contentDOM,this.children,e),$o&&QR(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Z)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=GR(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new UR(this,s,n,i);e.input.compositionNodes.push(o),this.children=vp(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Qn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=pn}updateOuterDeco(e){if(Oc(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Tk(this.dom,this.nodeDOM,yp(this.outerDeco,this.node,n),yp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function lv(t,e,n,r,i){Ok(r,e,t);let s=new fi(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class md extends fi{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Qn||this.dirty!=pn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=pn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=pn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new md(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Qn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ek extends Aa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==pn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class VR extends fi{constructor(e,n,r,i,s,o,l,a,u,c){super(e,n,r,i,s,o,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==Qn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _k(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=av(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof ys){let a=r?r.previousSibling:t.lastChild;_k(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=av(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ll=function(t){t&&(this.nodeName=t)};Ll.prototype=Object.create(null);const Hi=[new Ll];function yp(t,e,n){if(t.length==0)return Hi;let r=n?Hi[0]:new Ll,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Ll(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new Ll(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Tk(t,e,n,r){if(n==Hi&&r==Hi)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Hi[0]),i=a}HR(i,l||Hi[0],o)}return i}function HR(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Ok(t,e,n){return Tk(t,t,Hi,yp(e,n,t.nodeType!=1))}function Oc(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function av(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class WR{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=qR(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=pn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ys.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Qn&&o.dom==o.contentDOM&&(o.dirty=Vi),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof fi){let u=this.preMatch.matched.get(a);if(u!=null&&u!=s)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Qn&&Oc(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Vi,d.updateChildren(i,o+1),d.dirty=pn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Oc(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=fi.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=fi.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Ck(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ys;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof md)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Et||gt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Ek(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function qR(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof ys)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function KR(t,e){return t.type.side-e.type.side}function JR(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let o=0,l=[],a=null;for(let u=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(c?(d||(d=[c])).push(v):c=v)}if(c)if(d){d.sort(KR);for(let v=0;v<d.length;v++)n(d[v],u,!!a)}else n(c,u,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(u<t.childCount)h=u,f=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=s&&l.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let p=s+f.nodeSize;if(f.isText){let v=p;o<i.length&&i[o].from<v&&(v=i[o].from);for(let g=0;g<l.length;g++)l[g].to<v&&(v=l[g].to);v<p&&(a=f.cut(v-s),f=f.cut(0,v-s),p=v,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,m,e.forChild(s,f),h),s=p}}function QR(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function GR(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;a+=u.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function vp(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],u=l,c=l+=a.size;u>=n||c<=e?s.push(a):(u<e&&s.push(a.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>n&&s.push(a.slice(n-u,a.size,r)))}return s}function Gm(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,u;if(pd(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&J.isSelectable(d)&&i.parent&&!(d.isInline&&kR(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new J(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=Ym(t,c,l,d)}return u}function Mk(t){return t.editable?t.hasFocus():Pk(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function cr(t,e=!1){let n=t.state.selection;if(Nk(t,n),!!Mk(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&gs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)XR(t);else{let{anchor:r,head:i}=n,s,o;uv&&!(n instanceof Z)&&(n.$from.parent.inlineContent||(s=cv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=cv(t,n.to))),t.docView.setSelection(r,i,t,e),uv&&(s&&dv(s),o&&dv(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&YR(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const uv=Et||gt&&yk<63;function cv(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Et&&i&&i.contentEditable=="false")return xf(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return xf(i);if(s)return xf(s)}}function xf(t){return t.contentEditable="true",Et&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function dv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function YR(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Mk(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function XR(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,lt(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Bt&&di<=11&&(r.disabled=!0,r.disabled=!1)}function Nk(t,e){if(e instanceof J){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(fv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else fv(t)}function fv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ym(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Z.between(e,n,r)}function hv(t){return t.editable&&!t.hasFocus()?!1:Pk(t)}function Pk(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function ZR(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return gs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function wp(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&te.findFrom(s,e)}function Ar(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function pv(t,e,n){let r=t.state.selection;if(r instanceof Z)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ar(t,new Z(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=wp(t.state,e);return i&&i instanceof J?Ar(t,i):!1}else if(!(ln&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?J.isSelectable(s)?Ar(t,new J(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Ra?Ar(t,new Z(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof J&&r.node.isInline)return Ar(t,new Z(e>0?r.$to:r.$from));{let i=wp(t.state,e);return i?Ar(t,i):!1}}}function Mc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function $l(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ds(t,e){return e<0?eA(t):tA(t)}function eA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Dn&&n.nodeType==1&&r<Mc(n)&&$l(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if($l(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Rk(n))break;{let l=n.previousSibling;for(;l&&$l(l,-1);)i=n.parentNode,s=lt(l),l=l.previousSibling;if(l)n=l,r=Mc(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?xp(t,n,r):i&&xp(t,i,s)}function tA(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Mc(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if($l(l,1))s=n,o=++r;else break}else{if(Rk(n))break;{let l=n.nextSibling;for(;l&&$l(l,1);)s=l.parentNode,o=lt(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Mc(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&xp(t,s,o)}function Rk(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function nA(t,e){for(;t&&e==t.childNodes.length&&!Pa(t);)e=lt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function rA(t,e){for(;t&&!e&&!Pa(t);)e=lt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function xp(t,e,n){if(e.nodeType!=3){let s,o;(o=nA(e,n))?(e=o,n=0):(s=rA(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(pd(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&cr(t)},50)}function mv(t,e){let n=t.state.doc.resolve(e);if(!(gt||ER)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function gv(t,e,n){let r=t.state.selection;if(r instanceof Z&&!r.empty||n.indexOf("s")>-1||ln&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=wp(t.state,e);if(o&&o instanceof J)return Ar(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Rn?te.near(o,e):te.findFrom(o,e);return l?Ar(t,l):!1}return!1}function yv(t,e){if(!(t.state.selection instanceof Z))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function vv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function iA(t){if(!Et||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;vv(t,r,"true"),setTimeout(()=>vv(t,r,"false"),20)}return!1}function sA(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function oA(t,e){let n=e.keyCode,r=sA(e);if(n==8||ln&&n==72&&r=="c")return yv(t,-1)||Ds(t,-1);if(n==46&&!e.shiftKey||ln&&n==68&&r=="c")return yv(t,1)||Ds(t,1);if(n==13||n==27)return!0;if(n==37||ln&&n==66&&r=="c"){let i=n==37?mv(t,t.state.selection.from)=="ltr"?-1:1:-1;return pv(t,i,r)||Ds(t,i)}else if(n==39||ln&&n==70&&r=="c"){let i=n==39?mv(t,t.state.selection.from)=="ltr"?1:-1:1;return pv(t,i,r)||Ds(t,i)}else{if(n==38||ln&&n==80&&r=="c")return gv(t,-1,r)||Ds(t,-1);if(n==40||ln&&n==78&&r=="c")return iA(t)||gv(t,1,r)||Ds(t,1);if(r==(ln?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Ak(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||bs.fromSchema(t.state.schema),l=zk(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=$k[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let p=l.createElement(c[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Dk(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return e?new L(A.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):L.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:h}=t.state,p=bs.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=o.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=cA(n),Ra&&dA(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||ci.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!lA.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=fA(wv(l,+c[1],+c[2]),c[4]);else if(l=L.maxOpen(aA(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=wv(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const lA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function aA(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),u;if(!a)return o=null;if(u=o.length&&s.length&&jk(a,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=Lk(o[o.length-1],s.length));let c=Ik(l,a);o.push(c),i=i.matchType(c.type),s=a}}),o)return A.from(o)}return t}function Ik(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,A.from(t));return t}function jk(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=jk(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(A.from(Ik(n,t,i+1))))}}function Lk(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Lk(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(A.empty,!0);return t.copy(n.append(r))}function Sp(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Sp(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(A.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function wv(t,e,n){return e<t.openStart&&(t=new L(Sp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new L(Sp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const $k={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xv=null;function zk(){return xv||(xv=document.implementation.createHTMLDocument("title"))}let Sf=null;function uA(t){let e=window.trustedTypes;return e?(Sf||(Sf=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Sf.createHTML(t)):t}function cA(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=zk().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&$k[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=uA(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function dA(t){let e=t.querySelectorAll(gt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function fA(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=A.from(a.create(r[l+1],i)),s++,o++}return new L(i,s,o)}const _t={},Tt={},hA={touchstart:!0,touchmove:!0};class pA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function mA(t){for(let e in _t){let n=_t[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{yA(t,r)&&!Xm(t,r)&&(t.editable||!(r.type in Tt))&&n(t,r)},hA[e]?{passive:!0}:void 0)}Et&&t.dom.addEventListener("input",()=>null),kp(t)}function Zr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function gA(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function kp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Xm(t,r))})}function Xm(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function yA(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function vA(t,e){!Xm(t,e)&&_t[e.type]&&(t.editable||!(e.type in Tt))&&_t[e.type](t,e)}Tt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Bk(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(On&&gt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),$o&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Li(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||oA(t,n)?n.preventDefault():Zr(t,"key")};Tt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Tt.keypress=(t,e)=>{let n=e;if(Bk(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ln&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Z)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function gd(t){return{left:t.clientX,top:t.clientY}}function wA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Zm(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ao(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function xA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&J.isSelectable(r)?(ao(t,new J(n)),!0):!1}function SA(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof J&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(J.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ao(t,J.create(t.state.doc,i)),!0):!1}function kA(t,e,n,r,i){return Zm(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?SA(t,n):xA(t,n))}function bA(t,e,n,r){return Zm(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function CA(t,e,n,r){return Zm(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||EA(t,n,r)}function EA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ao(t,Z.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ao(t,Z.create(r,l+1,l+1+o.content.size));else if(J.isSelectable(o))ao(t,J.create(r,l));else continue;return!0}}function eg(t){return Nc(t)}const Fk=ln?"metaKey":"ctrlKey";_t.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=eg(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&wA(n,t.input.lastClick)&&!n[Fk]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(gd(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new _A(t,o,n,!!r)):(s=="doubleClick"?bA:CA)(t,o.pos,o.inside,n)?n.preventDefault():Zr(t,"pointer"))};class _A{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Fk],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let c=e.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof J&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Dn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>cr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(gd(e))),this.updateAllowDefault(e),this.allowDefault||!n?Zr(this.view,"pointer"):kA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Et&&this.mightDrag&&!this.mightDrag.node.isAtom||gt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ao(this.view,te.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Zr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_t.touchstart=t=>{t.input.lastTouch=Date.now(),eg(t),Zr(t,"pointer")};_t.touchmove=t=>{t.input.lastTouch=Date.now(),Zr(t,"pointer")};_t.contextmenu=t=>eg(t);function Bk(t,e){return t.composing?!0:Et&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const TA=On?5e3:-1;Tt.compositionstart=Tt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Z&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Nc(t,!0),t.markCursor=null;else if(Nc(t,!e.selection.empty),Dn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Uk(t,TA)};Tt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Uk(t,20))};function Uk(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Nc(t),e))}function Vk(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=MA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function OA(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=xR(e.focusNode,e.focusOffset),r=SR(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function MA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Nc(t,e=!1){if(!(On&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Vk(t),e||t.docView&&t.docView.dirty){let n=Gm(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function NA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const ua=Bt&&di<15||$o&&_R<604;_t.copy=Tt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=ua?null:n.clipboardData,o=r.content(),{dom:l,text:a}=Ak(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):NA(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function PA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function RA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ca(t,r.value,null,i,e):ca(t,r.textContent,r.innerHTML,i,e)},50)}function ca(t,e,n,r,i){let s=Dk(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||L.empty)))return!0;if(!s)return!1;let o=PA(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Hk(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Tt.paste=(t,e)=>{let n=e;if(t.composing&&!On)return;let r=ua?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ca(t,Hk(r),r.getData("text/html"),i,n)?n.preventDefault():RA(t,n)};class Wk{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const qk=ln?"altKey":"ctrlKey";_t.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(gd(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof J?i.to-1:i.to))){if(r&&r.mightDrag)o=J.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=J.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:u,slice:c}=Ak(t,l);(!n.dataTransfer.files.length||!gt||yk>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ua?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",ua||n.dataTransfer.setData("text/plain",u),t.dragging=new Wk(c,!n[qk],o)};_t.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Tt.dragover=Tt.dragenter=(t,e)=>e.preventDefault();Tt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(gd(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=Dk(t,Hk(n.dataTransfer),ua?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[qk]);if(t.someProp("handleDrop",p=>p(t,n,o||L.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?uk(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let u=t.state.tr;if(l){let{node:p}=r;p?p.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),u.doc.eq(f))return;let h=u.doc.resolve(c);if(d&&J.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new J(h));else{let p=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,v,g,y)=>p=y),u.setSelection(Ym(t,h,u.doc.resolve(p)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};_t.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&cr(t)},20))};_t.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};_t.beforeinput=(t,e)=>{if(gt&&On&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Li(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Tt)_t[t]=Tt[t];function da(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Pc{constructor(e,n){this.toDOM=e,this.spec=n||is,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new fn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Pc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&da(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class hi{constructor(e,n){this.attrs=e,this.spec=n||is}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new fn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof hi&&da(this.attrs,e.attrs)&&da(this.spec,e.spec)}static is(e){return e.type instanceof hi}destroy(){}}class tg{constructor(e,n){this.attrs=e,this.spec=n||is}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new fn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof tg&&da(this.attrs,e.attrs)&&da(this.spec,e.spec)}destroy(){}}class fn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new fn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new fn(e,e,new Pc(n,r))}static inline(e,n,r,i){return new fn(e,n,new hi(r,i))}static node(e,n,r,i){return new fn(e,n,new tg(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof hi}get widget(){return this.type instanceof Pc}}const js=[],is={};class Ke{constructor(e,n){this.local=e.length?e:js,this.children=n.length?n:js}static create(e,n){return n.length?Rc(n,e,0,is):pt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==pt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||is)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?AA(this.children,o||[],e,n,r,i,s):o?new Ke(o.sort(ss),js):pt}add(e,n){return n.length?this==pt?Ke.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Jk(n,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,c,u+1):i.splice(s,0,a,a+l.nodeSize,Rc(c,l,u+1,is)),s+=3}});let o=Kk(s?Qk(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Ke(o.length?this.local.concat(o).sort(ss):this.local,i||this.children)}remove(e){return e.length==0||this==pt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=pt?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ke(i,r):pt}forChild(e,n){if(this==pt)return this;if(n.isLeaf)return Ke.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof hi){let u=Math.max(s,a.from)-s,c=Math.min(o,a.to)-s;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new Ke(i.sort(ss),js);return r?new zr([l,r]):l}return r||pt}eq(e){if(this==e)return!0;if(!(e instanceof Ke)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ng(this.localsInner(e))}localsInner(e){if(this==pt)return js;if(e.inlineContent||!this.local.some(hi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof hi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ke.empty=new Ke([],[]);Ke.removeOverlap=ng;const pt=Ke.empty;class zr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,is));return zr.from(r)}forChild(e,n){if(n.isLeaf)return Ke.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=pt&&(s instanceof zr?r=r.concat(s.members):r.push(s))}return zr.from(r)}eq(e){if(!(e instanceof zr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?ng(r?n:n.sort(ss)):js}static from(e){switch(e.length){case 0:return pt;case 1:return e[0];default:return new zr(e.every(n=>n instanceof Ke)?e:e.reduce((n,r)=>n.concat(r instanceof Ke?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function AA(t,e,n,r,i,s,o){let l=t.slice();for(let u=0,c=s;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let g=0;g<l.length;g+=3){let y=l[g+1];if(y<0||f>y+c-d)continue;let x=l[g]+c-d;h>=x?l[g+1]=f<=x?-2:-1:f>=c&&v&&(l[g]+=v,l[g+1]+=v)}d+=v}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+s),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let g=l[u+2].mapInner(n,v,c+1,t[u]+s+1,o);g!=pt?(l[u]=d,l[u+1]=h,l[u+2]=g):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=DA(l,t,e,n,i,s,o),c=Rc(u,r,0,o);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let h=c.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Ke(e.sort(ss),l)}function Kk(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new fn(i.from+e,i.to+e,i.type))}return n}function DA(t,e,n,r,i,s,o){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?n.push(d):o.onRemove&&o.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function Jk(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Qk(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Rc(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let u=Jk(t,l,a+n);if(u){s=!0;let c=Rc(u,l,n+a+1,r);c!=pt&&i.push(a,a+l.nodeSize,c)}});let o=Kk(s?Qk(t):t,-n).sort(ss);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ke(o,i):pt}function ss(t,e){return t.from-e.from||t.to-e.to}function ng(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Sv(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Sv(e,i,r.copy(s.from,r.to)));break}}}return e}function Sv(t,e,n){for(;e<t.length&&ss(n,t[e])>0;)e++;t.splice(e,0,n)}function kf(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=pt&&e.push(r)}),t.cursorWrapper&&e.push(Ke.create(t.state.doc,[t.cursorWrapper.deco])),zr.from(e)}const IA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},jA=Bt&&di<=11;class LA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class $A{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new LA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bt&&di<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),jA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,IA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hv(this.view)){if(this.suppressingSelectionUpdates)return cr(this.view);if(Bt&&di<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&gs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=aa(s))n.add(s);for(let s=e.anchorNode;s;s=aa(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hv(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Dn&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||BA(e,d)!=h)&&f.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pd(r)&&(u=Gm(e))&&u.eq(te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,cr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),zA(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||cr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Bt&&di<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?lt(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?lt(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let kv=new WeakMap,bv=!1;function zA(t){if(!kv.has(t)&&(kv.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Dn,bv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bv=!0}}function Cv(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return gs(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function FA(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Cv(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Cv(t,n):null}function BA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function UA(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],pd(a)||u.push({node:a.focusNode,offset:a.focusOffset})),gt&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let g=r.childNodes[v-1],y=g.pmViewDesc;if(g.nodeName=="BR"&&!y){s=v;break}if(!y||y.size)break}let d=t.state.doc,f=t.someProp("domParser")||ci.fromSchema(t.state.schema),h=d.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:VA,context:h});if(u&&u[0].pos!=null){let v=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=v),p={anchor:v+o,head:g+o}}return{doc:m,sel:p,from:o,to:l}}function VA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Et&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Et&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const HA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function WA(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=Gm(t,P);if(I&&!t.state.selection.eq(I)){if(gt&&On&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",pe=>pe(t,Li(13,"Enter"))))return;let ee=t.state.tr.setSelection(I);P=="pointer"?ee.setMeta("pointer",!0):P=="key"&&ee.scrollIntoView(),s&&ee.setMeta("composition",s),t.dispatch(ee)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=UA(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=JA(d.content,u.doc.content,u.from,f,h);if(p&&t.input.domChangeCount++,($o&&t.input.lastIOSEnter>Date.now()-225||On)&&i.some(P=>P.nodeType==1&&!HA.test(P.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",P=>P(t,Li(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof Z&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let P=Ev(t,t.state.doc,u.sel);if(P&&!P.eq(t.state.selection)){let I=t.state.tr.setSelection(P);s&&I.setMeta("composition",s),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Z&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Bt&&di<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=u.doc.resolveNoCache(p.start-u.from),v=u.doc.resolveNoCache(p.endB-u.from),g=c.resolve(p.start),y=m.sameParent(v)&&m.parent.inlineContent&&g.end()>=p.endA,x;if(($o&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&!m.sameParent(v)&&(x=te.findFrom(u.doc.resolve(m.pos+1),1,!0))&&x.head==v.pos)&&t.someProp("handleKeyDown",P=>P(t,Li(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&KA(c,p.start,p.endA,m,v)&&t.someProp("handleKeyDown",P=>P(t,Li(8,"Backspace")))){On&&gt&&t.domObserver.suppressSelectionUpdates();return}gt&&On&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),On&&!y&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,v=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,Li(13,"Enter"))})},20));let C=p.start,T=p.endA,S,N,O;if(y){if(m.pos==v.pos)Bt&&di<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>cr(t),20)),S=t.state.tr.delete(C,T),N=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(O=qA(m.parent.content.cut(m.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start()))))S=t.state.tr,O.type=="add"?S.addMark(C,T,O.mark):S.removeMark(C,T,O.mark);else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let P=m.parent.textBetween(m.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",I=>I(t,C,T,P)))return;S=t.state.tr.insertText(P,C,T)}}if(S||(S=t.state.tr.replace(C,T,u.doc.slice(p.start-u.from,p.endB-u.from))),u.sel){let P=Ev(t,S.doc,u.sel);P&&!(gt&&On&&t.composing&&P.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(P.head==C||P.head==S.mapping.map(T)-1)||Bt&&P.empty&&P.head==C)&&S.setSelection(P)}N&&S.ensureMarks(N),s&&S.setMeta("composition",s),t.dispatch(S.scrollIntoView())}function Ev(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ym(t,e.resolve(n.anchor),e.resolve(n.head))}function qA(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(A.from(u).eq(t))return{mark:l,type:o}}function KA(t,e,n,r,i){if(n-e<=i.pos-r.pos||bf(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(bf(s,!0,!0));return!o.parent.isTextblock||o.pos>n||bf(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function bf(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function JA(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&_v(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&_v(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function _v(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class QA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new pA,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Pv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Mv(this),Ov(this),this.nodeViews=Nv(this),this.docView=lv(this.state.doc,Tv(this),kf(this),this.dom,this),this.domObserver=new $A(this,(r,i,s,o)=>WA(this,r,i,s,o)),this.domObserver.start(),mA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&kp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Pv),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Vk(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Nv(this);YA(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&kp(this),this.editable=Mv(this),Ov(this);let a=kf(this),u=Tv(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(o=!0);let f=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&MR(this);if(o){this.domObserver.stop();let h=d&&(Bt||gt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&GA(i.selection,e.selection);if(d){let p=gt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=OA(this)),(s||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=lv(e.doc,u,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ZR(this))?cr(this,h):(Nk(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&NR(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof J){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&tv(this,n.getBoundingClientRect(),e)}else tv(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Wk(e.slice,e.move,i<0?void 0:J.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Bt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&PR(this.dom),cr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return jR(this,e)}coordsAtPos(e,n=1){return kk(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return BR(this,n||this.state,e)}pasteHTML(e,n){return ca(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ca(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(gA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],kf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vR())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return vA(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Et&&this.root.nodeType===11&&bR(this.dom.ownerDocument)==this.dom&&FA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Tv(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[fn.node(0,t.state.doc.content.size,e)]}function Ov(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:fn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Mv(t){return!t.someProp("editable",e=>e(t.state)===!1)}function GA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Nv(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function YA(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Pv(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ac={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},XA=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var at=0;at<10;at++)gi[48+at]=gi[96+at]=String(at);for(var at=1;at<=24;at++)gi[at+111]="F"+at;for(var at=65;at<=90;at++)gi[at]=String.fromCharCode(at+32),Ac[at]=String.fromCharCode(at);for(var Cf in gi)Ac.hasOwnProperty(Cf)||(Ac[Cf]=gi[Cf]);function eD(t){var e=XA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ac:gi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const tD=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function nD(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))tD?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function rD(t){let e=Object.create(null);for(let n in t)e[nD(n)]=t[n];return e}function Ef(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function iD(t){return new Vt({props:{handleKeyDown:Gk(t)}})}function Gk(t){let e=rD(t);return function(n,r){let i=eD(r),s,o=e[Ef(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Ef(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=gi[r.keyCode])&&s!=i){let l=e[Ef(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const sD=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Yk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const oD=(t,e,n)=>{let r=Yk(t,n);if(!r)return!1;let i=rg(r);if(!i){let o=r.blockRange(),l=o&&Qo(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(tb(t,i,e,-1))return!0;if(r.parent.content.size==0&&(zo(s,"end")||J.isSelectable(s)))for(let o=r.depth;;o--){let l=fd(t.doc,r.before(o),r.after(o),L.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(zo(s,"end")?te.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):J.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},lD=(t,e,n)=>{let r=Yk(t,n);if(!r)return!1;let i=rg(r);return i?Xk(t,i,e):!1},aD=(t,e,n)=>{let r=Zk(t,n);if(!r)return!1;let i=ig(r);return i?Xk(t,i,e):!1};function Xk(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=fd(t.doc,s,a,L.empty);if(!u||u.from!=s||u instanceof Ye&&u.slice.size>=a-s)return!1;if(n){let c=t.tr.step(u);c.setSelection(Z.create(c.doc,s)),n(c.scrollIntoView())}return!0}function zo(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const uD=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=rg(r)}let o=s&&s.nodeBefore;return!o||!J.isSelectable(o)?!1:(e&&e(t.tr.setSelection(J.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function rg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Zk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const cD=(t,e,n)=>{let r=Zk(t,n);if(!r)return!1;let i=ig(r);if(!i)return!1;let s=i.nodeAfter;if(tb(t,i,e,1))return!0;if(r.parent.content.size==0&&(zo(s,"start")||J.isSelectable(s))){let o=fd(t.doc,r.before(),r.after(),L.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(zo(s,"start")?te.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):J.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},dD=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=ig(r)}let o=s&&s.nodeAfter;return!o||!J.isSelectable(o)?!1:(e&&e(t.tr.setSelection(J.create(t.doc,s.pos)).scrollIntoView()),!0)};function ig(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const fD=(t,e)=>{let n=t.selection,r=n instanceof J,i;if(r){if(n.node.isTextblock||!Ci(t.doc,n.from))return!1;i=n.from}else if(i=dd(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(J.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},hD=(t,e)=>{let n=t.selection,r;if(n instanceof J){if(n.node.isTextblock||!Ci(t.doc,n.to))return!1;r=n.to}else if(r=dd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},pD=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Qo(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},mD=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function eb(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const gD=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=eb(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(te.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},yD=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Rn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=eb(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Z.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},vD=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(oo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Qo(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},wD=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(J.create(t.doc,i))),!0)};function xD(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ci(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function tb(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&xD(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,p=A.empty;for(let g=o.length-1;g>=0;g--)p=A.from(o[g].create(null,p));p=A.from(i.copy(p));let m=t.tr.step(new Ze(e.pos-1,h,e.pos,h,new L(p,1,0),o.length,!0)),v=m.doc.resolve(h+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Ci(m.doc,v.pos)&&m.join(v.pos),n(m.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&a?null:te.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&Qo(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&zo(s,"start",!0)&&zo(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=s,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let g=A.empty;for(let x=p.length-1;x>=0;x--)g=A.from(p[x].copy(g));let y=t.tr.step(new Ze(e.pos-p.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new L(g,p.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function nb(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Z.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const SD=nb(-1),kD=nb(1);function bD(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&Km(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Rv(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function CD(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let c=n.doc.resolve(o.start-2);a=new Cc(c,c,o.depth),o.endIndex<o.parent.childCount&&(o=new Cc(i,n.doc.resolve(s.end(o.depth)),o.depth)),l=!0}let u=Km(a,t,e,o);return u?(r&&r(ED(n.tr,o,u,l,t).scrollIntoView()),!0):!1}}function ED(t,e,n,r,i){let s=A.empty;for(let c=n.length-1;c>=0;c--)s=A.from(n[c].type.create(n[c].attrs,s));t.step(new Ze(e.start-(r?2:0),e.end,e.start,e.end,new L(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let l=n.length-o,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&oo(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function _D(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?TD(e,n,t,s):OD(e,n,s):!0:!1}}function TD(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ze(s-1,o,s,o,new L(A.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Cc(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Qo(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return Ci(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function OD(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(l?0:1),c+1,o.content.append(a?A.empty:A.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new Ze(d-(l?1:0),f+(a?1:0),d+1,f-1,new L((l?A.empty:A.from(i.copy(A.empty))).append(a?A.empty:A.from(i.copy(A.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function MD(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=A.from(u?t.create():null),d=new L(A.from(t.create(null,A.from(l.type.create(null,c)))),u?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Ze(f-(u?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function yd(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class vd{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,u=e||s.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{const v=this.buildProps(u,n),g=h(...m)(v);return l.push(g),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:yd({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class ND{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function V(t,e,n){return t.config[e]===void 0&&t.parent?V(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?V(t.parent,e,n):null}):t.config[e]}function wd(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function rb(t){const e=[],{nodeExtensions:n,markExtensions:r}=wd(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=V(o,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=V(o,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:c,attribute:f})})}),e}function nt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ot(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?s.split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(c=>!a.includes(c));r[i]=[...a,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(h=>h.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function bp(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ot(n,r),{})}function ib(t){return typeof t=="function"}function re(t,e=void 0,...n){return ib(t)?e?t.bind(e)(...n):t(...n):t}function PD(t={}){return Object.keys(t).length===0&&t.constructor===Object}function RD(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Av(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):RD(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Dv(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&PD(n)?!1:n!=null))}function AD(t,e){var n;const r=rb(t),{nodeExtensions:i,markExtensions:s}=wd(t),o=(n=i.find(u=>V(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((g,y)=>{const x=V(y,"extendNodeSchema",d);return{...g,...x?x(u):{}}},{}),h=Dv({...f,content:re(V(u,"content",d)),marks:re(V(u,"marks",d)),group:re(V(u,"group",d)),inline:re(V(u,"inline",d)),atom:re(V(u,"atom",d)),selectable:re(V(u,"selectable",d)),draggable:re(V(u,"draggable",d)),code:re(V(u,"code",d)),whitespace:re(V(u,"whitespace",d)),linebreakReplacement:re(V(u,"linebreakReplacement",d)),defining:re(V(u,"defining",d)),isolating:re(V(u,"isolating",d)),attrs:Object.fromEntries(c.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=re(V(u,"parseHTML",d));p&&(h.parseDOM=p.map(g=>Av(g,c)));const m=V(u,"renderHTML",d);m&&(h.toDOM=g=>m({node:g,HTMLAttributes:bp(g,c)}));const v=V(u,"renderText",d);return v&&(h.toText=v),[u.name,h]})),a=Object.fromEntries(s.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,g)=>{const y=V(g,"extendMarkSchema",d);return{...v,...y?y(u):{}}},{}),h=Dv({...f,inclusive:re(V(u,"inclusive",d)),excludes:re(V(u,"excludes",d)),group:re(V(u,"group",d)),spanning:re(V(u,"spanning",d)),code:re(V(u,"code",d)),attrs:Object.fromEntries(c.map(v=>{var g;return[v.name,{default:(g=v==null?void 0:v.attribute)===null||g===void 0?void 0:g.default}]}))}),p=re(V(u,"parseHTML",d));p&&(h.parseDOM=p.map(v=>Av(v,c)));const m=V(u,"renderHTML",d);return m&&(h.toDOM=v=>m({mark:v,HTMLAttributes:bp(v,c)})),[u.name,h]}));return new XS({topNode:o,nodes:l,marks:a})}function _f(t,e){return e.nodes[t]||e.marks[t]||null}function Iv(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function sg(t,e){const n=bs.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const DD=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function og(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class xd{constructor(e){this.find=e.find,this.handler=e.handler}}const ID=(t,e)=>{if(og(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function mu(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=DD(u)+s;return o.forEach(f=>{if(c)return;const h=ID(d,f.find);if(!h)return;const p=a.state.tr,m=yd({state:a.state,transaction:p}),v={from:r-(h[0].length-s.length),to:i},{commands:g,chain:y,can:x}=new vd({editor:n,state:m});f.handler({state:m,range:v,match:h,commands:g,chain:y,can:x})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),c=!0)}),c}function jD(t){const{editor:e,rules:n}=t,r=new Vt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=sg(A.from(c),o.schema);const{from:d}=a,f=d+c.length;mu({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return mu({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&mu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?mu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function LD(t){return Object.prototype.toString.call(t).slice(8,-1)}function gu(t){return LD(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Sd(t,e){const n={...t};return gu(t)&&gu(e)&&Object.keys(e).forEach(r=>{gu(e[r])&&gu(t[r])?n[r]=Sd(t[r],e[r]):n[r]=e[r]}),n}class yi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(V(this,"addOptions",{name:this.name}))),this.storage=re(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sd(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new yi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(V(n,"addOptions",{name:n.name})),n.storage=re(V(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=o.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function $D(t){return typeof t=="number"}class zD{constructor(e){this.find=e.find,this.handler=e.handler}}const FD=(t,e,n)=>{if(og(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function BD(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:u,can:c}=new vd({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),v=Math.min(i,p+h.content.size),g=h.textBetween(m-p,v-p,void 0,"");FD(g,s.find,o).forEach(x=>{if(x.index===void 0)return;const C=m+x.index+1,T=C+x[0].length,S={from:n.tr.mapping.map(C),to:n.tr.mapping.map(T)},N=s.handler({state:n,range:S,match:x,commands:a,chain:u,can:c,pasteEvent:o,dropEvent:l});d.push(N)})}),d.every(h=>h!==null)}const UD=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function VD(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:h,pasteEvt:p})=>{const m=c.tr,v=yd({state:c,transaction:m});if(!(!BD({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new Vt({view(d){const f=h=>{var p;r=!((p=d.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(s=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!i,v=p.getMeta("uiEvent")==="drop"&&!s,g=p.getMeta("applyPasteRules"),y=!!g;if(!m&&!v&&!y)return;if(y){let{text:T}=g;typeof T=="string"?T=T:T=sg(A.from(T),h.schema);const{from:S}=g,N=S+T.length,O=UD(T);return a({rule:c,state:h,from:S,to:{b:N},pasteEvt:O})}const x=f.doc.content.findDiffStart(h.doc.content),C=f.doc.content.findDiffEnd(h.doc.content);if(!(!$D(x)||!C||x===C.b))return a({rule:c,state:h,from:x,to:C,pasteEvt:o})}}))}function HD(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Gs{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Gs.resolve(e),this.schema=AD(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Gs.sort(Gs.flatten(e)),r=HD(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=V(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=V(r,"priority")||100,o=V(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:_f(n.name,this.schema)},i=V(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Gs.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:_f(o.name,this.schema)},a=[],u=V(o,"addKeyboardShortcuts",l);let c={};if(o.type==="mark"&&V(o,"exitable",l)&&(c.ArrowRight=()=>yi.handleExit({editor:e,mark:o})),u){const m=Object.fromEntries(Object.entries(u()).map(([v,g])=>[v,()=>g({editor:e})]));c={...c,...m}}const d=iD(c);a.push(d);const f=V(o,"addInputRules",l);Iv(o,e.options.enableInputRules)&&f&&r.push(...f());const h=V(o,"addPasteRules",l);Iv(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=V(o,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[jD({editor:e,rules:r}),...VD({editor:e,rules:i}),...s]}get attributes(){return rb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=wd(this.extensions);return Object.fromEntries(n.filter(r=>!!V(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:nt(r.name,this.schema)},o=V(r,"addNodeView",s);if(!o)return[];const l=(a,u,c,d,f)=>{const h=bp(a,i);return o()({node:a,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:_f(e.name,this.schema)};e.type==="mark"&&(!((n=re(V(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=V(e,"onBeforeCreate",r),s=V(e,"onCreate",r),o=V(e,"onUpdate",r),l=V(e,"onSelectionUpdate",r),a=V(e,"onTransaction",r),u=V(e,"onFocus",r),c=V(e,"onBlur",r),d=V(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class Mt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(V(this,"addOptions",{name:this.name}))),this.storage=re(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sd(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(V(n,"addOptions",{name:n.name})),n.storage=re(V(n,"addStorage",{name:n.name,options:n.options})),n}}function sb(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=s);const h=o==null?void 0:o[a.type.name];if(h)return c&&(l+=h({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function ob(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const WD=Mt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vt({key:new Gn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),l=Math.max(...s.map(c=>c.$to.pos)),a=ob(n);return sb(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),qD=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),KD=(t=!1)=>({commands:e})=>e.setContent("",t),JD=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Qo(h);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},QD=t=>e=>t(e),GD=()=>({state:t,dispatch:e})=>yD(t,e),YD=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Z(r.doc.resolve(o-1))),!0},XD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},ZD=t=>({tr:e,state:n,dispatch:r})=>{const i=nt(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),u=s.after(o);e.delete(a,u).scrollIntoView()}return!0}return!1},eI=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},tI=()=>({state:t,dispatch:e})=>sD(t,e),nI=()=>({commands:t})=>t.keyboardShortcut("Enter"),rI=()=>({state:t,dispatch:e})=>gD(t,e);function Dc(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:og(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function lb(t,e,n={}){return t.find(r=>r.type===e&&Dc(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function jv(t,e,n={}){return!!lb(t,e,n)}function lg(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!lb([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,a=o+1,u=l+i.node.nodeSize;for(;o>0&&jv([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&jv([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function _i(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const iI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=_i(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const d=lg(a,s,e);if(d&&d.from<=u&&d.to>=c){const f=Z.create(o,d.from,d.to);n.setSelection(f)}}return!0},sI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ab(t){return t instanceof Z}function Wi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function ub(t,e=null){if(!e)return null;const n=te.atStart(t),r=te.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Z.create(t,Wi(0,i,s),Wi(t.content.size,i,s)):Z.create(t,Wi(e,i,s),Wi(e,i,s))}function ag(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const oI=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{ag()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!ab(n.state.selection))return o(),!0;const l=ub(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},lI=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),aI=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),cb=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&cb(r)}return t};function yu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return cb(n)}function Ic(t,e,n){if(t instanceof ui||t instanceof A)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return A.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Ic("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new XS({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?ci.fromSchema(a).parseSlice(yu(t),n.parseOptions):ci.fromSchema(a).parse(yu(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=ci.fromSchema(e);return n.slice?s.parseSlice(yu(t),n.parseOptions).content:s.parse(yu(t),n.parseOptions)}return Ic("",e,n)}function uI(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ye||i instanceof Ze))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,u,c)=>{o===0&&(o=c)}),t.setSelection(te.near(t.doc.resolve(o),n))}const cI=t=>!("type"in t),dI=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=Ic(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(p){return s.emit("contentError",{editor:s,error:p,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,d=!0;if((cI(l)?l:[l]).forEach(p=>{p.check(),c=c?p.isText&&p.marks.length===0:!1,d=d?p.isBlock:!1}),a===u&&d){const{parent:p}=r.doc.resolve(a);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(a-=1,u+=1)}let h;if(c){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof A){let p="";e.forEach(m=>{m.text&&(p+=m.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,a,u)}else h=l,r.replaceWith(a,u,h);n.updateSelection&&uI(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:h})}return!0},fI=()=>({state:t,dispatch:e})=>fD(t,e),hI=()=>({state:t,dispatch:e})=>hD(t,e),pI=()=>({state:t,dispatch:e})=>oD(t,e),mI=()=>({state:t,dispatch:e})=>cD(t,e),gI=()=>({state:t,dispatch:e,tr:n})=>{try{const r=dd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},yI=()=>({state:t,dispatch:e,tr:n})=>{try{const r=dd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},vI=()=>({state:t,dispatch:e})=>lD(t,e),wI=()=>({state:t,dispatch:e})=>aD(t,e);function db(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function xI(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))ag()||db()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const SI=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=xI(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function fa(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?nt(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);l.push({node:d,from:h,to:p})});const a=i-r,u=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Dc(d.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const kI=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return fa(n,i,e)?pD(n,r):!1},bI=()=>({state:t,dispatch:e})=>vD(t,e),CI=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return _D(r)(e,n)},EI=()=>({state:t,dispatch:e})=>mD(t,e);function kd(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Lv(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const _I=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=kd(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=nt(t,r.schema)),l==="mark"&&(o=_i(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{s&&s===u.type&&n.setNodeMarkup(c,void 0,Lv(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(d=>{o===d.type&&n.addMark(c,c+u.nodeSize,o.create(Lv(d.attrs,e)))})})}),!0):!1},TI=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),OI=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),MI=()=>({state:t,dispatch:e})=>uD(t,e),NI=()=>({state:t,dispatch:e})=>dD(t,e),PI=()=>({state:t,dispatch:e})=>wD(t,e),RI=()=>({state:t,dispatch:e})=>kD(t,e),AI=()=>({state:t,dispatch:e})=>SD(t,e);function Cp(t,e,n={},r={}){return Ic(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const DI=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,u;const{doc:c}=s;if(n.preserveWhitespace!=="full"){const d=Cp(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function fb(t,e){const n=_i(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function II(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function jI(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ug(t){return e=>jI(e.$from,t)}function LI(t,e){const n={from:0,to:t.content.size};return sb(t,n,e)}function $I(t,e){const n=nt(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function zI(t,e){const n=kd(typeof e=="string"?e:e.name,t.schema);return n==="node"?$I(t,e):n==="mark"?fb(t,e):{}}function hb(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=lg(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function $u(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Ep(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?_i(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Dc(d.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(h,v),y=Math.min(p,v+m.nodeSize),x=y-g;o+=x,l.push(...m.marks.map(C=>({mark:C,from:g,to:y})))})}),o===0)return!1;const a=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Dc(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=o}function FI(t,e,n={}){if(!e)return fa(t,null,n)||Ep(t,null,n);const r=kd(e,t.schema);return r==="node"?fa(t,e,n):r==="mark"?Ep(t,e,n):!1}function $v(t,e){const{nodeExtensions:n}=wd(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=re(V(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function cg(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(cg(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function BI(t){return t instanceof J}function UI(t,e,n){var r;const{selection:i}=e;let s=null;if(ab(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=h&&p}return!u}),u})}const VI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=_i(t,r.schema);if(i)if(o){const u=fb(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,h)=>{const p=Math.max(h,c),m=Math.min(h+f.nodeSize,d);f.marks.find(g=>g.type===a)?f.marks.forEach(g=>{a===g.type&&n.addMark(p,m,a.create({...g.attrs,...e}))}):n.addMark(p,m,a.create(e))})});return UI(r,n,a)},HI=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),WI=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=nt(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>Rv(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Rv(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Wi(t,0,r.content.size),s=J.create(r,i);e.setSelection(s)}return!0},KI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Z.atStart(r).from,l=Z.atEnd(r).to,a=Wi(i,o,l),u=Wi(s,o,l),c=Z.create(r,a,u);e.setSelection(c)}return!0},JI=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return MD(r)(e,n)};function zv(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const QI=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,u=i.extensionManager.attributes,c=$u(u,l.node().type.name,l.node().attrs);if(s instanceof J&&s.node.isBlock)return!l.parentOffset||!oo(o,l.pos)?!1:(r&&(t&&zv(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:II(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:c}]:void 0,p=oo(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&oo(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:c}]:void 0),r){if(p&&(s instanceof Z&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const m=e.mapping.map(l.before()),v=e.doc.resolve(m);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&zv(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},GI=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=nt(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=A.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let O=a.depth-y;O>=a.depth-3;O-=1)g=A.from(a.node(O).copy(g));const x=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,C={...$u(f,a.node().type.name,a.node().attrs),...e},T=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;g=g.append(A.from(l.createAndFill(null,T)||void 0));const S=a.before(a.depth-(y-1));n.replace(S,a.after(-x),new L(g,4-y,0));let N=-1;n.doc.nodesBetween(S,n.doc.content.size,(O,P)=>{if(N>-1)return!1;O.isTextblock&&O.content.size===0&&(N=P+1)}),N>-1&&n.setSelection(Z.near(n.doc.resolve(N))),n.scrollIntoView()}return!0}const h=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,p={...$u(f,d.type.name,d.attrs),...e},m={...$u(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const v=h?[{type:l,attrs:p},{type:h,attrs:m}]:[{type:l,attrs:p}];if(!oo(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:y}=r,{splittableMarks:x}=s.extensionManager,C=y||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!C||!i)return!0;const T=C.filter(S=>x.includes(S.type.name));n.ensureMarks(T)}return!0},Tf=(t,e)=>{const n=ug(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ci(t.doc,n.pos)&&t.join(n.pos),!0},Of=(t,e)=>{const n=ug(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ci(t.doc,r)&&t.join(r),!0},YI=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=nt(t,o.schema),p=nt(e,o.schema),{selection:m,storedMarks:v}=o,{$from:g,$to:y}=m,x=g.blockRange(y),C=v||m.$to.parentOffset&&m.$from.marks();if(!x)return!1;const T=ug(S=>$v(S.type.name,d))(m);if(x.depth>=1&&T&&x.depth-T.depth<=1){if(T.node.type===h)return u.liftListItem(p);if($v(T.node.type.name,d)&&h.validContent(T.node.content)&&l)return a().command(()=>(s.setNodeMarkup(T.pos,h),!0)).command(()=>Tf(s,h)).command(()=>Of(s,h)).run()}return!n||!C||!l?a().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Tf(s,h)).command(()=>Of(s,h)).run():a().command(()=>{const S=c().wrapInList(h,r),N=C.filter(O=>f.includes(O.type.name));return s.ensureMarks(N),S?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Tf(s,h)).command(()=>Of(s,h)).run()},XI=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=_i(t,r.schema);return Ep(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},ZI=(t,e,n={})=>({state:r,commands:i})=>{const s=nt(t,r.schema),o=nt(e,r.schema),l=fa(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},ej=(t,e={})=>({state:n,commands:r})=>{const i=nt(t,n.schema);return fa(n,i,e)?r.lift(i):r.wrapIn(i,e)},tj=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},nj=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},rj=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=_i(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&o){let{from:f,to:h}=l;const p=(s=u.marks().find(v=>v.type===a))===null||s===void 0?void 0:s.attrs,m=lg(u,a,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},ij=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=kd(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=nt(t,r.schema)),l==="mark"&&(o=_i(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,h,p;n.selection.empty?r.doc.nodesBetween(u,c,(m,v)=>{s&&s===m.type&&(h=Math.max(v,u),p=Math.min(v+m.nodeSize,c),d=v,f=m)}):r.doc.nodesBetween(u,c,(m,v)=>{v<u&&s&&s===m.type&&(h=Math.max(v,u),p=Math.min(v+m.nodeSize,c),d=v,f=m),v>=u&&v<=c&&(s&&s===m.type&&n.setNodeMarkup(v,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(g=>{if(o===g.type){const y=Math.max(v,u),x=Math.min(v+m.nodeSize,c);n.addMark(y,x,o.create({...g.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(m=>{o===m.type&&n.addMark(h,p,o.create({...m.attrs,...e}))}))}),!0):!1},sj=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return bD(i,e)(n,r)},oj=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return CD(i,e)(n,r)};var lj=Object.freeze({__proto__:null,blur:qD,clearContent:KD,clearNodes:JD,command:QD,createParagraphNear:GD,cut:YD,deleteCurrentNode:XD,deleteNode:ZD,deleteRange:eI,deleteSelection:tI,enter:nI,exitCode:rI,extendMarkRange:iI,first:sI,focus:oI,forEach:lI,insertContent:aI,insertContentAt:dI,joinBackward:pI,joinDown:hI,joinForward:mI,joinItemBackward:gI,joinItemForward:yI,joinTextblockBackward:vI,joinTextblockForward:wI,joinUp:fI,keyboardShortcut:SI,lift:kI,liftEmptyBlock:bI,liftListItem:CI,newlineInCode:EI,resetAttributes:_I,scrollIntoView:TI,selectAll:OI,selectNodeBackward:MI,selectNodeForward:NI,selectParentNode:PI,selectTextblockEnd:RI,selectTextblockStart:AI,setContent:DI,setMark:VI,setMeta:HI,setNode:WI,setNodeSelection:qI,setTextSelection:KI,sinkListItem:JI,splitBlock:QI,splitListItem:GI,toggleList:YI,toggleMark:XI,toggleNode:ZI,toggleWrap:ej,undoInputRule:tj,unsetAllMarks:nj,unsetMark:rj,updateAttributes:ij,wrapIn:sj,wrapInList:oj});const aj=Mt.create({name:"commands",addCommands(){return{...lj}}}),uj=Mt.create({name:"drop",addProseMirrorPlugins(){return[new Vt({key:new Gn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),cj=Mt.create({name:"editable",addProseMirrorPlugins(){return[new Vt({key:new Gn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dj=Mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vt({key:new Gn("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),fj=Mt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=m&&p.parent.childCount===1?v===d.pos:te.atStart(u).from===f;return!c||!h.type.isTextblock||h.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ag()||db()?s:i},addProseMirrorPlugins(){return[new Vt({key:new Gn("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=te.atStart(e.doc).from,u=te.atEnd(e.doc).to;if(s||!(o===a&&l===u)||!cg(n.doc))return;const f=n.tr,h=yd({state:n,transaction:f}),{commands:p}=new vd({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),hj=Mt.create({name:"paste",addProseMirrorPlugins(){return[new Vt({key:new Gn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),pj=Mt.create({name:"tabindex",addProseMirrorPlugins(){return[new Vt({key:new Gn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class $i{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new $i(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new $i(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new $i(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new $i(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new $i(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const mj=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function gj(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class yj extends ND{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=gj(mj,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=ib(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[cj,WD.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),aj,dj,fj,pj,uj,hj].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Gs(i,this)}createCommandManager(){this.commandManager=new vd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Cp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Cp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=ub(n,this.options.autofocus);this.view=new QA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Qs.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return zI(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return FI(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return sg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return LI(this.state.doc,{blockSeparator:n,textSerializers:{...ob(this.schema),...r}})}get isEmpty(){return cg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new $i(n,this)}get $doc(){return this.$pos(0)}}function Fo(t){return new xd({find:t.find,handler:({state:e,range:n,match:r})=>{const i=re(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),u=n.from+l.indexOf(o),c=u+o.length;if(hb(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&s.delete(c,n.to),u>n.from&&s.delete(n.from+a,u);const f=n.from+a+o.length;s.addMark(n.from+a,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function vj(t){return new xd({find:t.find,handler:({state:e,range:n,match:r})=>{const i=re(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function _p(t){return new xd({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=re(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function ha(t){return new xd({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=re(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),u=a&&Km(a,t.type,s);if(!u)return null;if(o.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(v=>h.includes(v.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Ci(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&o.join(n.from-1)}})}class Ut{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=re(V(this,"addOptions",{name:this.name}))),this.storage=re(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Sd(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ut(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=re(V(n,"addOptions",{name:n.name})),n.storage=re(V(n,"addStorage",{name:n.name,options:n.options})),n}}function Bo(t){return new zD({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=re(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(hb(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+c,d),u=n.from+c+l.length,o.addMark(n.from+c,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function wj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pb={exports:{}},Mf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function xj(){if(Fv)return Mf;Fv=1;var t=Ce;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),m=p[0].inst,v=p[1];return s(function(){m.value=h,m.getSnapshot=f,a(m)&&v({inst:m})},[d,h,f]),i(function(){return a(m)&&v({inst:m}),d(function(){a(m)&&v({inst:m})})},[d]),o(h),h}function a(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return Mf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,Mf}pb.exports=xj();var dg=pb.exports;const Sj=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},kj=({contentComponent:t})=>{const e=dg.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Ce.createElement(Ce.Fragment,null,Object.values(e))};function bj(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:vx.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class Cj extends Ce.Component{constructor(e){var n;super(e),this.editorContentRef=Ce.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=bj(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Ce.createElement(Ce.Fragment,null,Ce.createElement("div",{ref:Sj(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Ce.createElement(kj,{contentComponent:e.contentComponent}))}}const Ej=_.forwardRef((t,e)=>{const n=Ce.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ce.createElement(Cj,{key:n,innerRef:e,...t})}),_j=Ce.memo(Ej);var Tj=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},Oj=wj(Tj),mb={exports:{}},Nf={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function Mj(){if(Bv)return Nf;Bv=1;var t=Ce,e=dg;function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Nf.useSyncExternalStoreWithSelector=function(u,c,d,f,h){var p=s(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=l(function(){function g(S){if(!y){if(y=!0,x=S,S=f(S),h!==void 0&&m.hasValue){var N=m.value;if(h(N,S))return C=N}return C=S}if(N=C,r(x,S))return N;var O=f(S);return h!==void 0&&h(N,O)?N:(x=S,C=O)}var y=!1,x,C,T=d===void 0?null:d;return[function(){return g(c())},T===null?void 0:function(){return g(T())}]},[c,d,f,h]);var v=i(u,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=v},[v]),a(v),v},Nf}mb.exports=Mj();var Nj=mb.exports;class Pj{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function Rj(t){var e;const[n]=_.useState(()=>new Pj(t.editor)),r=Nj.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:Oj);return _.useEffect(()=>n.watch(t.editor),[t.editor,n]),_.useDebugValue(r),r}const Aj=!1,Tp=typeof window>"u",Dj=Tp||!!(typeof window<"u"&&window.next);class Ij{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Tp||Dj?null:this.createEditor();if(this.options.current.immediatelyRender&&Tp&&Aj)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new yj(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function jj(t={},e=[]){const n=_.useRef(t);n.current=t;const[r]=_.useState(()=>new Ij(n)),i=dg.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return _.useDebugValue(i),_.useEffect(r.onRender(e)),Rj({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const Lj=_.createContext({editor:null});Lj.Consumer;const $j=_.createContext({onDragStart:void 0}),zj=()=>_.useContext($j);Ce.forwardRef((t,e)=>{const{onDragStart:n}=zj(),r=t.as||"div";return Ce.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Fj=/^\s*>\s$/,Bj=Ut.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ha({find:Fj,type:this.type})]}}),Uj=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Vj=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Hj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Wj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,qj=yi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Fo({find:Uj,type:this.type}),Fo({find:Hj,type:this.type})]},addPasteRules(){return[Bo({find:Vj,type:this.type}),Bo({find:Wj,type:this.type})]}}),Kj="listItem",Uv="textStyle",Vv=/^\s*([-+*])\s$/,Jj=Ut.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Kj,this.editor.getAttributes(Uv)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ha({find:Vv,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ha({find:Vv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Uv),editor:this.editor})),[t]}}),Qj=new RegExp("(?<!`)`([^`]+)`(?!`)"),Gj=new RegExp("(?<!`)`([^`]+)`(?!`)","g"),Yj=yi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Fo({find:Qj,type:this.type})]},addPasteRules(){return[Bo({find:Gj,type:this.type})]}}),Xj=/^```([a-z]+)?[\s\n]$/,Zj=/^~~~([a-z]+)?[\s\n]$/,eL=Ut.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ot(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(te.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[_p({find:Xj,type:this.type,getAttributes:t=>({language:t[1]})}),_p({find:Zj,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Vt({key:new Gn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(Z.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),tL=Ut.create({name:"doc",topNode:!0,content:"block+"});function nL(t={}){return new Vt({view(e){return new rL(e,t)}})}class rL{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=l?c.bottom:c.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=uk(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const iL=Mt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[nL(this.options)]}});class Ie extends te{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ie.valid(r)?new Ie(r):te.near(r)}content(){return L.empty}eq(e){return e instanceof Ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ie(e.resolve(n.pos))}getBookmark(){return new fg(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!sL(e)||!oL(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ie.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Ie.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!J.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Ie.valid(l))return l}return null}}}Ie.prototype.visible=!1;Ie.findFrom=Ie.findGapCursorFrom;te.jsonID("gapcursor",Ie);class fg{constructor(e){this.pos=e}map(e){return new fg(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ie.valid(n)?new Ie(n):te.near(n)}}function sL(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function oL(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lL(){return new Vt({props:{decorations:dL,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ie.valid(n)?new Ie(n):null},handleClick:uL,handleKeyDown:aL,handleDOMEvents:{beforeinput:cL}}})}const aL=Gk({ArrowLeft:vu("horiz",-1),ArrowRight:vu("horiz",1),ArrowUp:vu("vert",-1),ArrowDown:vu("vert",1)});function vu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof Z){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Ie.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new Ie(u))),!0):!1}}function uL(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&J.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ie(r))),!0)}function cL(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=A.empty;for(let o=r.length-1;o>=0;o--)i=A.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new L(i,0,0));return s.setSelection(Z.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function dL(t){if(!(t.selection instanceof Ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ke.create(t.doc,[fn.widget(t.selection.head,e,{key:"gapcursor"})])}const fL=Mt.create({name:"gapCursor",addProseMirrorPlugins(){return[lL()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=re(V(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),hL=Ut.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ot(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&o){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),pL=Ut.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ot(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>_p({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var jc=200,et=function(){};et.prototype.append=function(e){return e.length?(e=et.from(e),!this.length&&e||e.length<jc&&this.leafAppend(e)||this.length<jc&&e.leafPrepend(this)||this.appendInner(e)):this};et.prototype.prepend=function(e){return e.length?et.from(e).append(this):this};et.prototype.appendInner=function(e){return new mL(this,e)};et.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?et.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};et.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};et.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};et.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};et.from=function(e){return e instanceof et?e:e&&e.length?new gb(e):et.empty};var gb=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=jc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=jc)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(et);et.empty=new gb([]);var mL=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(et);const gL=500;class Mn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new zn(d.map));let h=d.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new zn(p,void 0,void 0,u.length+c.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new Mn(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new zn(e.mapping.maps[c],d,n),h;(h=a&&a.merge(f))&&(f=h,c?s.pop():l=l.slice(0,l.length-1)),s.push(f),n&&(o++,n=void 0),i||(a=f)}let u=o-r.depth;return u>vL&&(l=yL(l,u),o-=u),new Mn(l.append(s),o)}remapping(e,n){let r=new so;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Mn(this.items.append(e.map(n=>new zn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(s.slice(a+1,h));v&&l++,r.push(new zn(p,m,v))}else r.push(new zn(p))},i);let u=[];for(let f=n;f<o;f++)u.push(new zn(s.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new Mn(c,l);return d.emptyItemCount()>gL&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new zn(u.invert(),a,c),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new Mn(et.from(i.reverse()),s)}}Mn.empty=new Mn(et.empty,0);function yL(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class zn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new zn(n.getMap().invert(),n,this.selection)}}}class Dr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const vL=20;function wL(t,e,n,r){let i=n.getMeta(ls),s;if(i)return i.historyState;n.getMeta(kL)&&(t=new Dr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ls))return o.getMeta(ls).redo?new Dr(t.done.addTransform(n,void 0,r,zu(e)),t.undone,Hv(n.mapping.maps),t.prevTime,t.prevComposition):new Dr(t.done,t.undone.addTransform(n,void 0,r,zu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!xL(n,t.prevRanges)),u=o?Pf(t.prevRanges,n.mapping):Hv(n.mapping.maps);return new Dr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,zu(e)),Mn.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Dr(t.done.rebased(n,s),t.undone.rebased(n,s),Pf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Dr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Pf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function xL(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Hv(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Pf(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function SL(t,e,n){let r=zu(e),i=ls.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new Dr(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(ls,{redo:n,historyState:a})}let Rf=!1,Wv=null;function zu(t){let e=t.plugins;if(Wv!=e){Rf=!1,Wv=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Rf=!0;break}}return Rf}const ls=new Gn("history"),kL=new Gn("closeHistory");function bL(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Vt({key:ls,state:{init(){return new Dr(Mn.empty,Mn.empty,null,0,-1)},apply(e,n,r){return wL(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?vb:r=="historyRedo"?wb:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function yb(t,e){return(n,r)=>{let i=ls.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=SL(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const vb=yb(!1,!0),wb=yb(!0,!0),CL=Mt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>vb(t,e),redo:()=>({state:t,dispatch:e})=>wb(t,e)}},addProseMirrorPlugins(){return[bL(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),EL=Ut.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ot(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):BI(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:u}=o.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?o.setSelection(Z.create(o.doc,u.pos+1)):u.nodeAfter.isBlock?o.setSelection(J.create(o.doc,u.pos)):o.setSelection(Z.create(o.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(c,d),o.setSelection(Z.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vj({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),_L=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,TL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,OL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ML=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,NL=yi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Fo({find:_L,type:this.type}),Fo({find:OL,type:this.type})]},addPasteRules(){return[Bo({find:TL,type:this.type}),Bo({find:ML,type:this.type})]}}),PL=Ut.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ot(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),RL="listItem",qv="textStyle",Kv=/^(\d+)\.\s$/,AL=Ut.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ot(this.options.HTMLAttributes,n),0]:["ol",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RL,this.editor.getAttributes(qv)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ha({find:Kv,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ha({find:Kv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(qv)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),DL=Ut.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),IL=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,jL=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,LL=yi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Fo({find:IL,type:this.type})]},addPasteRules(){return[Bo({find:jL,type:this.type})]}}),$L=Ut.create({name:"text",group:"inline"}),zL=Mt.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,l,a,u,c,d,f,h,p,m,v,g;const y=[];return this.options.bold!==!1&&y.push(qj.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&y.push(Bj.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&y.push(Jj.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&y.push(Yj.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&y.push(eL.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&y.push(tL.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&y.push(iL.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&y.push(fL.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&y.push(hL.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&y.push(pL.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&y.push(CL.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&y.push(EL.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&y.push(NL.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(PL.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&y.push(AL.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&y.push(DL.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&y.push(LL.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&y.push($L.configure((g=this.options)===null||g===void 0?void 0:g.text)),y}}),FL=({content:t})=>{const e=jj({extensions:[zL],content:t,editable:!1,editorProps:{attributes:{class:"prose prose-sm sm:prose-base max-w-none"}}});return w.jsxs("div",{className:"mt-12",children:[w.jsx("h2",{className:"text-2xl font-bold text-center mb-8 underline",children:"Descripcin"}),w.jsx(_j,{editor:e})]})},BL=({images:t})=>{const[e,n]=_.useState(t[0]),r=i=>{n(i)};return w.jsxs("div",{className:"flex-1 flex flex-col gap-3  relative",children:[w.jsx("div",{className:"bg-[f2f2f2] h-[500px] p-4",children:w.jsx("img",{src:e,alt:"Imagen de Producto",className:"h-full w-full object-contain"})}),w.jsx("div",{className:"flex mt-4 gap-2",children:t.map((i,s)=>w.jsx("button",{onClick:()=>r(i),className:`w-16 h-16 p-1 border ${e===i?"border-black":"border-transparent"}
                roundend-lg hover:border-black focus:outline-none`,children:w.jsx("img",{src:i,alt:`Thumbnail ${s+1}`,className:"w-full h-full object-cover rounded-lg"})},s))})]})},UL=t=>{const{data:e,isLoading:n,isError:r}=IS({queryKey:["product",t],queryFn:()=>LN(t),retry:!1});return{product:e,isError:r,isLoading:n}};function VL(t){return We({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}const HL=()=>w.jsx("div",{className:"flex items-center justify-center h-screen",children:w.jsx(VL,{className:"animate-spin",size:70})}),WL=t=>({count:1,increment:()=>{t(e=>({count:e.count+1}))},decrement:()=>{t(e=>({count:Math.max(1,e.count-1)}))}}),Af=Pm()(Rm(WL)),qL=()=>{const{slug:t}=dT(),[e,n]=_.useState(t),{product:r,isLoading:i,isError:s}=UL(e||""),[o,l]=_.useState(null),[a,u]=_.useState(null),[c,d]=_.useState(null),f=Af(S=>S.count),h=Af(S=>S.increment),p=Af(S=>S.decrement),m=ai(S=>S.addItem),v=Nm(),g=_.useMemo(()=>(r==null?void 0:r.variants.reduce((S,N)=>{const{color:O,color_name:P,storage:I}=N;return S[O]||(S[O]={name:P,storages:[]}),S[O].storages.includes(I)||S[O].storages.push(I),S},{}))||{},[r==null?void 0:r.variants]),y=Object.keys(g);_.useEffect(()=>{!o&&y.length>0&&l(y[0])},[y,o]),_.useEffect(()=>{o&&g[o]&&!a&&u(g[o].storages[0])},[o,g,a]),_.useEffect(()=>{if(o&&a){const S=r==null?void 0:r.variants.find(N=>N.color===o&&N.storage===a);d(S)}},[o,a,r==null?void 0:r.variants]);const x=(c==null?void 0:c.stock)===0,C=()=>{c&&(m({variantId:c.id,productId:(r==null?void 0:r.id)||"",name:(r==null?void 0:r.name)||"",image:(r==null?void 0:r.images[0])||"",color:c.color_name,storage:c.storage,price:c.price,quantity:f}),Uh.success("Producto aadido al carrito",{position:"bottom-right"}))},T=()=>{c&&(m({variantId:c.id,productId:(r==null?void 0:r.id)||"",name:(r==null?void 0:r.name)||"",image:(r==null?void 0:r.images[0])||"",color:c.color_name,storage:c.storage,price:c.price,quantity:f}),v("/checkout"))};return _.useEffect(()=>{n(t),l(null),u(null),d(null)},[t]),i?w.jsx(HL,{}):!r||s?w.jsx("div",{className:"flex justify-center items-center h-[80vh]",children:w.jsx("p",{children:"Producto no encontrado"})}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"h-fit flex flex-col md:flex-row gap-16 mt-8",children:[w.jsx(BL,{images:r.images}),w.jsxs("div",{className:"flex-1 space-y-5",children:[w.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r.name}),w.jsxs("div",{className:"flex gap-5 items-center",children:[w.jsx("span",{className:"tracking-wide text-lg font-semibold",children:td((c==null?void 0:c.price)||r.variants[0].price)}),w.jsx("div",{className:"relative",children:x&&w.jsx(fS,{contentTag:"agotado"})})]}),w.jsx(jS,{}),w.jsx("ul",{className:"space-y-2 ml-7 my-10",children:r.features.map(S=>w.jsxs("li",{className:"text-sm flex items-center gap-2 tracking-tight font-medium",children:[w.jsx("span",{className:"bg-black w-[5px] h-[5px] rounded-full"}),S]},S))}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsxs("p",{children:["Color: ",o&&g[o].name]}),w.jsx("div",{className:"flex gap-3",children:y.map(S=>w.jsx("button",{className:`w-8 h-8 rounded-full flex justify-center items-center ${o===S?"border border-slate-800":""}`,onClick:()=>l(S),children:w.jsx("span",{className:"w-[26px] h-[26px] rounded-full",style:{backgroundColor:S}})},S))})]}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsx("p",{className:"text-xs font-medium",children:"Almacenamiento disponible"}),o&&w.jsx("div",{className:"flex gap-3",children:w.jsx("select",{className:"border border-gray-300 rounded-lg px-3 py-1",value:a||"",onChange:S=>u(S.target.value),children:g[o].storages.map(S=>w.jsx("option",{value:S,children:S},S))})})]}),x?w.jsx("button",{className:"bg-[#f3f3f3] uppercase font-semibold tracking-widest text-xs py-4 rounded-full transition-all duration-300 hover:bg-[#e2e2e2] w-full",disabled:!0,children:"Agotado"}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-3",children:[w.jsx("p",{className:"text-sm font-medium",children:"Cantidad:"}),w.jsxs("div",{className:"flex gap-8 px-5 py-3 border border-slate-200 w-fit rounded-full",children:[w.jsx("button",{onClick:p,disabled:f===1,children:w.jsx(Bx,{size:15})}),w.jsx("span",{className:"text-slate-500 text-sm",children:f}),w.jsx("button",{onClick:h,children:w.jsx(Ux,{size:15})})]})]}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsx("button",{className:"bg-[#f3f3f3] uppercase font-semibold tracking-widest text-xs py-4 rounded-full transition-all duration-300 hover:bg-[#e2e2e2]",onClick:C,children:"Agregar al carro"}),w.jsx("button",{className:"bg-black text-white uppercase font-semibold tracking-widest text-xs py-4 rounded-full",onClick:T,children:"Comprar ahora"})]})]}),w.jsxs("div",{className:"flex pt-2",children:[w.jsxs("div",{className:"flex flex-col gap-1 flex-1 items-center",children:[w.jsx(x2,{size:35}),w.jsx("p",{className:"text-xs font-semibold",children:"Envo gratis"})]}),w.jsxs(Gt,{to:"#",className:"flex flex-col gap-1 flex-1 items-center justify-center",children:[w.jsx(S2,{size:30}),w.jsxs("p",{className:"flex flex-col items-center text-xs",children:[w.jsx("span",{className:"font-semibold",children:"Necesitas ayuda?"}),"Contctanos aqu"]})]})]})]})]}),w.jsx(FL,{content:r.description})]})},KL=RT([{path:"/",element:w.jsx(UN,{}),children:[{index:!0,element:w.jsx(p2,{})},{path:"celulares",element:w.jsx(v2,{})},{path:"celulares/:slug",element:w.jsx(qL,{})},{path:"nosotros",element:w.jsx(w2,{})}]}]),JL=new t2;wx(document.getElementById("root")).render(w.jsx(_.StrictMode,{children:w.jsxs(o2,{client:JL,children:[w.jsx(FT,{router:KL}),w.jsx(zP,{})]})}));export{s1 as g};
